<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>はじめての Django アプリ作成、その 3 &mdash; Django v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="contents" title="Global table of contents" href="../contents.html" />
    <link rel="index" title="Global index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Django v1.0 documentation" href="../index.html" />
    <link rel="up" title="さあ始めましょう" href="index.html" />
    <link rel="next" title="はじめての Django アプリ作成、その 4" href="tutorial04.html" />
    <link rel="prev" title="はじめての Django アプリ作成、その 2" href="tutorial02.html" />
  </head>
  <body>
  <div id="outdated-warning" class="doc-floating-warning" style="position: relative;">
    このドキュメントの Django のバージョンにはセキュリティ上の脆弱性があるため、すでにサポートが終了されています。新しいバージョンにアップグレードしてください！<a href="https://docs.djangoproject.com/ja/">最新の Django のバージョンのドキュメントはこちら</a>
  </div>
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Django v1.0 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">ホーム</a>  |
        <a title="Table of contents" href="../contents.html">目次</a>  |
        <a title="Global index" href="../genindex.html">索引</a>  |
        <a title="Search" href="../modindex.html">モジュール一覧</a>
      </div>
      <div class="nav">
    &laquo; <a href="tutorial02.html" title="はじめての Django アプリ作成、その 2">前へ</a> 
     |
    <a href="index.html" title="さあ始めましょう" accesskey="U">上へ</a>
   |
    <a href="tutorial04.html" title="はじめての Django アプリ作成、その 4">次へ</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="intro-tutorial03">
            
  
  <div class="section" id="s-django-3">
<span id="s-intro-tutorial03"></span><h1>はじめての Django アプリ作成、その 3<a class="headerlink" href="#django-3" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">revision-up-to:</th><td class="field-body">8961 (1.0)</td>
</tr>
</tbody>
</table>
<p>このチュートリアルは <a class="reference external" href="tutorial02.html#intro-tutorial02"><em>チュートリアルその 2</em></a> の続き
です。ここでは、引続きWeb 投票アプリケーションの開発を例にして、公開用のイ
ンタフェース、ビュー(view) の作成を焦点に解説します。</p>
<div class="section" id="s-id1">
<span id="s-philosophy"></span><h2>ビューの設計哲学<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>ビューとは、 Django のアプリケーションにおいて特定の機能を提供するウェブペー
ジの「型 (type)」であり、独自のテンプレートを持っています。例えばブログアプ
リケーションなら、以下のようなビューがあるでしょう:</p>
<ul class="simple">
<li>Blog ホームページ &#8211; 最新のエントリをいくつか表示します。</li>
<li>エントリの「詳細」ページ &#8211; 一つのエントリへの恒久リンク (permalink)
ページです。</li>
<li>年ごとのアーカイブページ &#8211; エントリのある年を表示します。</li>
<li>月ごとのアーカイブページ &#8211; ある年のエントリのある月を表示します。</li>
<li>日ごとのアーカイブページ &#8211; ある月のエントリのある日を表示します。</li>
<li>コメント投稿 &#8211; あるエントリに対するコメントの投稿を受け付けます。</li>
</ul>
<p>Poll アプリケーションの場合には、以下の 4 つのビューを作成します:</p>
<ul class="simple">
<li>Poll の「アーカイブ」ページ &#8211; 最新の調査項目 (poll) をいくつか表示し
ます。</li>
<li>Poll の「詳細」ページ &#8211; 調査項目と投票用フォームを表示します。開票結
果は表示しません。</li>
<li>Poll の「開票結果」ページ &#8211; ある調査項目に対する結果を表示します。</li>
<li>投票ページ &#8211; ある調査項目のある選択肢に対する投票を受け付けます。</li>
</ul>
<p>Django では、各ビューは簡単な Python の関数として表現されます。</p>
</div>
<div class="section" id="s-url">
<h2>URL スキームの設計<a class="headerlink" href="#url" title="Permalink to this headline">¶</a></h2>
<p>ビューを書く上での最初のステップは、 URL 構造の設計です。 URL 構造を定義す
るには、 URLconf と呼ばれる Python モジュールを作成します。 Django は
URLconf を使ってどの URL をどの Python コードに関連づけるかを決めています。</p>
<p>ユーザが Django で作られたページをリクエストすると、システムは
<a class="reference external" href="../ref/settings.html#setting-ROOT_URLCONF"><tt class="xref docutils literal"><span class="pre">ROOT_URLCONF</span></tt></a> 設定を探します。この設定には Python モジュールをドッ
ト表記で表した文字列が入っています。 Django は指定されたモジュールをロード
して、 <tt class="docutils literal"><span class="pre">urlpatterns</span></tt> という名前のモジュールレベル変数を探します。
<tt class="docutils literal"><span class="pre">urlpatterns</span></tt> は以下のような形式のタプルからなるシーケンスです:</p>
<pre>(正規表現, Pythonのコールバック関数,  [, オプションの辞書オブジェクト])</pre>
<p>Django は先頭のタプルから順に、リクエストされた URL とタプル内の正規表現が
マッチするまでテストしてゆきます。</p>
<p>マッチする正規表現が見つかると、Django は該当するタプルに指定されているコー
ルバック関数を呼び出します。コールバック関数には
<a title="django.http.HttpRequest" class="reference external" href="../ref/request-response.html#django.http.HttpRequest"><tt class="xref docutils literal"><span class="pre">HttpRequest</span></tt></a> オブジェクトを第一引数として渡します。
さらに、正規表現内で「キャプチャした (captured)」値をキーワード引数として渡
します。(タプルの三番目の要素である) オプションの辞書オブジェクトが指定され
ていれば、その内容も追加のキーワード引数として渡します。</p>
<p><tt class="xref docutils literal"><span class="pre">HttpRequest`</span></tt> オブジェクトの詳細は
<a class="reference external" href="../ref/request-response.html#ref-request-response"><em>リクエストオブジェクトとレスポンスオブジェクト</em></a> を参照してください。 URLconf の詳細は
<a class="reference external" href="../topics/http/urls.html#topics-http-urls"><em>URL ディスパッチャ</em></a> を参照してください。</p>
<p>チュートリアルその 1 の冒頭で
<tt class="docutils literal"><span class="pre">python</span> <span class="pre">django-admin.py</span> <span class="pre">startproject</span> <span class="pre">mysite</span></tt> を実行していれば、URLconf が
<tt class="docutils literal"><span class="pre">mysite/urls.py</span></tt> にできているはずです。また、(<tt class="docutils literal"><span class="pre">settings.py</span></tt> の)
<a class="reference external" href="../ref/settings.html#setting-ROOT_URLCONF"><tt class="xref docutils literal"><span class="pre">ROOT_URLCONF</span></tt></a> 設定にも、自動的に値が入ります:</p>
<div class="highlight"><pre><span class="n">ROOT_URLCONF</span> <span class="o">=</span> <span class="s">&#39;mysite.urls&#39;</span>
</pre></div>
<p>さて、例題を使って練習する時が来ました。 <tt class="docutils literal"><span class="pre">mysite/urls.py</span></tt> を編集して、
以下のような内容にしましょう:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s">r&#39;^polls/$&#39;</span><span class="p">,</span> <span class="s">&#39;mysite.polls.views.index&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="s">&#39;mysite.polls.views.detail&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/results/$&#39;</span><span class="p">,</span> <span class="s">&#39;mysite.polls.views.results&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/vote/$&#39;</span><span class="p">,</span> <span class="s">&#39;mysite.polls.views.vote&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
<p>復習しておきましょう。だれかが Web サイトのあるページ、例えば &quot;/polls/23&quot;
をリクエストすると、 Django は <tt class="docutils literal"><span class="pre">ROOT_URLCONF</span></tt> に書かれているこの Python
モジュールをロードします。Django はモジュール内に <tt class="docutils literal"><span class="pre">urlpatterns</span></tt> という変
数をみつけ、正規表現を順に検査してゆきます。マッチする正規表現が見つかった
(<tt class="docutils literal"><span class="pre">r'^polls/(?P&lt;poll_id&gt;\d+)/$'</span></tt> ですね) ところで、 Django はこの正規表現
に関連づけられている Python パッケージ／モジュールである
<tt class="docutils literal"><span class="pre">mysite.polls.views.detail</span></tt> をロードします。これは
<tt class="docutils literal"><span class="pre">mysite.polls.views.py</span></tt> ファイルに定義されている <tt class="docutils literal"><span class="pre">detail()</span></tt> という関数
に対応します。最後に、 Django は以下のような引数で <tt class="docutils literal"><span class="pre">detail()</span></tt> を呼び出し
ます:</p>
<pre>detail(request=&lt;HttpRequest object&gt;, poll_id='23')</pre>
<p><tt class="docutils literal"><span class="pre">poll_id='23'</span></tt> の部分は、 <tt class="docutils literal"><span class="pre">(?P&lt;poll_id&gt;\d+)</span></tt> からきています。パターンを
丸括弧で囲うと、パターンにマッチしたテキストを「キャプチャ」して、ビュー関
数の引数として送り込みます。 <tt class="docutils literal"><span class="pre">?P&lt;poll_id&gt;</span></tt> はマッチしたパターンを識別する
ための名前をつけています。 <tt class="docutils literal"><span class="pre">\d+</span></tt> は数字の列 (すなわち番号) にマッチする正
規表現です。</p>
<p>URL パターンは正規表現なので、正規表現で実現できる限り無制限の URL を表現で
きます。また、 <tt class="docutils literal"><span class="pre">.php</span></tt> のようなくだらない文字列を URL に追加する必要もあり
ません。ただし、病的なユーモアの持ち主のために、以下のようにすれば実現でき
ることは示しておきましょう:</p>
<div class="highlight"><pre><span class="p">(</span><span class="s">r&#39;^polls/latest\.php$&#39;</span><span class="p">,</span> <span class="s">&#39;mysite.polls.views.index&#39;</span><span class="p">),</span>
</pre></div>
<p>とはいえ、こんな阿呆なことはやめましょう。</p>
<p>これらの正規表現では GET や POST のパラメタ、またドメイン名を検索しないこと
に注意してください。例えば、 <tt class="docutils literal"><span class="pre">http://www.example.com/myapp/</span></tt> というリクエ
ストが来ると、 URLconf は <tt class="docutils literal"><span class="pre">/myapp/</span></tt> を探します。
<tt class="docutils literal"><span class="pre">http://www.example.com/myapp/?page=3</span></tt> の場合にも、 URLconf は
<tt class="docutils literal"><span class="pre">/myapp/</span></tt> を探します。</p>
<p>正規表現をよく理解できないなら、 <a class="reference external" href="http://ja.wikipedia.org/wiki/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE">Wikipedia のエントリ</a> や
<a class="reference external" href="http://www.python.jp/doc/release/lib/module-re.html">Python のドキュメント</a> を参照してください。また、オライリーから出版されて
いる本、「詳説 正規表現」 (Jeffrey Friedl 著、 <strong>訳注: 田和 勝 訳</strong>) に秀逸
な解説があります。</p>
<p>最後に、パフォーマンスについての注意です: 正規表現は URLconf モジュールをロー
ドする時にコンパイルされ、極めて高速に動作します。</p>
</div>
<div class="section" id="s-id2">
<span id="s-write-your-first-view"></span><h2>はじめてのビュー作成<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>さてと、まだビューを作っていませんね。まだ URLconf しかありません。しかし、
まずは Django が URLconf を正しく理解できているか調べておきましょう。</p>
<p>Django 開発サーバを起動してください:</p>
<blockquote>
python manage.py runserver</blockquote>
<p>Web ブラウザで &quot;<a class="reference external" href="http://localhost:8000/polls/">http://localhost:8000/polls/</a>&quot; に行ってみましょう。以下のよ
うなメッセージの入った綺麗に彩られたエラーページが表示されるはずです:</p>
<pre>ViewDoesNotExist at /polls/

Tried index in module mysite.polls.views. Error was: 'module'
object has no attribute 'index'</pre>
<p>このエラーは、まだ <tt class="docutils literal"><span class="pre">index()</span></tt> という関数を <tt class="docutils literal"><span class="pre">mysite/polls/views.py</span></tt> に書
いていないために発生しています。</p>
<p>&quot;/polls/23/&quot; や &quot;/polls/23/results/&quot; 、 &quot;/polls/23/vote/&quot; も試して下さい。
エラーメッセージから、 Django がどのビューを試した (そしてまだビューを書い
ていないので失敗した) かがわかります。</p>
<p>いよいよ最初のビューを書きましょう。 <tt class="docutils literal"><span class="pre">mysite/polls/views.py</span></tt> というファイ
ルを開いて、以下のような Python コードを書いてください:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;Hello, world. You&#39;re at the poll index.&quot;</span><span class="p">)</span>
</pre></div>
<p>最も単純なビューです。ブラウザで &quot;/polls/&quot; にアクセスすると、テキストが表示
されるはずです。</p>
<p>今度は以下のようなビューを追加します。さきほどと少し違って、引数をとります
(この引数には、URLconf の正規表現内でキャプチャされたものが渡されます):</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;You&#39;re looking at poll </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">poll_id</span><span class="p">)</span>
</pre></div>
<p>ブラウザを使って &quot;/polls/34/&quot; を見てください。このビューは URL に指定した
ID を表示します。</p>
</div>
<div class="section" id="s-id3">
<span id="s-write-views-that-actually-do-something"></span><h2>実際に動くビューを作成する<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>各ビューは、リクエストされたページのコンテンツが入った
<a title="django.http.HttpResponse" class="reference external" href="../ref/request-response.html#django.http.HttpResponse"><tt class="xref docutils literal"><span class="pre">HttpResponse</span></tt></a> オブジェクトを返すか、
<tt class="xref docutils literal"><span class="pre">Http404</span></tt> のような例外を送出するかの 2 つの動作のうち、い
ずれかを実行せねばなりません。それ以外の処理は全てユーザにゆだねられていま
す。</p>
<p>ビューはデータベースからレコードを読みだしても、読み出さなくてもかまいませ
ん。 Django のテンプレートシステム (あるいはサードパーティの Python テンプ
レートシステム) を使ってもよいですし、使わなくてもかまいません。 PDF ファイ
ルを生成しても、 XML を出力しても、 ZIP ファイルをオンザフライで生成しても
かまいません。 Python ライブラリを使ってやりたいことを何でも実現できます。</p>
<p>Django にとって必要なのは <a title="django.http.HttpResponse" class="reference external" href="../ref/request-response.html#django.http.HttpResponse"><tt class="xref docutils literal"><span class="pre">HttpResponse</span></tt></a> か、あるいは
例外です。</p>
<p>簡単のため、 <a class="reference external" href="tutorial01.html#intro-tutorial01"><em>チュートリアルその 1</em></a> で解説した
Django のデータベース API を使ってみましょう。 <tt class="docutils literal"><span class="pre">index()</span></tt> ビューを、システ
ム上にある最新の 5 件の質問項目をカンマで区切り、日付順に表示させてみます:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">mysite.polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_poll_list</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">output</span> <span class="o">=</span> <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">question</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">latest_poll_list</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</pre></div>
<p>残念ながらこのコードには問題があります。ページのデザインがビュー中にハード
コードされているのです。これでは、ページの見栄えを変えたくなるたびに Python
コードをいじらねばなりません。というわけで、 Django のテンプレートシステム
を使って、デザインと Python コードを分離しましょう:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">Context</span><span class="p">,</span> <span class="n">loader</span>
<span class="kn">from</span> <span class="nn">mysite.polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_poll_list</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s">&#39;polls/index.html&#39;</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">Context</span><span class="p">({</span>
        <span class="s">&#39;latest_poll_list&#39;</span><span class="p">:</span> <span class="n">latest_poll_list</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
</pre></div>
<p>このコードは &quot;polls/index.html&quot; とい名前のテンプレートをロードし、テンプレー
トにコンテキストを渡します。コンテキストとは、テンプレート変数名を Python
のオブジェクトに対応づけている辞書です。</p>
<p>ページをリロードしましょう。エラーが出るようになったはずです:</p>
<pre>TemplateDoesNotExist at /polls/
polls/index.html</pre>
<p>そうそう、まだテンプレートを作ってませんね。まず、ファイルシステム上の
Django がアクセス出来る場所にディレクトリを作成します (Django はサーバを実
行しているユーザと同じユーザ権限で動作します)。ただし、Web サーバのドキュメ
ントルートには置かないようにしましょう。セキュリティへの配慮として、テンプ
レートを公開するべきではないと思います。次に、 <tt class="docutils literal"><span class="pre">settings.py</span></tt> の
<a class="reference external" href="../ref/settings.html#setting-TEMPLATE_DIRS"><tt class="xref docutils literal"><span class="pre">TEMPLATE_DIRS</span></tt></a> を編集して、どこでテンプレートを探せばよいか
Django に教えます。チュートリアルその 2 の「admin サイトのルック &amp; フィール
をカスタマイズする」でやったのと同じ作業です。</p>
<p>設定がおわったら、テンプレートディレクトリに <tt class="docutils literal"><span class="pre">polls</span></tt> というディレクトリを
作成します。このディレクトリの中に、 <tt class="docutils literal"><span class="pre">index.html</span></tt> という名前のファイルを
作成してください。 <tt class="docutils literal"><span class="pre">loader.get_template('polls/index.html')</span></tt> というコード
は、ファイルシステム上の &quot;[template_directory]/polls/index.html&quot; に対応する
ことに注意して下さい。</p>
<p>テンプレートには以下のようなコードを書きます:</p>
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">latest_poll_list</span> <span class="cp">%}</span>
    <span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">poll</span> <span class="k">in</span> <span class="nv">latest_poll_list</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">poll.question</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    <span class="nt">&lt;p&gt;</span>No polls are available.<span class="nt">&lt;/p&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
<p>ブラウザでページをロードすると、チュートリアル 1 で作った &quot;What's up&quot; とい
う投票項目の入ったブリットリストを表示します。</p>
<div class="section" id="s-render-to-response">
<h3>ショートカット: render_to_response()<a class="headerlink" href="#render-to-response" title="Permalink to this headline">¶</a></h3>
<p>テンプレートをロードしてコンテキストに値を入れ、テンプレートをレンダリング
した結果を <a title="django.http.HttpResponse" class="reference external" href="../ref/request-response.html#django.http.HttpResponse"><tt class="xref docutils literal"><span class="pre">HttpResponse</span></tt></a> オブジェクトで返す、というイ
ディオムは非常によく使われます。 Django はこのイディオムのためのショートカッ
トを提供しています。ショートカットを使って <tt class="docutils literal"><span class="pre">index()</span></tt> ビューを書き換えてみ
ましょう:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span>
<span class="kn">from</span> <span class="nn">mysite.polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_poll_list</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;polls/index.html&#39;</span><span class="p">,</span>
                              <span class="p">{</span><span class="s">&#39;latest_poll_list&#39;</span><span class="p">:</span> <span class="n">latest_poll_list</span><span class="p">})</span>
</pre></div>
<p>この作業によって、 <tt class="xref docutils literal"><span class="pre">loader</span></tt> や
<tt class="xref docutils literal"><span class="pre">Context</span></tt>  、 <a title="django.http.HttpResponse" class="reference external" href="../ref/request-response.html#django.http.HttpResponse"><tt class="xref docutils literal"><span class="pre">HttpResponse</span></tt></a> を
import する必要はなくなりました。</p>
<p><tt class="xref docutils literal"><span class="pre">render_to_response()</span></tt> 関数は第一引数にテンプレートの
名前をとり、オプションの第二引数に辞書をとります。
<tt class="xref docutils literal"><span class="pre">render_to_response()</span></tt> はテンプレートを指定のコンテキ
ストでレンダリングし、 <a title="django.http.HttpResponse" class="reference external" href="../ref/request-response.html#django.http.HttpResponse"><tt class="xref docutils literal"><span class="pre">HttpResponse</span></tt></a> オブジェクトにし
て返します。</p>
</div>
</div>
<div class="section" id="s-id4">
<span id="s-raising-404"></span><h2>404 の送出<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>さて、今度は Poll の詳細ページを片付けましょう。このページは Poll の質問文
(question フィールド) を表示します。ビューは以下のようになります:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">Http404</span>
<span class="c"># ...</span>
<span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Poll</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">Http404</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;polls/detail.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;poll&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">})</span>
</pre></div>
<p>新しい概念がでて来ました。このビューはリクエストした ID を持つ Poll が存在
しないときに <tt class="xref docutils literal"><span class="pre">Http404</span></tt> を送出します。</p>
<div class="section" id="s-get-object-or-404">
<span id="s-a-shortcut-get-object-or-404"></span><h3>ショートカット: get_object_or_404()<a class="headerlink" href="#get-object-or-404" title="Permalink to this headline">¶</a></h3>
<p><tt class="xref docutils literal"><span class="pre">get()</span></tt> を実行し、該当オブジェクトがない場合
には <tt class="xref docutils literal"><span class="pre">Http404</span></tt> を返す、という作業は非常によく使われるイディ
オムです。 Django はこのイディオムのためのショートカットを提供しています。
ショートカットを使って <tt class="docutils literal"><span class="pre">detail()</span></tt> ビューを書き換えてみましょう:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span><span class="p">,</span> <span class="n">get_object_or_404</span>
<span class="c"># ...</span>
<span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Poll</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;polls/detail.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;poll&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">})</span>
</pre></div>
<p><tt class="xref docutils literal"><span class="pre">get_object_or_404()</span></tt> は Django のモデルクラスを第一
引数にとり、任意の個数のキーワード引数をとります。キーワード引数はそのまま
<tt class="xref docutils literal"><span class="pre">get()</span></tt> メソッドに渡ります。オブジェクトが存
在しなければ <tt class="xref docutils literal"><span class="pre">Http404</span></tt> を送出します。</p>
<div class="admonition-philosophy admonition">
<p class="first admonition-title">設計哲学</p>
<p>なぜ <tt class="xref docutils literal"><span class="pre">ObjectDoesNotExist</span></tt> 例外を高水準で自
動的にキャッチせず、ヘルパー関数
<tt class="xref docutils literal"><span class="pre">get_object_or_404()</span></tt> を使うのでしょうか、また、
なぜモデルAPI に <tt class="xref docutils literal"><span class="pre">ObjectDoesNotExist</span></tt> では
なく <tt class="xref docutils literal"><span class="pre">Http404</span></tt> を送出させるのでしょうか？</p>
<p class="last">答えは、「モデルレイヤとビューレイヤをカップリングしてしまうから」です。
Django の最も大きな目標の一つは、ルーズカップリングの維持にあります。</p>
</div>
<p><tt class="xref docutils literal"><span class="pre">get_list_or_404()</span></tt> という関数もあります。この関数は
<tt class="xref docutils literal"><span class="pre">get_object_or_404()</span></tt> と同じように働きますが、
<tt class="xref docutils literal"><span class="pre">get()</span></tt> ではなく
<tt class="xref docutils literal"><span class="pre">filter()</span></tt> を使います。リストが空の場合は
<tt class="xref docutils literal"><span class="pre">Http404</span></tt> を送出します。</p>
</div>
</div>
<div class="section" id="s-id5">
<span id="s-write-a-404-page-not-found-view"></span><h2>404 応答 (ページを見つけられません) 用のビューを作る<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>ビュー内で <tt class="xref docutils literal"><span class="pre">Http404</span></tt> を送出すると、 Django は 404 エラー
処理用の特殊なビューをロードします。このビューは <tt class="docutils literal"><span class="pre">handler404</span></tt> という変数
を参照して見つけます。変数は URLconf のコールバックで使っているのと同じ、
Python のドット表記法で表した関数名の文字列です。 404 ビュー自体に特殊なと
ころはありません。単なる普通のビューです。</p>
<p>普通はわざわざ苦労して 404 ビューを書く必要はありません。デフォルトの
URLconf の設定の一番上には以下のような行があるはずです:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">handler404</span></tt> の設定はこの import で現在のモジュールに取り込まれています。
<tt class="docutils literal"><span class="pre">django/conf/urls/defaults.py</span></tt> を見れば分かりますが、 <tt class="docutils literal"><span class="pre">handler404</span></tt> のデ
フォルト値は <tt class="xref docutils literal"><span class="pre">django.views.defaults.page_not_found()</span></tt> に設定されていま
す。</p>
<p>404 ビューには、あと 3 つ注意すべき点があります:</p>
<ul class="simple">
<li>404 ビューは、 Django が URLconf の全ての正規表現をチェックして、一致
するものがなかった場合にも呼び出されます。</li>
<li>自分で 404 ビューを定義せず、単にデフォルトの設定を使う (そうするよう
勧めます) 場合にも、一つだけやらねばならないことがあります:
<tt class="docutils literal"><span class="pre">404.html</span></tt> テンプレートをテンプレートディレクトリのルートに作成せね
ばなりません。デフォルトの 404 ビューは、このテンプレートを全ての 404
エラー表示に使います。</li>
<li>(設定モジュールで) <a class="reference external" href="../ref/settings.html#setting-DEBUG"><tt class="xref docutils literal"><span class="pre">DEBUG</span></tt></a> を <tt class="xref docutils literal"><span class="pre">True</span></tt> に設定している場合、
Django は 404 ビューを使わず、トレースバックを表示します。</li>
</ul>
</div>
<div class="section" id="s-id6">
<span id="s-write-a-500-server-error-view"></span><h2>500 応答 (サーバエラー) 用のビューを作る<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>404 と同じように、 URLconf で <tt class="docutils literal"><span class="pre">handler500</span></tt> を定義できます。
<tt class="docutils literal"><span class="pre">handler500</span></tt> はサーバエラーが生じたときに呼び出されるビューを指します。サー
バエラーになるのは、ビューコードに実行時エラーが生じた場合です。</p>
</div>
<div class="section" id="s-id7">
<span id="s-use-the-template-system"></span><h2>テンプレートシステムを使う<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">detail()</span></tt> ビューに戻りましょう。コンテキスト変数を <tt class="docutils literal"><span class="pre">poll</span></tt> とすると、
<tt class="docutils literal"><span class="pre">polls/detail.html</span></tt> テンプレートは以下のように書けます:</p>
<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">poll.question</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">choice</span> <span class="k">in</span> <span class="nv">poll.choice_set.all</span> <span class="cp">%}</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">choice.choice</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
<p>テンプレートシステムはドットを使った表記法で変数の属性にアクセスします。
<tt class="docutils literal"><span class="pre">{{</span> <span class="pre">poll.question</span> <span class="pre">}}</span></tt> を例にとると、まず Django は <tt class="docutils literal"><span class="pre">poll</span></tt> オブジェクト
を辞書とみなして <tt class="docutils literal"><span class="pre">question</span></tt> の値を探します。これには失敗するので、今度は
属性として照合を行い、この場合は成功します。仮に属性の照合に失敗すると、
Django は poll オブジェクトの <tt class="docutils literal"><span class="pre">question()</span></tt> というメソッドを呼び出そうとし
ます。</p>
<p>メソッド呼び出しは <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">for</span> <span class="pre">%}</span></tt> ループの中で行われています。
<tt class="docutils literal"><span class="pre">poll.choice_set.all</span></tt> は、 Python のコード <tt class="docutils literal"><span class="pre">poll.choice_set.all()</span></tt> に解
釈されます。その結果、 Choice オブジェクトからなるイテレーション可能オブジェ
クトを返し <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">for</span> <span class="pre">%}</span></tt> タグで使えるようになります。</p>
<p>テンプレートの詳しい動作は <a class="reference external" href="../topics/templates.html#topics-templates"><em>テンプレートガイド</em></a> を
参照してください。</p>
</div>
<div class="section" id="s-urlconf">
<span id="s-simplifying-the-urlconfs"></span><h2>URLconf の単純化<a class="headerlink" href="#urlconf" title="Permalink to this headline">¶</a></h2>
<p>しばらくビューとテンプレートシステムをいじってみてください。 URLconf を編集
していくうちに、実はかなり冗長な部分があることに気づくかもしれません:</p>
<div class="highlight"><pre><span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s">r&#39;^polls/$&#39;</span><span class="p">,</span> <span class="s">&#39;mysite.polls.views.index&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="s">&#39;mysite.polls.views.detail&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/results/$&#39;</span><span class="p">,</span> <span class="s">&#39;mysite.polls.views.results&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/vote/$&#39;</span><span class="p">,</span> <span class="s">&#39;mysite.polls.views.vote&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
<p>明らかに、どのコールバックにも <tt class="docutils literal"><span class="pre">mysite.polls.views</span></tt> が入っています。</p>
<p>これはよくあることなので、 URLconf フレームワークではプレフィクスを共有する
ためのショートカットがあります。共通のプレフィクスを切り出して、以下のよう
に <tt class="xref docutils literal"><span class="pre">patterns()</span></tt> の最初の引数に追加してくださ
い:</p>
<div class="highlight"><pre><span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;mysite.polls.views&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s">r&#39;^polls/$&#39;</span><span class="p">,</span> <span class="s">&#39;index&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="s">&#39;detail&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/results/$&#39;</span><span class="p">,</span> <span class="s">&#39;results&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/vote/$&#39;</span><span class="p">,</span> <span class="s">&#39;vote&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
<p>機能的には前の形式と全く同じです。でもとてもすっきりしましたね。</p>
</div>
<div class="section" id="s-id8">
<span id="s-decoupling-the-urlconfs"></span><h2>URLconf の脱カップリング<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>ところで、すこし時間を割いて polls アプリケーションの URL 設定を Django プ
ロジェクトの設定から切り離しましょう。 Django アプリケーションはプラグ可能、
つまりあれこれ設定しなくても、特定のアプリケーションを別の Django インストー
ルに移動できるようになっています。</p>
<p>今のところ、 <tt class="docutils literal"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">startapp</span></tt> で作成した厳密なディレクトリ構成
のおかげで polls アプリケーションはかなりうまく脱カップリングできていますが、
一点だけ現在の Django の設定とカップリングしている場所があります: それは
URLconf です。</p>
<p>これまでは URL 設定を <tt class="docutils literal"><span class="pre">mysite/urls.py</span></tt> で編集してきましたが、本来アプリケー
ションの URL 設計はアプリケーション固有のものであって、特定の Django インス
トールとは関係のないものです。そこで、 URL 設定をアプリケーションディレクト
リ内にもってきましょう。</p>
<p><tt class="docutils literal"><span class="pre">mysite/urls.py</span></tt> ファイルを <tt class="docutils literal"><span class="pre">mysite/polls/urls.py</span></tt> にコピーしてください。
次に <tt class="docutils literal"><span class="pre">mysite/urls.py</span></tt> から polls に関する URL 設定を全て削除し、以下の
<tt class="xref docutils literal"><span class="pre">include()</span></tt> を一つだけ書きます:</p>
<div class="highlight"><pre><span class="p">(</span><span class="s">r&#39;^polls/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;mysite.polls.urls&#39;</span><span class="p">)),</span>
</pre></div>
<p>簡単に説明すると、 <tt class="xref docutils literal"><span class="pre">include`()</span></tt> は別の
URLconf への参照です。正規表現に <tt class="docutils literal"><span class="pre">$</span></tt> (文字列の末尾にマッチする) が付いて
おらず、代りにスラッシュがついていることに注意してください。 Django は
<tt class="docutils literal"><span class="pre">~django.conf.urls.defaults.include</span></tt> を見つけると、リクエスト URL 中のマッ
チした部分を切り離し、残りの部分を include されている URLconf に送って処理
させます。</p>
<p>従って、このシステムでユーザが &quot;/polls/34/&quot; にアクセスすると、次のように処
理されます:</p>
<ul class="simple">
<li>Django が <tt class="docutils literal"><span class="pre">'^polls/'</span></tt> にマッチすることを発見します。</li>
<li>Django はマッチ部分のテキスト (<tt class="docutils literal"><span class="pre">&quot;polls/&quot;</span></tt>) を取り去り、残りのテキスト
である <tt class="docutils literal"><span class="pre">&quot;34/&quot;</span></tt> を 'mysite.polls.urls' という URLconf に送り、処理させ
ます。</li>
</ul>
<p>これでプロジェクト側の脱カップリングはできました。今度は
'mysite.polls.urls' 側を脱カップリングするために、 URLconf の各行から、
先頭の &quot;polls/&quot; を削除してください:</p>
<div class="highlight"><pre><span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;mysite.polls.views&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="s">&#39;index&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^(?P&lt;poll_id&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="s">&#39;detail&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^(?P&lt;poll_id&gt;\d+)/results/$&#39;</span><span class="p">,</span> <span class="s">&#39;results&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">r&#39;^(?P&lt;poll_id&gt;\d+)/vote/$&#39;</span><span class="p">,</span> <span class="s">&#39;vote&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
<p><tt class="xref docutils literal"><span class="pre">include()</span></tt> と URLconf の脱カップリングの背景には、 URL のプラグ &amp; プ
レイを簡単にしようという発想があります。今や polls は独自の URLconf を持っ
ているので、 &quot;/polls/&quot; や &quot;/fun_polls/&quot;, &quot;/content/polls/&quot; といった、どんな
URL ルート下にも置けて、どこに置いてもきちんと動作します。</p>
<p>polls アプリケーションは絶対 URL ではなく相対 URL だけに注意しているわけで
す。</p>
<p>ビューの作成に慣れたら、 <a class="reference external" href="tutorial04.html#intro-tutorial04"><em>チュートリアルその 4</em></a> に
進んで、簡単なフォーム処理と汎用ビュー (generic view) の使い方を学びましょ
う。</p>
</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference external" href="">はじめての Django アプリ作成、その 3</a><ul>
<li><a class="reference external" href="#id1">ビューの設計哲学</a></li>
<li><a class="reference external" href="#url">URL スキームの設計</a></li>
<li><a class="reference external" href="#id2">はじめてのビュー作成</a></li>
<li><a class="reference external" href="#id3">実際に動くビューを作成する</a><ul>
<li><a class="reference external" href="#render-to-response">ショートカット: render_to_response()</a></li>
</ul>
</li>
<li><a class="reference external" href="#id4">404 の送出</a><ul>
<li><a class="reference external" href="#get-object-or-404">ショートカット: get_object_or_404()</a></li>
</ul>
</li>
<li><a class="reference external" href="#id5">404 応答 (ページを見つけられません) 用のビューを作る</a></li>
<li><a class="reference external" href="#id6">500 応答 (サーバエラー) 用のビューを作る</a></li>
<li><a class="reference external" href="#id7">テンプレートシステムを使う</a></li>
<li><a class="reference external" href="#urlconf">URLconf の単純化</a></li>
<li><a class="reference external" href="#id8">URLconf の脱カップリング</a></li>
</ul>
</li>
</ul>

  <h3>前後のページ</h3>
  <ul>
    
      <li>前: <a href="tutorial02.html">はじめての Django アプリ作成、その 2</a></li>
    
    
      <li>次: <a href="tutorial04.html">はじめての Django アプリ作成、その 4</a></li>
    
  </ul>
  <h3>現在のページ:</h3>
  <ul>
      <li>
        <a href="../index.html">Django v1.0 documentation</a>
        
          <ul><li><a href="index.html">さあ始めましょう</a>
        
        <ul><li>はじめての Django アプリ作成、その 3</li></ul>
        </li></ul>
      </li>
  </ul>  

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/intro/tutorial03.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">Aug 31, 2012</p>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="tutorial02.html" title="はじめての Django アプリ作成、その 2">前へ</a> 
     |
    <a href="index.html" title="さあ始めましょう" accesskey="U">上へ</a>
   |
    <a href="tutorial04.html" title="はじめての Django アプリ作成、その 4">次へ</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>