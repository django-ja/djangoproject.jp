<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Django でのユーザ認証 &mdash; Django v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="contents" title="Global table of contents" href="../contents.html" />
    <link rel="index" title="Global index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Django v1.0 documentation" href="../index.html" />
    <link rel="up" title="Django を使う" href="index.html" />
    <link rel="next" title="Django のキャッシュフレームワーク" href="cache.html" />
    <link rel="prev" title="Djangoアプリケーションのテスト" href="testing.html" />
  </head>
  <body>
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Django v1.0 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">ホーム</a>  |
        <a title="Table of contents" href="../contents.html">目次</a>  |
        <a title="Global index" href="../genindex.html">索引</a>  |
        <a title="Search" href="../modindex.html">モジュール一覧</a>
      </div>
      <div class="nav">
    &laquo; <a href="testing.html" title="Djangoアプリケーションのテスト">前へ</a> 
     |
    <a href="index.html" title="Django を使う" accesskey="U">上へ</a>
   |
    <a href="cache.html" title="Django のキャッシュフレームワーク">次へ</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="topics-auth">
            
  
  <div class="section" id="s-module-django.contrib.auth">
<span id="s-topics-auth"></span><h1>Django でのユーザ認証<a class="headerlink" href="#module-django.contrib.auth" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">revision-up-to:</th><td class="field-body">8961 (1.0)</td>
</tr>
</tbody>
</table>
<p>Django にはユーザ認証システムがついてきます。 Django のユーザ認証システムは、
ユーザアカウント、グループ、パーミッションとクッキーベースのユーザセッショ
ンを扱えます。このドキュメントでは、ユーザ認証の仕組みについて説明します。</p>
<div class="section" id="s-id1">
<h2>概要<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>認証システムは以下の要素から成り立っています:</p>
<ul class="simple">
<li>ユーザ (Users)</li>
<li>パーミッション: あるユーザが特定のタスクを実行してよいかどうかを決め
る、バイナリ (yes/no) のフラグです。</li>
<li>グループ (Groups): 複数のユーザに対してラベル付したり、認証を設定した
りするための一般的な方法です。</li>
<li>メッセージ (Messages): 指定のユーザ(達) に対するメッセージをキューす
るための簡単な方法です。</li>
</ul>
</div>
<div class="section" id="s-id2">
<h2>インストール<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>認証のサポートは Django アプリケーションとして <tt class="docutils literal"><span class="pre">django.contrib.auth</span></tt> にバ
ンドルされています。インストールするには、以下のようにします:</p>
<ol class="arabic simple">
<li><a class="reference external" href="../ref/settings.html#setting-INSTALLED_APPS"><tt class="xref docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> 設定に <tt class="docutils literal"><span class="pre">'django.contrib.auth'</span></tt> を加えま
す。</li>
<li><tt class="docutils literal"><span class="pre">manage.py</span> <span class="pre">syncdb</span></tt> を実行します。</li>
</ol>
<p><tt class="xref docutils literal"><span class="pre">django-admin.py</span> <span class="pre">startproject</span></tt> が生成するデフォルトの
<tt class="docutils literal"><span class="pre">settings.py</span></tt> ファイルの <a class="reference external" href="../ref/settings.html#setting-INSTALLED_APPS"><tt class="xref docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> には、簡便のため
<tt class="docutils literal"><span class="pre">'django.contrib.auth'</span></tt> が最初から入っています。この場合は、単に
<tt class="xref docutils literal"><span class="pre">manage.py</span> <span class="pre">syncdb</span></tt> するだけでかまいません。
<tt class="xref docutils literal"><span class="pre">manage.py</span> <span class="pre">syncdb</span></tt> はその都度必要なものだけをインストールするので、
何度実行してもかまいません。</p>
<p><tt class="xref docutils literal"><span class="pre">syncdb</span></tt> コマンドは必要なデータベーステーブルを作成し、インストー
ル済みのアプリケーションで必要な全てのパーミッションオブジェクトを作成しま
す。また、最初に実行したときには、ユーザにスーパユーザアカウントを作成する
よう促します。</p>
<p>これだけで、認証サポートを使えるようになります。</p>
</div>
<div class="section" id="s-user">
<span id="s-users"></span><h2>ユーザ (User)<a class="headerlink" href="#user" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="django.contrib.auth.models.User">
<!--[django.contrib.auth.models.User]-->class <tt class="descclassname">models.</tt><tt class="descname">User</tt><a class="headerlink" href="#django.contrib.auth.models.User" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<div class="section" id="s-api">
<h3>API リファレンス<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-id3">
<h4>フィールド<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt>
class <tt class="descclassname">models.</tt><tt class="descname">User</tt></dt>
<dd><p><a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> objects have the following fields:</p>
<dl class="attribute">
<dt id="django.contrib.auth.models.User.username">
<!--[django.contrib.auth.models.User.username]--><tt class="descname">username</tt><a class="headerlink" href="#django.contrib.auth.models.User.username" title="Permalink to this definition">¶</a></dt>
<dd>必須です。30 文字以下の文字列で、英数字 (アルファベット、数字、アン
ダースコア) だけを使えます。</dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.User.first_name">
<!--[django.contrib.auth.models.User.first_name]--><tt class="descname">first_name</tt><a class="headerlink" href="#django.contrib.auth.models.User.first_name" title="Permalink to this definition">¶</a></dt>
<dd>オプションです。30 文字以下です。オプションです。30 文字以下です。</dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.User.last_name">
<!--[django.contrib.auth.models.User.last_name]--><tt class="descname">last_name</tt><a class="headerlink" href="#django.contrib.auth.models.User.last_name" title="Permalink to this definition">¶</a></dt>
<dd>オプションです。 30 文字以下です。</dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.User.email">
<!--[django.contrib.auth.models.User.email]--><tt class="descname">email</tt><a class="headerlink" href="#django.contrib.auth.models.User.email" title="Permalink to this definition">¶</a></dt>
<dd>オプションです。 E-mail アドレスです。</dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.User.password">
<!--[django.contrib.auth.models.User.password]--><tt class="descname">password</tt><a class="headerlink" href="#django.contrib.auth.models.User.password" title="Permalink to this definition">¶</a></dt>
<dd>必須です。パスワードのメタデータであるハッシュ値です (Django では生
のパスワードを保存しません)。生のパスワードは任意の長さでよく、どん
な文字が入っていても構いません。詳しくは以下の「パスワード」の節を
参照して下さい。</dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.User.is_staff">
<!--[django.contrib.auth.models.User.is_staff]--><tt class="descname">is_staff</tt><a class="headerlink" href="#django.contrib.auth.models.User.is_staff" title="Permalink to this definition">¶</a></dt>
<dd>Bool 値です。この値が真なら、ユーザは admin サイトにアクセスできま
す。</dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.User.is_active">
<!--[django.contrib.auth.models.User.is_active]--><tt class="descname">is_active</tt><a class="headerlink" href="#django.contrib.auth.models.User.is_active" title="Permalink to this definition">¶</a></dt>
<dd>Bool 値です。この値が真なら、このアカウントを使ってログインできます。
アカウントを削除する代わりに、この値を <tt class="xref docutils literal"><span class="pre">False</span></tt> に設定してください。</dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.User.is_superuser">
<!--[django.contrib.auth.models.User.is_superuser]--><tt class="descname">is_superuser</tt><a class="headerlink" href="#django.contrib.auth.models.User.is_superuser" title="Permalink to this definition">¶</a></dt>
<dd>Bool 値です。この値が真なら、ユーザは明示的な指定がなくても全てのパー
ミッションを得ます。</dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.User.last_login">
<!--[django.contrib.auth.models.User.last_login]--><tt class="descname">last_login</tt><a class="headerlink" href="#django.contrib.auth.models.User.last_login" title="Permalink to this definition">¶</a></dt>
<dd>ユーザが最後にログインした時刻を表す datetime オブジェクトです。デ
フォルトではログイン時現在の日付/時刻になります。</dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.User.date_joined">
<!--[django.contrib.auth.models.User.date_joined]--><tt class="descname">date_joined</tt><a class="headerlink" href="#django.contrib.auth.models.User.date_joined" title="Permalink to this definition">¶</a></dt>
<dd>アカウントの作成された時刻を表す datetime オブジェクトです。デフォ
ルトではアカウント作成時現在の日付/時刻になります。</dd></dl>

</dd></dl>

</div>
<div class="section" id="s-id4">
<h4>メソッド<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt>
class <tt class="descclassname">models.</tt><tt class="descname">User</tt></dt>
<dd><p><a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクトには <tt class="docutils literal"><span class="pre">groups</span></tt>
と <tt class="docutils literal"><span class="pre">user_permissions</span></tt> という二つの多対多のフィールドがあります。この
関係性のために、 <a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクト
は他の <a class="reference external" href="db/models.html#topics-db-models"><em>Django モデル</em></a> と同じようにして、関連づ
けされたオブジェクトにアクセスできます:</p>
<div class="highlight"><pre><span class="n">myuser</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">group_list</span><span class="p">]</span>
<span class="n">myuser</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">myuser</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">myuser</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="n">myuser</span><span class="o">.</span><span class="n">user_permissions</span> <span class="o">=</span> <span class="p">[</span><span class="n">permission_list</span><span class="p">]</span>
<span class="n">myuser</span><span class="o">.</span><span class="n">user_permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permission</span><span class="p">,</span> <span class="n">permission</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">myuser</span><span class="o">.</span><span class="n">user_permissions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">permission</span><span class="p">,</span> <span class="n">permission</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">myuser</span><span class="o">.</span><span class="n">user_permissions</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
<p>自動的に生成されるこれらの API に加え、
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクトには以下のカス
タムメソッドがあります:</p>
<dl class="method">
<dt id="django.contrib.auth.models.User.is_anonymous">
<!--[django.contrib.auth.models.User.is_anonymous]--><tt class="descname">is_anonymous</tt>()<a class="headerlink" href="#django.contrib.auth.models.User.is_anonymous" title="Permalink to this definition">¶</a></dt>
<dd>常に <tt class="xref docutils literal"><span class="pre">False</span></tt> を返します。
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクトを
<a title="django.contrib.auth.models.AnonymousUser" class="reference internal" href="#django.contrib.auth.models.AnonymousUser"><tt class="xref docutils literal"><span class="pre">AnonymousUser</span></tt></a> オブジェクトと
区別する手段の一つです。 通常は、
<tt class="xref docutils literal"><span class="pre">is_authenticated()`()</span></tt> メソッ
ドを使うようにしてください。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.is_authenticated">
<!--[django.contrib.auth.models.User.is_authenticated]--><tt class="descname">is_authenticated</tt>()<a class="headerlink" href="#django.contrib.auth.models.User.is_authenticated" title="Permalink to this definition">¶</a></dt>
<dd>常に <tt class="xref docutils literal"><span class="pre">True</span></tt> を返します。ユーザを認証済みかどうかを調べる一つの方
法です。このメソッドの戻り値は、ユーザが正しいパーミッションを持っ
ているか、あるいはアクティブなユーザであるかどうかに関係なく、ユー
ザが正しいユーザ名とパスワードを入力したことだけを示します。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.get_full_name">
<!--[django.contrib.auth.models.User.get_full_name]--><tt class="descname">get_full_name</tt>()<a class="headerlink" href="#django.contrib.auth.models.User.get_full_name" title="Permalink to this definition">¶</a></dt>
<dd><a title="django.contrib.auth.models.User.first_name" class="reference internal" href="#django.contrib.auth.models.User.first_name"><tt class="xref docutils literal"><span class="pre">first_name</span></tt></a> と
<a title="django.contrib.auth.models.User.last_name" class="reference internal" href="#django.contrib.auth.models.User.last_name"><tt class="xref docutils literal"><span class="pre">last_name</span></tt></a> をスペースでつな
げた文字列を返します。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.set_password">
<!--[django.contrib.auth.models.User.set_password]--><tt class="descname">set_password</tt>(<em>raw_password</em>)<a class="headerlink" href="#django.contrib.auth.models.User.set_password" title="Permalink to this definition">¶</a></dt>
<dd>渡された文字列をハッシュ化し、ユーザのパスワードに設定します。
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクトの保存は行い
ません。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.check_password">
<!--[django.contrib.auth.models.User.check_password]--><tt class="descname">check_password</tt>(<em>raw_password</em>)<a class="headerlink" href="#django.contrib.auth.models.User.check_password" title="Permalink to this definition">¶</a></dt>
<dd>渡された文字列がこのユーザの正しい文字列ならば <tt class="xref docutils literal"><span class="pre">True</span></tt> を返します。
(このメソッドは比較時にパスワードのハッシュ処理を行います)</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.set_unusable_password">
<!--[django.contrib.auth.models.User.set_unusable_password]--><tt class="descname">set_unusable_password</tt>()<a class="headerlink" href="#django.contrib.auth.models.User.set_unusable_password" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>ユーザにパスワード未設定のマークをつけます。パスワード未設定の状態
は、パスワードが空の文字列である状態と区別されます。パスワード未設
定状態のユーザに対して
<a title="django.contrib.auth.models.User.check_password" class="reference internal" href="#django.contrib.auth.models.User.check_password"><tt class="xref docutils literal"><span class="pre">check_password()</span></tt></a> を呼び出
すと、決して <tt class="xref docutils literal"><span class="pre">True</span></tt> を返しません。このメソッドは
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクトを直接保存し
ません。</p>
<p>この機能は、 LDAP ディレクトリのような外部の認証ソースを使ってアプ
リケーションの認証を行いたい場合に必要です。</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.has_usable_password">
<!--[django.contrib.auth.models.User.has_usable_password]--><tt class="descname">has_usable_password</tt>()<a class="headerlink" href="#django.contrib.auth.models.User.has_usable_password" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>ユーザに対して
<a title="django.contrib.auth.models.User.set_unusable_password" class="reference internal" href="#django.contrib.auth.models.User.set_unusable_password"><tt class="xref docutils literal"><span class="pre">set_unusable_password()</span></tt></a> を
呼び出し、パスワードが未設定状態であれば <tt class="xref docutils literal"><span class="pre">False</span></tt> を返します。</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.get_group_permissions">
<!--[django.contrib.auth.models.User.get_group_permissions]--><tt class="descname">get_group_permissions</tt>()<a class="headerlink" href="#django.contrib.auth.models.User.get_group_permissions" title="Permalink to this definition">¶</a></dt>
<dd>ユーザが自分の属するグループから得ているパーミッションを表す文字列
からなるリストを返します。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.get_all_permissions">
<!--[django.contrib.auth.models.User.get_all_permissions]--><tt class="descname">get_all_permissions</tt>()<a class="headerlink" href="#django.contrib.auth.models.User.get_all_permissions" title="Permalink to this definition">¶</a></dt>
<dd>ユーザ自身のもつパーミッションと、ユーザの属するグループのパーミッ
ションの両方からなるリストを返します。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.has_perm">
<!--[django.contrib.auth.models.User.has_perm]--><tt class="descname">has_perm</tt>(<em>perm</em>)<a class="headerlink" href="#django.contrib.auth.models.User.has_perm" title="Permalink to this definition">¶</a></dt>
<dd>ユーザが特定のパーミッションを持っている場合に <tt class="xref docutils literal"><span class="pre">True</span></tt> を返します。
パーミッション名 perm は <tt class="docutils literal"><span class="pre">&quot;package.codename&quot;</span></tt> のような形式で表し
ます。ユーザがアクティブでない場合、このメソッドは常に <tt class="xref docutils literal"><span class="pre">False</span></tt> を
返します。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.has_perms">
<!--[django.contrib.auth.models.User.has_perms]--><tt class="descname">has_perms</tt>(<em>perm_list</em>)<a class="headerlink" href="#django.contrib.auth.models.User.has_perms" title="Permalink to this definition">¶</a></dt>
<dd>ユーザが perm_list 内のパーミッションのいずれかを持っている場合に
<tt class="xref docutils literal"><span class="pre">True</span></tt> を返します。各々のパーミッション名は
<tt class="docutils literal"><span class="pre">&quot;package.codename&quot;</span></tt> のような形式で表します。 ユーザがアクティブ
でない場合、このメソッドは常に <tt class="xref docutils literal"><span class="pre">False</span></tt> を返します。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.has_module_perms">
<!--[django.contrib.auth.models.User.has_module_perms]--><tt class="descname">has_module_perms</tt>(<em>package_name</em>)<a class="headerlink" href="#django.contrib.auth.models.User.has_module_perms" title="Permalink to this definition">¶</a></dt>
<dd>ユーザが指定した名前のパッケージ (アプリケーション) の何らかのパー
ミッションを持っていれば <tt class="xref docutils literal"><span class="pre">True</span></tt> を返します。ユーザがアクティブで
ない場合、このメソッドは常に <tt class="xref docutils literal"><span class="pre">False</span></tt> を返します。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.get_and_delete_messages">
<!--[django.contrib.auth.models.User.get_and_delete_messages]--><tt class="descname">get_and_delete_messages</tt>()<a class="headerlink" href="#django.contrib.auth.models.User.get_and_delete_messages" title="Permalink to this definition">¶</a></dt>
<dd>ユーザのキューに入っている
<tt class="xref docutils literal"><span class="pre">Message</span></tt> オブジェクトを返し、入っ
ていたメッセージをキューから取り除きます。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.email_user">
<!--[django.contrib.auth.models.User.email_user]--><tt class="descname">email_user</tt>(<em>subject</em>, <em>message</em>, <em>from_email=None</em>)<a class="headerlink" href="#django.contrib.auth.models.User.email_user" title="Permalink to this definition">¶</a></dt>
<dd>ユーザにメールを送信します。 <tt class="docutils literal"><span class="pre">from_email</span></tt> が <tt class="xref docutils literal"><span class="pre">None</span></tt> の場合、
Django は <a class="reference external" href="../ref/settings.html#setting-DEFAULT_FROM_EMAIL"><tt class="xref docutils literal"><span class="pre">DEFAULT_FROM_EMAIL</span></tt></a> 設定を使います。</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.User.get_profile">
<!--[django.contrib.auth.models.User.get_profile]--><tt class="descname">get_profile</tt>()<a class="headerlink" href="#django.contrib.auth.models.User.get_profile" title="Permalink to this definition">¶</a></dt>
<dd>ユーザのサイト固有のプロファイル (site-specific profile) を返します。
プロファイルを使えないサイトでは
<tt class="xref docutils literal"><span class="pre">django.contrib.auth.models.SiteProfileNotAvailable</span></tt> を送出し
ます。サイト固有のユーザプロファイルを定義するには、後述の
<a class="reference external" href="#storing-additional-information-about-users">追加のユーザ情報の保存</a> を参照して下さい。</dd></dl>

</dd></dl>

</div>
<div class="section" id="s-id6">
<span id="s-manager-functions"></span><h4>マネジャ関数<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="django.contrib.auth.models.UserManager">
<!--[django.contrib.auth.models.UserManager]-->class <tt class="descclassname">models.</tt><tt class="descname">UserManager</tt><a class="headerlink" href="#django.contrib.auth.models.UserManager" title="Permalink to this definition">¶</a></dt>
<dd><p><a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> モデルには、以下のヘルパ関数
を備えたマネジャがあります。</p>
<dl class="method">
<dt id="django.contrib.auth.models.UserManager.create_user">
<!--[django.contrib.auth.models.UserManager.create_user]--><tt class="descname">create_user</tt>(<em>username</em>, <em>email</em>, <em>password=None</em>)<a class="headerlink" href="#django.contrib.auth.models.UserManager.create_user" title="Permalink to this definition">¶</a></dt>
<dd><p>ユーザを生成して保存し、生成された
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> を返します。
<a title="django.contrib.auth.models.User.username" class="reference internal" href="#django.contrib.auth.models.User.username"><tt class="xref docutils literal"><span class="pre">username</span></tt></a>,
<a title="django.contrib.auth.models.User.email" class="reference internal" href="#django.contrib.auth.models.User.email"><tt class="xref docutils literal"><span class="pre">email</span></tt></a> および
<a title="django.contrib.auth.models.User.password" class="reference internal" href="#django.contrib.auth.models.User.password"><tt class="xref docutils literal"><span class="pre">password</span></tt></a> は指定した値にな
り、 <tt class="docutils literal"><span class="pre">is_active</span></tt> は <tt class="xref docutils literal"><span class="pre">True</span></tt> に設定されます。</p>
<p>パスワードを指定しなかった場合、
<a title="django.contrib.auth.models.User.set_unusable_password" class="reference internal" href="#django.contrib.auth.models.User.set_unusable_password"><tt class="xref docutils literal"><span class="pre">set_unusable_password()</span></tt></a> を
呼び出します。</p>
<p>使い方は <a class="reference internal" href="#id8">ユーザの作成</a> を参照してください。</p>
</dd></dl>

<dl class="method">
<dt id="django.contrib.auth.models.UserManager.make_random_password">
<!--[django.contrib.auth.models.UserManager.make_random_password]--><tt class="descname">make_random_password</tt>(<em>length=10</em>, <em>allowed_chars='abcdefghjkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ23456789'</em>)<a class="headerlink" href="#django.contrib.auth.models.UserManager.make_random_password" title="Permalink to this definition">¶</a></dt>
<dd>指定した長さのランダムなパスワードを生成して返します。パスワードに
使える文字は文字列で指定します。(<tt class="docutils literal"><span class="pre">allowed_chars</span></tt> のデフォルト値は、
ユーザの見間違いを防ぐため <tt class="docutils literal"><span class="pre">i</span></tt>, <tt class="docutils literal"><span class="pre">I</span></tt>, <tt class="docutils literal"><span class="pre">l</span></tt>, <tt class="docutils literal"><span class="pre">o</span></tt>, <tt class="docutils literal"><span class="pre">1</span></tt>, <tt class="docutils literal"><span class="pre">0</span></tt>
を除いてあります。)</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="s-id7">
<span id="s-basic-usage"></span><h3>基本的な使い方<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-id8">
<span id="s-creating-users"></span><span id="s-topics-auth-creating-users"></span><h4>ユーザの作成<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>ユーザを作成する一番基本的な方法は、オブジェクトマネージャの
<a title="django.contrib.auth.models.UserManager.create_user" class="reference internal" href="#django.contrib.auth.models.UserManager.create_user"><tt class="xref docutils literal"><span class="pre">create_user()</span></tt></a>  ヘルパー関数を
使う方法です:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;lennon@thebeatles.com&#39;</span><span class="p">,</span> <span class="s">&#39;johnpassword&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="go"># この操作で、User オブジェクト user を保存できるようになります。</span>
<span class="go"># 他のフィールドを変更したければ、属性を変更します。</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span><span class="o">.</span><span class="n">is_staff</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="s-id9">
<span id="s-changing-passwords"></span><h4>パスワードの変更<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>パスワードの変更には
<a title="django.contrib.auth.models.User.set_password" class="reference internal" href="#django.contrib.auth.models.User.set_password"><tt class="xref docutils literal"><span class="pre">set_password()</span></tt></a> を使います:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username__exact</span><span class="o">=</span><span class="s">&#39;john&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">set_password</span><span class="p">(</span><span class="s">&#39;new password&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
<p>特別な意図のない限り、 <a title="django.contrib.auth.models.User.password" class="reference internal" href="#django.contrib.auth.models.User.password"><tt class="xref docutils literal"><span class="pre">password</span></tt></a>
属性を直接設定しないでください。これについては次節で説明します。</p>
</div>
</div>
<div class="section" id="s-id10">
<span id="s-passwords"></span><h3>パスワード<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p><a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクトの
<a title="django.contrib.auth.models.User.password" class="reference internal" href="#django.contrib.auth.models.User.password"><tt class="xref docutils literal"><span class="pre">password</span></tt></a> フィールドは、以下の形式:</p>
<pre>hashtype$salt$hash</pre>
<p>すなわちハッシュ方式 (hashtype)、ハッシュソルト (salt)、そしてハッシュ値
(hash) をドル記号 (<tt class="docutils literal"><span class="pre">&quot;$&quot;</span></tt>) で分割した文字列形式をとります。</p>
<p>ハッシュ形式は <tt class="docutils literal"><span class="pre">sha1</span></tt> (デフォルト) または <tt class="docutils literal"><span class="pre">md5</span></tt> 、 <tt class="docutils literal"><span class="pre">crypt</span></tt> のいずれか
で、それぞれパスワードの一方向ハッシュ化アルゴリズムを表します。 salt は生
のパスワード文字列からハッシュを生成するときに味付け (salt) しておくための
ランダムな文字列です。 <tt class="docutils literal"><span class="pre">crypt</span></tt> のサポートは、 Python の標準モジュール
<tt class="docutils literal"><span class="pre">crypt</span></tt> がサポートされている環境だけで有効です。また、 <tt class="docutils literal"><span class="pre">crypt</span></tt> のサポー
トは開発版の Django でのみ利用できます。</p>
<p>例えば:</p>
<pre>sha1$a1976$a36cc8cbf81742a8fb52e221aaeab48ed7f58ab4</pre>
<p><tt class="docutils literal"><span class="pre">User.set_password()</span></tt> および <tt class="docutils literal"><span class="pre">User.check_password()</span></tt>
<a title="django.contrib.auth.models.User.set_password" class="reference internal" href="#django.contrib.auth.models.User.set_password"><tt class="xref docutils literal"><span class="pre">set_password()</span></tt></a> および関数は、これら
の値の設定やチェックを背後で行っています。</p>
<p>バージョン 0.90 のような以前の Django では、パスワードソルトなしの単純な
MD5 ハッシュを使っていました。この形式は、以前のバージョンとの互換性を持た
せるためにまだサポートしています。ただし、古いパスワードのユーザに対する
<a title="django.contrib.auth.models.User.check_password" class="reference internal" href="#django.contrib.auth.models.User.check_password"><tt class="xref docutils literal"><span class="pre">check_password()</span></tt></a> が成功すると、パ
スワードは自動的に新しい形式に変換されます。</p>
</div>
<div class="section" id="s-id11">
<span id="s-anonymous-users"></span><h3>匿名ユーザ (Anonymous users)<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.contrib.auth.models.AnonymousUser">
<!--[django.contrib.auth.models.AnonymousUser]-->class <tt class="descclassname">models.</tt><tt class="descname">AnonymousUser</tt><a class="headerlink" href="#django.contrib.auth.models.AnonymousUser" title="Permalink to this definition">¶</a></dt>
<dd><p><a title="django.contrib.auth.models.AnonymousUser" class="reference internal" href="#django.contrib.auth.models.AnonymousUser"><tt class="xref docutils literal"><span class="pre">django.contrib.auth.models.AnonymousUser</span></tt></a>  は
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">django.contrib.auth.models.User</span></tt></a> と同じインタフェースを実装した
クラスですが、以下の点で <a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> と異
なります:</p>
<ul class="simple">
<li><tt class="xref docutils literal"><span class="pre">id</span></tt> は常に <tt class="xref docutils literal"><span class="pre">None</span></tt> です。</li>
<li><a title="django.contrib.auth.models.User.is_staff" class="reference internal" href="#django.contrib.auth.models.User.is_staff"><tt class="xref docutils literal"><span class="pre">is_staff</span></tt></a> および
<a title="django.contrib.auth.models.User.is_superuser" class="reference internal" href="#django.contrib.auth.models.User.is_superuser"><tt class="xref docutils literal"><span class="pre">is_superuser</span></tt></a> は常に
<tt class="xref docutils literal"><span class="pre">False</span></tt> です。</li>
<li><a title="django.contrib.auth.models.User.is_active" class="reference internal" href="#django.contrib.auth.models.User.is_active"><tt class="xref docutils literal"><span class="pre">is_active</span></tt></a> は常に <tt class="xref docutils literal"><span class="pre">False</span></tt>
です。</li>
<li><tt class="xref docutils literal"><span class="pre">groups</span></tt> および
<tt class="xref docutils literal"><span class="pre">user_permissions</span></tt> は常に空で
す。</li>
<li><a title="django.contrib.auth.models.User.is_anonymous" class="reference internal" href="#django.contrib.auth.models.User.is_anonymous"><tt class="xref docutils literal"><span class="pre">is_anonymous()</span></tt></a> は <tt class="xref docutils literal"><span class="pre">False</span></tt>
でなく <tt class="xref docutils literal"><span class="pre">True</span></tt> を返します。</li>
<li><a title="django.contrib.auth.models.User.is_authenticated" class="reference internal" href="#django.contrib.auth.models.User.is_authenticated"><tt class="xref docutils literal"><span class="pre">is_authenticated()</span></tt></a> は
<tt class="xref docutils literal"><span class="pre">True</span></tt> でなく <tt class="xref docutils literal"><span class="pre">False</span></tt> を返します。</li>
<li><a title="django.contrib.auth.models.User.has_perm" class="reference internal" href="#django.contrib.auth.models.User.has_perm"><tt class="xref docutils literal"><span class="pre">has_perm()</span></tt></a> は常に <tt class="xref docutils literal"><span class="pre">False</span></tt>
を返します。</li>
<li><a title="django.contrib.auth.models.User.set_password" class="reference internal" href="#django.contrib.auth.models.User.set_password"><tt class="xref docutils literal"><span class="pre">set_password()</span></tt></a>,
<a title="django.contrib.auth.models.User.check_password" class="reference internal" href="#django.contrib.auth.models.User.check_password"><tt class="xref docutils literal"><span class="pre">check_password()</span></tt></a>,
<tt class="xref docutils literal"><span class="pre">save()</span></tt>,
<tt class="xref docutils literal"><span class="pre">delete()</span></tt>,
<tt class="xref docutils literal"><span class="pre">set_groups()</span></tt> および
<tt class="xref docutils literal"><span class="pre">set_permissions()</span></tt> は
<tt class="xref docutils literal"><span class="pre">NotImplementedError</span></tt> を送出します。</li>
</ul>
</dd></dl>

<p>おそらく、実践上意識して <a title="django.contrib.auth.models.AnonymousUser" class="reference internal" href="#django.contrib.auth.models.AnonymousUser"><tt class="xref docutils literal"><span class="pre">AnonymousUser</span></tt></a>
オブジェクトを使う必要はないはずです。とはいえ、匿名ユーザは次節で述べるよ
うな形で Web リクエストで使われています。</p>
</div>
<div class="section" id="s-id12">
<span id="s-creating-superusers"></span><h3>スーパユーザの作成<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました:</span> <tt class="docutils literal"><span class="pre">manage.py</span> <span class="pre">createsuperuser</span></tt> コマンドが追加されました。</div>
<p><a class="reference external" href="../ref/settings.html#setting-INSTALLED_APPS"><tt class="xref docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> に <tt class="docutils literal"><span class="pre">'django.contrib.auth'</span></tt> を追加した直後に
<tt class="xref docutils literal"><span class="pre">manage.py</span> <span class="pre">syncdb</span></tt> を実行すると、スーパユーザの作成を促す
プロンプトを表示します。後でスーパユーザを作成したい場合には、以下のように
コマンドラインユーティリティを使います。</p>
<blockquote>
manage.py createsuperuser --username=joe <a class="reference external" href="mailto:--email=joe&#37;&#52;&#48;example&#46;com">--email=joe<span>&#64;</span>example<span>&#46;</span>com</a></blockquote>
<p>ユーティリティはパスワードの入力を促します。入力すると、ユーザは即座に作成
されます。 <tt class="xref docutils literal"><span class="pre">--username</span></tt> や <tt class="xref docutils literal"><span class="pre">--email</span></tt> オプションを省
略すると、ユーティリティはそれらの値を入力するよう促します。</p>
<p>古い Django も使っている場合、以前からあるコマンドラインのスーパユーザ作成
方法も使えます:</p>
<div class="highlight"><pre><span class="n">python</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">django</span><span class="o">/</span><span class="n">contrib</span><span class="o">/</span><span class="n">auth</span><span class="o">/</span><span class="n">create_superuser</span><span class="o">.</span><span class="n">py</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">/path/to/</span></tt> は自分のシステムの Django コードベースへのパスに応じて読
み変えて下さい。 <tt class="docutils literal"><span class="pre">manage.py</span></tt> は自動的に正しいパスと環境変数を決定するので、
<tt class="docutils literal"><span class="pre">manage.py</span></tt> を使うよう推奨します。</p>
</div>
<div class="section" id="s-id13">
<span id="s-storing-additional-information-about-users"></span><span id="s-auth-profiles"></span><h3>追加のユーザ情報の保存<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>ユーザに追加の情報をひもづけて保存したい場合のために、 Django ではサイトご
とにユーザに関連付けられた「ユーザプロファイル」を取り出すためのメソッドを
提供しています。</p>
<p>ユーザプロファイルを利用するには、まず、ユーザにひもづけて保存したい情報を
入れるためのフィールドや持たせたいメソッド、そして
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> モデルへの
<tt class="xref docutils literal"><span class="pre">ForeignKey</span></tt> を持ったモデルを定義します。
<tt class="xref docutils literal"><span class="pre">ForeignKey</span></tt> には <tt class="docutils literal"><span class="pre">unique=True</span></tt> をセットし、
ユーザごとにモデルが一つだけ生成されるようにします。</p>
<p>このモデルをあるサイトのユーザプロファイルモデルにするには、
<a class="reference external" href="../ref/settings.html#setting-AUTH_PROFILE_MODULE"><tt class="xref docutils literal"><span class="pre">AUTH_PROFILE_MODULE</span></tt></a> に以下の内容をドット区切りの文字列で指定しま
す:</p>
<ol class="arabic simple">
<li>ユーザプロファイルモデルを定義している (小文字に変換した) アプリケーショ
ン名 (別の言い方をするなら、 <tt class="xref docutils literal"><span class="pre">manage.py</span> <span class="pre">startapp</span></tt> で
アプリケーションを作成するときに指定する名前を全て小文字にしたもの)。</li>
<li>(小文字に変換した) モデルクラス名</li>
</ol>
<p>例えば、プロファイルモデルが <tt class="docutils literal"><span class="pre">UserProfile</span></tt> という名前のクラスで、
<tt class="docutils literal"><span class="pre">accounts</span></tt> というアプリケーションで定義されているなら、設定値は以下のよう
になるでしょう:</p>
<div class="highlight"><pre><span class="n">AUTH_PROFILE_MODULE</span> <span class="o">=</span> <span class="s">&#39;accounts.userprofile&#39;</span>
</pre></div>
<p>上記の方法でユーザプロファイルモデルを定義して指定すると、ユーザオブジェ
クトには <a title="django.contrib.auth.models.User.get_profile" class="reference internal" href="#django.contrib.auth.models.User.get_profile"><tt class="xref docutils literal"><span class="pre">get_profile()</span></tt></a> というメソッ
ドが付加されます。このメソッドは、ユーザに関連付けられているプロファイルモ
デルのインスタンスを返します。</p>
<p>さらに詳しい情報は、 <a class="reference external" href="http://www.djangobook.com/en/1.0/chapter12/#cn222">Django book の 12 章</a> を参照してください。</p>
</div>
</div>
<div class="section" id="s-web">
<span id="s-authentication-in-web-requests"></span><span id="s-topics-http-auth"></span><h2>Web リクエストに対する認証<a class="headerlink" href="#web" title="Permalink to this headline">¶</a></h2>
<p>ここまでのドキュメントは、認証関連のオブジェクトを操作するための低水準の
API について扱ってきました。より高水準の API では、 Django はこれらの認証フ
レームワークを <a title="django.http.HttpRequest" class="reference external" href="../ref/request-response.html#django.http.HttpRequest"><tt class="xref docutils literal"><span class="pre">リクエストオブジェクト</span></tt></a> シ
ステム内にフックできます。</p>
<p>まず、 <tt class="xref docutils literal"><span class="pre">SessionMiddleware</span></tt> およ
び <tt class="xref docutils literal"><span class="pre">AuthenticationMiddleware</span></tt> を
<a class="reference external" href="../ref/settings.html#setting-MIDDLEWARE_CLASSES"><tt class="xref docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt></a> 設定に追加して、これらのミドルウェアをインス
トールします。詳しくは
<a class="reference external" href="http/sessions.html#topics-http-sessions"><em>セッションのドキュメント</em></a> を参照してください。</p>
<p>ミドルウェアをインストールしたら、ビューから
<a title="django.http.HttpRequest.user" class="reference external" href="../ref/request-response.html#django.http.HttpRequest.user"><tt class="xref docutils literal"><span class="pre">request.user</span></tt></a> にアクセスできるように
なります。 <a title="django.http.HttpRequest.user" class="reference external" href="../ref/request-response.html#django.http.HttpRequest.user"><tt class="xref docutils literal"><span class="pre">request.user</span></tt></a> は現在ログイ
ンしているユーザの <a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクトを
表します。ユーザがログインしていなければ、
<a title="django.http.HttpRequest.user" class="reference external" href="../ref/request-response.html#django.http.HttpRequest.user"><tt class="xref docutils literal"><span class="pre">request.user</span></tt></a> は
<a title="django.contrib.auth.models.AnonymousUser" class="reference internal" href="#django.contrib.auth.models.AnonymousUser"><tt class="xref docutils literal"><span class="pre">AnonymousUser</span></tt></a> のインスタンスになります
(前節を参照してください)。ログインユーザと匿名ユーザは、
<a title="django.contrib.auth.models.User.is_authenticated" class="reference internal" href="#django.contrib.auth.models.User.is_authenticated"><tt class="xref docutils literal"><span class="pre">is_authenticated()</span></tt></a> で以下のように
区別できます:</p>
<pre>if request.user.is_authenticated():
    # Do something for authenticated users.
else:
    # Do something for anonymous users.</pre>
<div class="section" id="s-id14">
<span id="s-how-to-log-a-user-in"></span><h3>ユーザをログインさせる<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>Django では、 <tt class="xref docutils literal"><span class="pre">django.contrib.auth</span></tt> の中で、
<a title="django.contrib.auth.authenticate" class="reference internal" href="#django.contrib.auth.authenticate"><tt class="xref docutils literal"><span class="pre">authenticate()</span></tt></a> と
<a title="django.contrib.auth.login" class="reference internal" href="#django.contrib.auth.login"><tt class="xref docutils literal"><span class="pre">login()</span></tt></a> という二つの関数を提供しています。</p>
<dl class="function">
<dt id="django.contrib.auth.authenticate">
<!--[django.contrib.auth.authenticate]--><tt class="descname">authenticate</tt>()<a class="headerlink" href="#django.contrib.auth.authenticate" title="Permalink to this definition">¶</a></dt>
<dd><p>あるユーザ名とパスワードに対する認証を行うには、
<a title="django.contrib.auth.authenticate" class="reference internal" href="#django.contrib.auth.authenticate"><tt class="xref docutils literal"><span class="pre">authenticate()</span></tt></a> を使ってください。この関数
は二つのキーワード引数、 <tt class="docutils literal"><span class="pre">username</span></tt> と <tt class="docutils literal"><span class="pre">password</span></tt> をとり、ユーザ名
に対してパスワードが有効であった場合に
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクトを返します。パス
ワードが無効だった場合には、
<a title="django.contrib.auth.authenticate" class="reference internal" href="#django.contrib.auth.authenticate"><tt class="xref docutils literal"><span class="pre">authenticate()</span></tt></a> は <tt class="xref docutils literal"><span class="pre">None</span></tt> を返します。例
えば:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">authenticate</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">authenticate</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">&#39;secret&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;You provided a correct username and password!&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Your account has been disabled!&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Your username and password were incorrect.&quot;</span>
</pre></div>
</dd></dl>

<dl class="function">
<dt id="django.contrib.auth.login">
<!--[django.contrib.auth.login]--><tt class="descname">login</tt>()<a class="headerlink" href="#django.contrib.auth.login" title="Permalink to this definition">¶</a></dt>
<dd><p>ユーザをログインさせるには、ビューの中で
<a title="django.contrib.auth.login" class="reference internal" href="#django.contrib.auth.login"><tt class="xref docutils literal"><span class="pre">login()</span></tt></a> を使ってください。この関数は
<a title="django.http.HttpRequest" class="reference external" href="../ref/request-response.html#django.http.HttpRequest"><tt class="xref docutils literal"><span class="pre">HttpRequest</span></tt></a> オブジェクトと
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクトを引数にとります。
<a title="django.contrib.auth.login" class="reference internal" href="#django.contrib.auth.login"><tt class="xref docutils literal"><span class="pre">login()</span></tt></a> は Django のセッションフレームワー
クを使って、ユーザの ID をセッションに保存します。従って、上でも述べた
ように、セッションミドルウェアをインストールしておかねばなりません。</p>
<p>以下の例は <a title="django.contrib.auth.authenticate" class="reference internal" href="#django.contrib.auth.authenticate"><tt class="xref docutils literal"><span class="pre">authenticate()</span></tt></a> と
<a title="django.contrib.auth.login" class="reference internal" href="#django.contrib.auth.login"><tt class="xref docutils literal"><span class="pre">login()</span></tt></a> の使い方を示しています:</p>
<pre>from django.contrib.auth import authenticate, login

def my_view(request):
    username = request.POST['username']
    password = request.POST['password']
    user = authenticate(username=username, password=password)
    if user is not None:
        if user.is_active:
            login(request, user)
            # Redirect to a success page.
        else:
            # Return a 'disabled account' error message
    else:
        # Return an 'invalid login' error message.</pre>
</dd></dl>

<div class="admonition-authenticate admonition">
<p class="first admonition-title"><tt class="docutils literal"><span class="pre">authenticate()</span></tt> は最初に呼び出してください</p>
<p class="last">ユーザを手動でログインさせる場合、 <a title="django.contrib.auth.login" class="reference internal" href="#django.contrib.auth.login"><tt class="xref docutils literal"><span class="pre">login()</span></tt></a>
を呼び出す前に <em>必ず</em>  <a title="django.contrib.auth.authenticate" class="reference internal" href="#django.contrib.auth.authenticate"><tt class="xref docutils literal"><span class="pre">authenticate()</span></tt></a>
を呼び出してください。 <a title="django.contrib.auth.authenticate" class="reference internal" href="#django.contrib.auth.authenticate"><tt class="xref docutils literal"><span class="pre">authenticate()</span></tt></a> は、
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> オブジェクトに、そのユーザが
認証バックエンドによって正しく認証されたことを示す属性を付加します。
(詳しくは <a class="reference external" href="#other-authentication-sources">認証バックエンドのドキュメント</a> を参照してください)
この情報が後でログインの処理で必要だからです。</p>
</div>
</div>
<div class="section" id="s-id16">
<span id="s-manually-checking-a-user-s-password"></span><h3>ユーザのパスワードを手動で調べる<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="django.contrib.auth.check_password">
<!--[django.contrib.auth.check_password]--><tt class="descname">check_password</tt>()<a class="headerlink" href="#django.contrib.auth.check_password" title="Permalink to this definition">¶</a></dt>
<dd>ユーザ認証を手動で行うために平文パスワードとデータベース上のハッシュ化
パスワードを比較したい場合には、
<tt class="xref docutils literal"><span class="pre">django.contrib.auth.models.check_password()</span></tt>
という便宜関数を使えます。この関数は、調べたい平文パスワードと、比較対
象のデータベースに格納されているユーザの <tt class="docutils literal"><span class="pre">password</span></tt> フィールド全体の
二つの引数をとり、二つが一致すれば <tt class="xref docutils literal"><span class="pre">True</span></tt> を、そうでなければ
<tt class="xref docutils literal"><span class="pre">False</span></tt> を返します。</dd></dl>

</div>
<div class="section" id="s-id17">
<span id="s-how-to-log-a-user-out"></span><h3>ユーザをログアウトさせる<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="django.contrib.auth.logout">
<!--[django.contrib.auth.logout]--><tt class="descname">logout</tt>()<a class="headerlink" href="#django.contrib.auth.logout" title="Permalink to this definition">¶</a></dt>
<dd><p><a title="django.contrib.auth.login" class="reference internal" href="#django.contrib.auth.login"><tt class="xref docutils literal"><span class="pre">django.contrib.auth.login()</span></tt></a> でログインしたユーザをログアウトさ
せるには、ビューの中で
<a title="django.contrib.auth.logout" class="reference internal" href="#django.contrib.auth.logout"><tt class="xref docutils literal"><span class="pre">django.contrib.auth.logout()</span></tt></a> を使ってください。この関数は、
<a title="django.http.HttpRequest" class="reference external" href="../ref/request-response.html#django.http.HttpRequest"><tt class="xref docutils literal"><span class="pre">HttpRequest</span></tt></a> オブジェクトを引数に取り、戻り値を持
ちません。例を以下に示します:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">logout</span>

<span class="k">def</span> <span class="nf">logout_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">logout</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c"># Redirect to a success page.</span>
</pre></div>
<p>ユーザがログインしていなくても <a title="django.contrib.auth.logout" class="reference internal" href="#django.contrib.auth.logout"><tt class="xref docutils literal"><span class="pre">logout()</span></tt></a> は
エラーを送出しないことに注意してください。</p>
<div class="versionchanged">
<span class="title">Django 1.0 で変更されました:</span> <tt class="docutils literal"><span class="pre">logout()</span></tt> を呼び出すとセッションデータを消去するようになりました。</div>
<p><a title="django.contrib.auth.logout" class="reference internal" href="#django.contrib.auth.logout"><tt class="xref docutils literal"><span class="pre">logout()</span></tt></a> を呼び出すと、現在のリクエストに
結び付いたセッションデータを全て抹消します。その時に記憶されていたデー
タは全て除去されます。これは、他のユーザが同じブラウザを使ってログイン
し、直前にブラウザを使っていたユーザのセッションデータを読み出したりで
きないようにするためです。ユーザのログアウト後に何らかのセッションデー
タを記憶させたければ、 <a title="django.contrib.auth.logout" class="reference internal" href="#django.contrib.auth.logout"><tt class="xref docutils literal"><span class="pre">django.contrib.auth.logout()</span></tt></a> の <em>後で</em>
行ってください。</p>
</dd></dl>

</div>
<div class="section" id="s-id18">
<span id="s-limiting-access-to-logged-in-users"></span><h3>ログインユーザだけがアクセスできるように制限をかける<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-id19">
<span id="s-the-raw-way"></span><h4>生真面目な方法<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<p>ページへのアクセスを制限する単純で生真面目な方法は、
<a title="django.contrib.auth.models.User.is_authenticated" class="reference internal" href="#django.contrib.auth.models.User.is_authenticated"><tt class="xref docutils literal"><span class="pre">request.user.is_authenticated()</span></tt></a>
をチェックして、ログインページにリダイレクトするというものです:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponseRedirect</span>

<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="s">&#39;/login/?next=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
    <span class="c"># ...</span>
</pre></div>
<p>...あるいは、エラーメッセージを出しても構いません:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;myapp/login_error.html&#39;</span><span class="p">)</span>
    <span class="c"># ...</span>
</pre></div>
</div>
<div class="section" id="s-login-required">
<span id="s-the-login-required-decorator"></span><h4>login_required デコレータ<a class="headerlink" href="#login-required" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="django.contrib.auth.decorators.login_required">
<!--[django.contrib.auth.decorators.login_required]--><tt class="descclassname">decorators.</tt><tt class="descname">login_required</tt>()<a class="headerlink" href="#django.contrib.auth.decorators.login_required" title="Permalink to this definition">¶</a></dt>
<dd><p>手間を省くために、
<a title="django.contrib.auth.decorators.login_required" class="reference internal" href="#django.contrib.auth.decorators.login_required"><tt class="xref docutils literal"><span class="pre">login_required()</span></tt></a> デコレータを使え
ます:</p>
<pre>from django.contrib.auth.decorators import login_required

def my_view(request):
    # ...
my_view = login_required(my_view)</pre>
<p>Python 2.4 で登場したよりコンパクトなデコレータ構文を使った例を以下に示
します:</p>
<pre>from django.contrib.auth.decorators import login_required

@login_required
def my_view(request):
    # ...</pre>
<div class="versionchanged">
<span class="title">Django ``redirect_field_name`` で変更されました:</span> パラメタが追加されました。</div>
<p><a title="django.contrib.auth.decorators.login_required" class="reference internal" href="#django.contrib.auth.decorators.login_required"><tt class="xref docutils literal"><span class="pre">login_required()</span></tt></a> はオプションの
<tt class="docutils literal"><span class="pre">redirect_field_name</span></tt> パラメタをとります。例えば:</p>
<pre>from django.contrib.auth.decorators import login_required

def my_view(request):
    # ...
my_view = login_required(redirect_field_name='redirect_to')(my_view)</pre>
<p>同様に、 Python 2.4 で登場したよりコンパクトなデコレータ構文を使った例
を以下に示します:</p>
<pre>from django.contrib.auth.decorators import login_required

@login_required(redirect_field_name='redirect_to')
def my_view(request):
    # ...</pre>
<p><a title="django.contrib.auth.decorators.login_required" class="reference internal" href="#django.contrib.auth.decorators.login_required"><tt class="xref docutils literal"><span class="pre">login_required()</span></tt></a> が行うのは以下の
ような処理です:</p>
<ul class="simple">
<li>ユーザがログインしていなければ、
<a class="reference external" href="../ref/settings.html#setting-LOGIN_URL"><tt class="xref docutils literal"><span class="pre">settings.LOGIN_URL</span></tt></a> に指定した値 (デフォル
トでは <tt class="docutils literal"><span class="pre">/accounts/login/</span></tt>) にリダイレクトします。このとき、現在
のクエリの絶対 URL を <tt class="docutils literal"><span class="pre">next</span></tt> または <tt class="docutils literal"><span class="pre">redirect_field_name</span></tt> に
指定したパラメタの値に設定します。 URL は例えば
<tt class="docutils literal"><span class="pre">/accounts/login/?next=/polls/3/</span></tt> のようになります。</li>
<li>ユーザがログインしていれば、 ビューを普通に実行します。ビューコー
ドの中では、ユーザがログインしているものとみなして構いません。</li>
</ul>
</dd></dl>

<p>ただし、これを行うには <a class="reference external" href="../ref/settings.html#setting-LOGIN_URL"><tt class="xref docutils literal"><span class="pre">settings.LOGIN_URL</span></tt></a> に適切な
Django のビュー関数を対応づけておかねばなりません。例えば URLconf に以下の
ような行を設定します:</p>
<div class="highlight"><pre><span class="p">(</span><span class="s">r&#39;^accounts/login/$&#39;</span><span class="p">,</span> <span class="s">&#39;django.contrib.auth.views.login&#39;</span><span class="p">),</span>
</pre></div>
<dl class="function">
<dt id="django.contrib.auth.views.login">
<!--[django.contrib.auth.views.login]--><tt class="descclassname">views.</tt><tt class="descname">login</tt>()<a class="headerlink" href="#django.contrib.auth.views.login" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="docutils literal"><span class="pre">django.contrib.auth.views.login</span></tt> は以下のような処理を行います:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">GET</span></tt> で呼び出されると、同じ URL に対して POST を行うためのログ
インフォームを表示します。これについては後でもう少し説明します。</li>
<li><tt class="docutils literal"><span class="pre">POST</span></tt> で呼び出されると、ユーザのログイン処理を試みます。ログイ
ンに成功すると、ビューは <tt class="docutils literal"><span class="pre">next</span></tt> に示された URL にリダイレクトし
ます。 <tt class="docutils literal"><span class="pre">next</span></tt> を指定しない場合、
<a class="reference external" href="../ref/settings.html#setting-LOGIN_REDIRECT_URL"><tt class="xref docutils literal"><span class="pre">settings.LOGIN_REDIRECT_URL</span></tt></a>
(デフォルト値は <tt class="docutils literal"><span class="pre">/accounts/profile/</span></tt>) にリダイレクトします。ロ
グインに失敗すると、ログインフォームを再度表示します。</li>
</ul>
<p>開発者は <tt class="docutils literal"><span class="pre">registration/login.html</span></tt> という名前のテンプレート上でログイ
ンフォームを提供せねばなりません。 Django はこのテンプレートに、以下の
3 つのテンプレートコンテキスト変数を渡します:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">form</span></tt>: ログインフォームを表現する <tt class="xref docutils literal"><span class="pre">Form</span></tt>
オブジェクトです。 <tt class="xref docutils literal"><span class="pre">Form</span></tt> オブジェクトの詳細
は <a class="reference external" href="forms/index.html#topics-forms-index"><em>forms のドキュメント</em></a> を参照してく
ださい。</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">next</span></tt>: ログイン成功後にリダイレクトされる先の URL です。 URL
にはクエリ文字列を含めてかまいません。</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">site_name</span></tt>: <a class="reference external" href="../ref/settings.html#setting-SITE_ID"><tt class="xref docutils literal"><span class="pre">SITE_ID</span></tt></a> によって決定される現在の
<tt class="xref docutils literal"><span class="pre">Site`</span></tt> の名前です。</p>
<div class="versionchanged">
<span class="title">Django 1.0 で変更されました:</span> sites フレームワークを組み込んでいないときの値は
<tt class="docutils literal"><span class="pre">request.META['SERVER_NAME']</span></tt> の値に設定されます。
site フレームワークの詳細は <a class="reference external" href="../ref/contrib/sites.html#ref-contrib-sites"><em>&quot;sites&quot; フレームワーク</em></a> を参照し
てください。</div>
</li>
</ul>
<p><tt class="docutils literal"><span class="pre">registration/login.html</span></tt> テンプレートを呼び出したくないのなら、
URLconf を通じて外部パラメタ <tt class="docutils literal"><span class="pre">template_name</span></tt> をビューに渡してください。
例えば、 <tt class="docutils literal"><span class="pre">myapp/login.html</span></tt> を使いたければ、URLconf の行は以下の
ようになります:</p>
<div class="highlight"><pre><span class="p">(</span><span class="s">r&#39;^accounts/login/$&#39;</span><span class="p">,</span> <span class="s">&#39;django.contrib.auth.views.login&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;template_name&#39;</span><span class="p">:</span> <span class="s">&#39;myapp/login.html&#39;</span><span class="p">}),</span>
</pre></div>
<p>編集の雛型にできるような <tt class="docutils literal"><span class="pre">registration/login.html</span></tt> テンプレートの
例を以下に示します。このテンプレートは、 <tt class="docutils literal"><span class="pre">content</span></tt> ブロックの定義された
<tt class="docutils literal"><span class="pre">base.html</span></tt> があるという前提で書かれています:</p>
<pre>{% extends "base.html" %}

{% block content %}

{% if form.errors %}
&lt;p&gt;Your username and password didn't match. Please try again.&lt;/p&gt;
{% endif %}

&lt;form method="post" action="."&gt;
&lt;table&gt;
&lt;tr&gt;&lt;td&gt;{{ form.username.label_tag }}&lt;/td&gt;&lt;td&gt;{{ form.username }}&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;{{ form.password.label_tag }}&lt;/td&gt;&lt;td&gt;{{ form.password }}&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;

&lt;input type="submit" value="login" /&gt;
&lt;input type="hidden" name="next" value="{{ next }}" /&gt;
&lt;/form&gt;

{% endblock %}</pre>
</dd></dl>

</div>
</div>
<div class="section" id="s-id20">
<span id="s-other-built-in-views"></span><h3>その他の組み込みビュー<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<p>認証システムでは、 <tt class="docutils literal"><span class="pre">login</span></tt> ビューの他にも便利なビューをいくつか提供してい
ます:</p>
<dl class="function">
<dt id="django.contrib.auth.django.contrib.auth.views.logout">
<!--[django.contrib.auth.django.contrib.auth.views.logout]--><tt class="descclassname">django.contrib.auth.views.</tt><tt class="descname">logout</tt>()<a class="headerlink" href="#django.contrib.auth.django.contrib.auth.views.logout" title="Permalink to this definition">¶</a></dt>
<dd><p>ユーザをログアウトさせます。</p>
<p><strong>オプション引数:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">template_name</span></tt>: ログアウトページのテンプレートの完全な名前です。
この引数を省略すると、デフォルト値の
<tt class="docutils literal"><span class="pre">registration/logged_out.html</span></tt> を使います。</li>
</ul>
<p><strong>テンプレートコンテキスト:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">title</span></tt>: &quot;Logged out&quot; という文字列を翻訳した値になります。</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="django.contrib.auth.django.contrib.auth.views.logout_then_login">
<!--[django.contrib.auth.django.contrib.auth.views.logout_then_login]--><tt class="descclassname">django.contrib.auth.views.</tt><tt class="descname">logout_then_login</tt>()<a class="headerlink" href="#django.contrib.auth.django.contrib.auth.views.logout_then_login" title="Permalink to this definition">¶</a></dt>
<dd><p>ユーザをログアウトさせてから、ログインページにリダイレクトします。</p>
<p><strong>オプション引数:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">login_url</span></tt>: ログインページへのリダイレクト先です。この引数を省
略すると、デフォルト値の <a class="reference external" href="../ref/settings.html#setting-LOGIN_URL"><tt class="xref docutils literal"><span class="pre">settings.LOGIN_URL</span></tt></a>
を使います。</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="django.contrib.auth.django.contrib.auth.views.password_change">
<!--[django.contrib.auth.django.contrib.auth.views.password_change]--><tt class="descclassname">django.contrib.auth.views.</tt><tt class="descname">password_change</tt>()<a class="headerlink" href="#django.contrib.auth.django.contrib.auth.views.password_change" title="Permalink to this definition">¶</a></dt>
<dd><p>ユーザがパスワードを変更できるようにします。</p>
<p><strong>オプション引数:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">template_name</span></tt>: パスワード変更ページのテンプレートの完全な名前
です。この引数を省略すると、デフォルト値の
<tt class="docutils literal"><span class="pre">registration/password_change_form.html</span></tt> を使います。</li>
</ul>
<p><strong>テンプレートコンテキスト:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">form</span></tt>: パスワード変更のためのフォームです。</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="django.contrib.auth.django.contrib.auth.views.password_change_done">
<!--[django.contrib.auth.django.contrib.auth.views.password_change_done]--><tt class="descclassname">django.contrib.auth.views.</tt><tt class="descname">password_change_done</tt>()<a class="headerlink" href="#django.contrib.auth.django.contrib.auth.views.password_change_done" title="Permalink to this definition">¶</a></dt>
<dd><p>ユーザがパスワードを変更した後のページを表示するためのビューです。</p>
<p><strong>オプション引数:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">template_name</span></tt>: パスワード変更完了ページのテンプレートの完全な
名前です。この引数を省略すると、デフォルト値の
<tt class="docutils literal"><span class="pre">registration/password_change_done.html</span></tt> を使います。</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="django.contrib.auth.django.contrib.auth.views.password_reset">
<!--[django.contrib.auth.django.contrib.auth.views.password_reset]--><tt class="descclassname">django.contrib.auth.views.</tt><tt class="descname">password_reset</tt>()<a class="headerlink" href="#django.contrib.auth.django.contrib.auth.views.password_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>ユーザがパスワードをリセットできるようにします。また、新たなパスワード
をメールで送信します。</p>
<p><strong>オプション引数:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">template_name</span></tt>: パスワードリセットページのテンプレートの完全な
名前です。この引数を省略すると、デフォルト値の
<tt class="docutils literal"><span class="pre">registration/password_reset_form.html</span></tt> を使います。</li>
<li><tt class="docutils literal"><span class="pre">email_template_name</span></tt>: 新しいパスワードを e-mail で送信する際に
使うテンプレートの完全な名前です。この引数を省略すると、デフォル
ト値の <tt class="docutils literal"><span class="pre">registration/password_reset_email.html</span></tt> を使います。</li>
</ul>
<p><strong>テンプレートコンテキスト:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">form</span></tt>: パスワードリセットのためのフォームです。</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="django.contrib.auth.django.contrib.auth.views.password_reset_done">
<!--[django.contrib.auth.django.contrib.auth.views.password_reset_done]--><tt class="descclassname">django.contrib.auth.views.</tt><tt class="descname">password_reset_done</tt>()<a class="headerlink" href="#django.contrib.auth.django.contrib.auth.views.password_reset_done" title="Permalink to this definition">¶</a></dt>
<dd><p>ユーザがパスワードをリセットした後のページを表示するためのビューです。</p>
<p><strong>オプション引数:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">template_name</span></tt>: パスワードリセット完了ページのテンプレートの完
全な名前です。この引数を省略すると、デフォルト値の
<tt class="docutils literal"><span class="pre">registration/password_reset_done.html</span></tt> を使います。</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="django.contrib.auth.django.contrib.auth.views.redirect_to_login">
<!--[django.contrib.auth.django.contrib.auth.views.redirect_to_login]--><tt class="descclassname">django.contrib.auth.views.</tt><tt class="descname">redirect_to_login</tt>()<a class="headerlink" href="#django.contrib.auth.django.contrib.auth.views.redirect_to_login" title="Permalink to this definition">¶</a></dt>
<dd><p>ログインページにリダイレクトし、ログインに成功したら別の URL に戻れるよ
うにするためのビューです。</p>
<p><strong>必須の引数:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">next</span></tt>: ログイン成功後のリダイレクト先 URL です。</li>
</ul>
<p><strong>オプション引数:</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">login_url</span></tt>: ログインページへのリダイレクト先です。
この引数を省略すると、デフォルト値の
<a class="reference external" href="../ref/settings.html#setting-LOGIN_URL"><tt class="xref docutils literal"><span class="pre">settings.LOGIN_URL</span></tt></a> を使います。</li>
</ul>
</dd></dl>

</div>
<div class="section" id="s-id21">
<span id="s-built-in-forms"></span><h3>組み込みフォーム<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>組み込みビューを使いたくないけれども、フォームクラスを書かずに済ませたい場
合のために、認証システムでは組み込みのフォームをいくつか提供しています:</p>
<ul class="simple">
<li><tt class="xref docutils literal"><span class="pre">django.contrib.auth.forms.AdminPasswordChangeForm</span></tt>: Admin イ
ンタフェースでユーザのパスワード変更に使われているフォームです。</li>
<li><tt class="xref docutils literal"><span class="pre">django.contrib.auth.forms.AuthenticationForm</span></tt>: ユーザをログイ
ンさせるためのフォームです。</li>
<li><tt class="xref docutils literal"><span class="pre">django.contrib.auth.forms.PasswordChangeForm</span></tt>: ユーザにパスワー
ドを変更させるためのフォームです。</li>
<li><tt class="xref docutils literal"><span class="pre">django.contrib.auth.forms.PasswordResetForm</span></tt>: パスワードをリ
セットし、新たなパスワードを送信するためのフォームです。</li>
<li><tt class="xref docutils literal"><span class="pre">django.contrib.auth.forms.UserCreationForm</span></tt>: 新たなユーザを作
成するためのフォームです。</li>
</ul>
</div>
<div class="section" id="s-id22">
<span id="s-limiting-access-to-logged-in-users-that-pass-a-test"></span><h3>テストにパスしたログインユーザだけがアクセスできるように制限をかける<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<p>特定のパーミッションやその他のテストの結果に応じたアクセスの制限には、前節
で説明したの本質的に同じことをします。</p>
<p>一番簡単な方法は、ビュー内で直接
<a title="django.http.HttpRequest.user" class="reference external" href="../ref/request-response.html#django.http.HttpRequest.user"><tt class="xref docutils literal"><span class="pre">request.user</span></tt></a> に対するテストを実行す
るというものです。例えば、以下のビューではユーザがログイン済みで、かつ
<tt class="docutils literal"><span class="pre">polls.can_vote</span></tt> というパーミッションを持っているかチェックします:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">()</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s">&#39;polls.can_vote&#39;</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;You can&#39;t vote in this poll.&quot;</span><span class="p">)</span>
    <span class="c"># ...</span>
</pre></div>
<dl class="function">
<dt id="django.contrib.auth.decorators.user_passes_test">
<!--[django.contrib.auth.decorators.user_passes_test]--><tt class="descclassname">decorators.</tt><tt class="descname">user_passes_test</tt>()<a class="headerlink" href="#django.contrib.auth.decorators.user_passes_test" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="docutils literal"><span class="pre">user_passes_test</span></tt> デコレータを使えば、手間を省けます:</p>
<pre>from django.contrib.auth.decorators import user_passes_test

def my_view(request):
    # ...
my_view = user_passes_test(lambda u: u.has_perm('polls.can_vote'))(my_view)</pre>
<p>ここでは、簡単な例としてパーミッションのテストに
<a title="django.contrib.auth.decorators.user_passes_test" class="reference internal" href="#django.contrib.auth.decorators.user_passes_test"><tt class="xref docutils literal"><span class="pre">user_passes_test()</span></tt></a> を使っています
が、単にあるユーザがあるパーミッションを有しているかをテストしたいだけ
なら、後で解説する
<a title="django.contrib.auth.decorators.permission_required" class="reference internal" href="#django.contrib.auth.decorators.permission_required"><tt class="xref docutils literal"><span class="pre">django.contrib.auth.decorators.permission_required()</span></tt></a> デコレータ
を使えます。</p>
<p>Python 2.4 のデコレータ構文ならこうなります:</p>
<pre>from django.contrib.auth.decorators import user_passes_test

@user_passes_test(lambda u: u.has_perm('polls.can_vote'))
def my_view(request):
    # ...</pre>
<p><a title="django.contrib.auth.decorators.user_passes_test" class="reference internal" href="#django.contrib.auth.decorators.user_passes_test"><tt class="xref docutils literal"><span class="pre">user_passes_test()</span></tt></a> には必須の引数
が一つあります。この引数は、 <a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a>
を引数に取り、ユーザにページのビューを許可する場合には <tt class="xref docutils literal"><span class="pre">True</span></tt> を返す
呼び出し可能オブジェクトでなければなりません。
<a title="django.contrib.auth.decorators.user_passes_test" class="reference internal" href="#django.contrib.auth.decorators.user_passes_test"><tt class="xref docutils literal"><span class="pre">user_passes_test()</span></tt></a> は
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> が匿名かどうかを自動的に調べ
ないので注意してください。</p>
<p><a title="django.contrib.auth.decorators.user_passes_test" class="reference internal" href="#django.contrib.auth.decorators.user_passes_test"><tt class="xref docutils literal"><span class="pre">user_passes_test()</span></tt></a> はオプション
の引数として <tt class="docutils literal"><span class="pre">login_url</span></tt> をとります。この引数を使うとログインページへ
の URL を指定できます (デフォルトでは
<a class="reference external" href="../ref/settings.html#setting-LOGIN_URL"><tt class="xref docutils literal"><span class="pre">settings.LOGIN_URL</span></tt></a> になります)。</p>
<p>Python 2.3 風の構文で書いた例を示します:</p>
<pre>from django.contrib.auth.decorators import user_passes_test

def my_view(request):
    # ...
my_view = user_passes_test(lambda u: u.has_perm('polls.can_vote'), login_url='/login/')(my_view)</pre>
<p>Python 2.4 風の構文で例を書くと以下のようになります:</p>
<pre>from django.contrib.auth.decorators import user_passes_test

@user_passes_test(lambda u: u.has_perm('polls.can_vote'), login_url='/login/')
def my_view(request):
    # ...</pre>
</dd></dl>

<div class="section" id="s-permission-required">
<span id="s-the-permission-required-decorator"></span><h4>permission_required デコレータ<a class="headerlink" href="#permission-required" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<dl class="function">
<dt id="django.contrib.auth.decorators.permission_required">
<!--[django.contrib.auth.decorators.permission_required]--><tt class="descclassname">decorators.</tt><tt class="descname">permission_required</tt>()<a class="headerlink" href="#django.contrib.auth.decorators.permission_required" title="Permalink to this definition">¶</a></dt>
<dd><p>あるユーザが特定のパーミッションを有しているかのチェックは、比較的よく
ある操作なので、 Django はショートカットとして
<a title="django.contrib.auth.decorators.permission_required" class="reference internal" href="#django.contrib.auth.decorators.permission_required"><tt class="xref docutils literal"><span class="pre">permission_required()</span></tt></a> という
デコレータを用意しています。このデコレータを使うと、上の例は以下のよう
に書き直せます:</p>
<pre>from django.contrib.auth.decorators import permission_required

def my_view(request):
    # ...
my_view = permission_required('polls.can_vote')(my_view)</pre>
<p><a title="django.contrib.auth.decorators.permission_required" class="reference internal" href="#django.contrib.auth.decorators.permission_required"><tt class="xref docutils literal"><span class="pre">permission_required()</span></tt></a> もまた、
<tt class="docutils literal"><span class="pre">login_url</span></tt> を引数に取れます。例えば:</p>
<pre>from django.contrib.auth.decorators import permission_required

def my_view(request):
    # ...
my_view = permission_required('polls.can_vote', login_url='/loginpage/')(my_view)</pre>
<p><tt class="docutils literal"><span class="pre">login_required</span></tt> デコレータと同様、 <tt class="docutils literal"><span class="pre">login_url</span></tt> のデフォルト値は
<a class="reference external" href="../ref/settings.html#setting-LOGIN_URL"><tt class="xref docutils literal"><span class="pre">settings.LOGIN_URL</span></tt></a> です。</p>
</dd></dl>

</div>
</div>
<div class="section" id="s-id23">
<span id="s-limiting-access-to-generic-views"></span><h3>アクセスを汎用ビューに制限する<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<p>アクセスを <a class="reference external" href="../ref/generic-views.html#ref-generic-views"><em>汎用ビュー</em></a> に制限するには、ビューを
囲む薄いラッパコードを書き、URLconf を変更して、ジェネリックビュー自体では
なくラッパコードを指すようにします。例えば:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic.date_based</span> <span class="kn">import</span> <span class="n">object_detail</span>

<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">limited_object_detail</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">object_detail</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-permission">
<span id="s-permissions"></span><h2>パーミッション (Permission)<a class="headerlink" href="#permission" title="Permalink to this headline">¶</a></h2>
<p>Django には単純なパーミッション機構がついてきます。このパーミッション機構は
特定のユーザやユーザのグループに対してパーミッションを結びつける手段を提供
します。</p>
<p>パーミッション機構は Django の admin サイトでも使われていますが、自作のコー
ド内でも自由に使えます。</p>
<ul class="simple">
<li>&quot;add&quot; フォームをビューし、オブジェクトを追加するためのアクセスを、そ
の型のオブジェクトの &quot;add&quot; パーミッションを持つユーザに制限しています。</li>
<li>変更リストをビューし、&quot;change&quot; フォームをビューしてオブジェクトを変更
するためのアクセスを、その型のオブジェクトの &quot;change&quot; パーミッション
を持つユーザに制限しています。</li>
<li>あるオブジェクトを削除するためのアクセスを、その型のオブジェクトの
&quot;delete&quot; パーミッションを持つユーザに制限しています。</li>
</ul>
<p>パーミッションはオブジェクトインスタンスごとではなく、オブジェクトの型ごと
にグローバルに設定されます。例えば、「Mary はニュース記事を変更できる」のよ
うには書けますが、現状では、「Mary はニュース記事を変更できる。ただし彼女が
書いた分だけ」とか、「Mary はある状態にある記事か、ある日時に出版されたか、
ある ID の記事だけを変更できる」のようには書けません。後者の機能については
は、現在 Django の開発者達が議論中です。</p>
<div class="section" id="s-id24">
<span id="s-default-permissions"></span><h3>デフォルトのパーミッション<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="../ref/settings.html#setting-INSTALLED_APPS"><tt class="xref docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> 設定に <tt class="docutils literal"><span class="pre">django.contrib.auth</span></tt> を追加している場合、
インストールされている全てのアプリケーションのモデルについて、追加 (add)、
変更 (change)、および削除 (delete) というデフォルトのパーミッションが作成さ
れます。</p>
<p>これらのパーミッションは、 <tt class="xref docutils literal"><span class="pre">manage.py</span> <span class="pre">syncdb</span></tt> を実行した
ときに生成されます。厳密には、 <tt class="docutils literal"><span class="pre">django.contrib.auth</span></tt> を
<a class="reference external" href="../ref/settings.html#setting-INSTALLED_APPS"><tt class="xref docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> 設定に追加した直後に <tt class="xref docutils literal"><span class="pre">syncdb</span></tt> を実行する
と、その時インストールされていた全てのアプリケーションと、新たに追加したア
プリケーションのデフォルトパーミッションが作成されます。以後、
<tt class="xref docutils literal"><span class="pre">manage.py</span> <span class="pre">syncdb</span></tt> を実行するたびに、新たに追加されたモデ
ルのデフォルトパーミッションが生成されます。</p>
</div>
<div class="section" id="s-id26">
<span id="s-id25"></span><span id="s-custom-permissions"></span><h3>カスタムのパーミッション<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<p>カスタムのパーミッションを生成するには、 <tt class="docutils literal"><span class="pre">permissions</span></tt> という
<a class="reference external" href="db/models.html#meta-options"><em>モデルのメタ属性</em></a> を使います。</p>
<p>この例では、三つのカスタムパーミッションを生成しています:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">USCitizen</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c"># ...</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">permissions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s">&quot;can_drive&quot;</span><span class="p">,</span> <span class="s">&quot;Can drive&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&quot;can_vote&quot;</span><span class="p">,</span> <span class="s">&quot;Can vote in elections&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&quot;can_drink&quot;</span><span class="p">,</span> <span class="s">&quot;Can drink alcohol&quot;</span><span class="p">),</span>
        <span class="p">)</span>
</pre></div>
<p>この定義の役割は、 <tt class="xref docutils literal"><span class="pre">manage.py</span> <span class="pre">syncdb</span></tt> を実行したときに追
加のパーミッションを追加することだけです。</p>
</div>
<div class="section" id="s-id27">
<span id="s-api-reference"></span><h3>API リファレンス<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.contrib.auth.models.Permission">
<!--[django.contrib.auth.models.Permission]-->class <tt class="descclassname">models.</tt><tt class="descname">Permission</tt><a class="headerlink" href="#django.contrib.auth.models.Permission" title="Permalink to this definition">¶</a></dt>
<dd>ユーザと同様、パーミッションは Django モデルとして実装されています。実
装は <a class="reference external" href="http://code.djangoproject.com/browser/django/trunk/django/contrib/auth/models.py">django/contrib/auth/models.py</a> にあります。</dd></dl>

<div class="section" id="s-id28">
<h4>フィールド<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<p><a title="django.contrib.auth.models.Permission" class="reference internal" href="#django.contrib.auth.models.Permission"><tt class="xref docutils literal"><span class="pre">Permission</span></tt></a> オブジェクトには以下のフィー
ルドがあります:</p>
<dl class="attribute">
<dt id="django.contrib.auth.models.Permission.name">
<!--[django.contrib.auth.models.Permission.name]--><tt class="descclassname">models.Permission.</tt><tt class="descname">name</tt><a class="headerlink" href="#django.contrib.auth.models.Permission.name" title="Permalink to this definition">¶</a></dt>
<dd>必須です。50 文字以下です。例: <tt class="docutils literal"><span class="pre">'Can</span> <span class="pre">vote'</span></tt></dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.Permission.content_type">
<!--[django.contrib.auth.models.Permission.content_type]--><tt class="descclassname">models.Permission.</tt><tt class="descname">content_type</tt><a class="headerlink" href="#django.contrib.auth.models.Permission.content_type" title="Permalink to this definition">¶</a></dt>
<dd>必須です。インストール済みの Django モデルのレコードが入った
<tt class="docutils literal"><span class="pre">django_content_type</span></tt> データベーステーブルへの参照です。</dd></dl>

<dl class="attribute">
<dt id="django.contrib.auth.models.Permission.codename">
<!--[django.contrib.auth.models.Permission.codename]--><tt class="descclassname">models.Permission.</tt><tt class="descname">codename</tt><a class="headerlink" href="#django.contrib.auth.models.Permission.codename" title="Permalink to this definition">¶</a></dt>
<dd>必須です。 100 文字以下です。例: <tt class="docutils literal"><span class="pre">'can_vote'</span></tt></dd></dl>

</div>
<div class="section" id="s-id29">
<h4>メソッド<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<p><a title="django.contrib.auth.models.Permission" class="reference internal" href="#django.contrib.auth.models.Permission"><tt class="xref docutils literal"><span class="pre">Permission</span></tt></a> オブジェクトは、他の
<cite>Django モデル &lt;ref-models-instances&gt;</cite> と同じく、標準的なデータアクセスメソッ
ドを備えています。</p>
</div>
</div>
</div>
<div class="section" id="s-id30">
<span id="s-authentication-data-in-templates"></span><h2>認証データのテンプレート上での扱い<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h2>
<p><tt class="xref docutils literal"><span class="pre">RequestContext</span></tt> を使っている場合、ログイン
ユーザとそのパーミッションに
<a class="reference external" href="../ref/templates/api.html#ref-templates-api"><em>テンプレートコンテキスト</em></a> (template context) を使っ
てアクセスできます。</p>
<div class="admonition- admonition">
<p class="first admonition-title">技術的な話題</p>
<p class="last">デフォルトの設定では、テンプレートコンテキストに
<tt class="xref docutils literal"><span class="pre">RequestContext</span></tt> を使うようになっていて、
<em>かつ</em>  <a class="reference external" href="../ref/settings.html#setting-TEMPLATE_CONTEXT_PROCESSORS"><tt class="xref docutils literal"><span class="pre">TEMPLATE_CONTEXT_PROCESSORS</span></tt></a> の設定に
<tt class="docutils literal"><span class="pre">&quot;django.core.context_processors.auth&quot;</span></tt> が入っています。この場合にのみ、
上記の変数をテンプレートコンテキストの中で使えるようになります。詳しくは
<a class="reference external" href="../ref/templates/api.html#subclassing-context-requestcontext"><em>RequestContext のドキュメント</em></a>
を参照してください。</p>
</div>
<div class="section" id="s-id31">
<h3>ユーザ<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<p>現在のログインユーザは、 <a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> インスタ
ンスであっても <a title="django.contrib.auth.models.AnonymousUser" class="reference internal" href="#django.contrib.auth.models.AnonymousUser"><tt class="xref docutils literal"><span class="pre">AnonymousUser</span></tt></a> インスタ
ンスであっても、テンプレート変数 <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">user</span> <span class="pre">}}</span></tt> に入ります:</p>
<pre>{% if user.is_authenticated %}
    &lt;p&gt;Welcome, {{ user.username }}. Thanks for logging in.&lt;/p&gt;
{% else %}
    &lt;p&gt;Welcome, new user. Please log in.&lt;/p&gt;
{% endif %}</pre>
</div>
<div class="section" id="s-id32">
<span id="s-persmissions"></span><h3>パーミッション<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<p>現在のログインユーザのパーミッションはテンプレート変数 <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">perms</span> <span class="pre">}}</span></tt> に入っ
ています。この変数はパーミッションオブジェクトをテンプレートで扱いやすくす
るためのプロキシ (proxy) である、
<tt class="xref docutils literal"><span class="pre">django.core.context_processors.PermWrapper</span></tt> のインスタンスです。</p>
<p><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">perms</span> <span class="pre">}}</span></tt> オブジェクトに対して 1 段の属性参照を行うと、実際には
<a title="django.contrib.auth.models.User.has_module_perms" class="reference internal" href="#django.contrib.auth.models.User.has_module_perms"><tt class="xref docutils literal"><span class="pre">User.has_module_perms</span></tt></a>
へのプロキシになっています。例えば下記の例は、ログインユーザが <tt class="docutils literal"><span class="pre">foo</span></tt> とい
うアプリケーションへのパーミッションを持っている場合に  <tt class="xref docutils literal"><span class="pre">True</span></tt> を表示しま
す:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">perms</span><span class="o">.</span><span class="n">foo</span> <span class="p">}}</span>
</pre></div>
<p>2 段階属性を参照すると、
<a title="django.contrib.auth.models.User.has_perm" class="reference internal" href="#django.contrib.auth.models.User.has_perm"><tt class="xref docutils literal"><span class="pre">User.has_perm</span></tt></a> へのプロキ
シに到達します。以下の例では、ログインユーザが <tt class="docutils literal"><span class="pre">foo.can_vote</span></tt> へのパーミッ
ションを持つ場合に <tt class="xref docutils literal"><span class="pre">True</span></tt> を表示します:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">perms</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">can_vote</span> <span class="p">}}</span>
</pre></div>
<p>こうして、テンプレート内で <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">%}</span></tt> 文を使ってチェックを行えます:</p>
<pre>{% if perms.foo %}
    &lt;p&gt;You have permission to do something in the foo app.&lt;/p&gt;
    {% if perms.foo.can_vote %}
        &lt;p&gt;You can vote!&lt;/p&gt;
    {% endif %}
    {% if perms.foo.can_drive %}
        &lt;p&gt;You can drive!&lt;/p&gt;
    {% endif %}
{% else %}
    &lt;p&gt;You don't have permission to do anything in the foo app.&lt;/p&gt;
{% endif %}</pre>
</div>
</div>
<div class="section" id="s-group">
<span id="s-groups"></span><h2>グループ (Group)<a class="headerlink" href="#group" title="Permalink to this headline">¶</a></h2>
<p>グループは、パーミッションを適用するユーザのカテゴリを作ったり、一連のユー
ザに何らかのラベルを適用するための汎用的な手段です。一人のユーザは複数のグ
ループに所属できます。</p>
<p>グループに所属したユーザは、そのグループに許可されているパーミッションを自
動的に得ます。例えば、 <tt class="docutils literal"><span class="pre">Site</span> <span class="pre">editors</span></tt> というグループに
<tt class="docutils literal"><span class="pre">can_edit_home_page</span></tt> というパーミッションをがあれば、そのグループに属する
ユーザはみな,  <tt class="docutils literal"><span class="pre">can_edit_home_page</span></tt> のパーミッションを持ちます。</p>
<p>パーミッションだけではなく、グループはユーザをカテゴリに分けてラベルを付け
たり、機能を拡張したりできます。例えば、 <tt class="docutils literal"><span class="pre">'特別なユーザ'</span></tt> のグループを作
成して、そのグループのユーザ向けに、例えばサイト内のメンバー限定エリアへの
アクセスを提供したり、メンバーだけに e-mail メッセージを送るといった、特別
な処理を行うコードを書けます。</p>
</div>
<div class="section" id="s-message">
<span id="s-messages"></span><h2>メッセージ (Message)<a class="headerlink" href="#message" title="Permalink to this headline">¶</a></h2>
<p>メッセージシステムは、任意のユーザ宛のメッセージをキューしておく軽量な方法
です。</p>
<p>メッセージは <a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> に関連づけられます。
メッセージには有効期限やタイムスタンプの概念はありません。</p>
<p>メッセージは Django admin で何らかの処理の成功を知らせる際に使われています。
例えば、 <tt class="docutils literal"><span class="pre">&quot;The</span> <span class="pre">poll</span> <span class="pre">Foo</span> <span class="pre">was</span> <span class="pre">created</span> <span class="pre">successfully.&quot;</span></tt> はメッセージで実現さ
れています。</p>
<p>メッセージの API は単純です:</p>
<dl class="method">
<dt id="django.contrib.auth.models.User.message_set.create">
<!--[django.contrib.auth.models.User.message_set.create]--><tt class="descclassname">models.User.message_set.</tt><tt class="descname">create</tt>(<em>message</em>)<a class="headerlink" href="#django.contrib.auth.models.User.message_set.create" title="Permalink to this definition">¶</a></dt>
<dd><p>メッセージの追加には、
<tt class="docutils literal"><span class="pre">user_obj.message_set.create(message='message_text')</span></tt> を使います。</p>
<p>メッセージの取得と削除には、
<a title="django.contrib.auth.models.User.get_and_delete_messages" class="reference internal" href="#django.contrib.auth.models.User.get_and_delete_messages"><tt class="xref docutils literal"><span class="pre">user_obj.get_and_delete_messages()</span></tt></a>
を使います。このメソッドは、該当ユーザのキューに溜っている <tt class="docutils literal"><span class="pre">Message</span></tt>
オブジェクトがあれば、リストにして返し、キュー内のメッセージを削除しま
す。</p>
</dd></dl>

<p>このビューの例では、システムはプレイリストの作成後に表示されるメッセージを
保存します:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">create_playlist</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">songs</span><span class="p">):</span>
    <span class="c"># Create the playlist with the given songs.</span>
    <span class="c"># ...</span>
    <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">message_set</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s">&quot;Your playlist was added successfully.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&quot;playlists/create.html&quot;</span><span class="p">,</span>
        <span class="n">context_instance</span><span class="o">=</span><span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>
</pre></div>
<p><tt class="xref docutils literal"><span class="pre">RequestContext</span></tt> を使うと、現在のログインユー
ザとそのメッセージを <a class="reference external" href="../ref/templates/api.html#ref-templates-api"><em>テンプレート変数</em></a>
<tt class="docutils literal"><span class="pre">{{</span> <span class="pre">messages</span> <span class="pre">}}</span></tt> として使えます。メッセージを表示するためのテンプレートコー
ド例を示します:</p>
<pre>{% if messages %}
&lt;ul&gt;
    {% for message in messages %}
    &lt;li&gt;{{ message }}&lt;/li&gt;
    {% endfor %}
&lt;/ul&gt;
{% endif %}</pre>
<p><tt class="xref docutils literal"><span class="pre">RequestContext</span></tt> は
<a title="django.contrib.auth.models.User.get_and_delete_messages" class="reference internal" href="#django.contrib.auth.models.User.get_and_delete_messages"><tt class="xref docutils literal"><span class="pre">get_and_delete_messages()</span></tt></a> を背後で呼
び出すので、メッセージは表示されなくても消去されることに注意してください。</p>
<p>最後に、このメッセージフレームワークはユーザデータベースに登録されているユー
ザに対してしか動作しないことに注意して下さい。匿名ユーザにメッセージを送る
には、 <a class="reference external" href="http/sessions.html#topics-http-sessions"><em>セッションフレームワーク</em></a> を使って下さい。</p>
</div>
<div class="section" id="s-id33">
<span id="s-other-authentication-sources"></span><span id="s-authentication-backends"></span><h2>他の認証データソースを使う<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h2>
<p>ほとんどのケースでは、 Django についてくる認証メカニズムで十分のはずですが、
場合によっては別の認証データソース (authentication source) をフックしたい、
すなわち、Django 外のユーザ名やパスワードデータや認証メソッドを使いたいよう
なケースもあることでしょう。</p>
<p>例えば、会社が LDAP 構成を使って社員のユーザ名やパスワードを管理していると
しましょう。ネットワーク管理者にとっても、またユーザ自身にとっても、 LDAP
とDjango ベースのアプリケーションの双方で別々のアカウントを維持するのはいさ
さか骨の折れる作業です。</p>
<p>こうした状況を扱うために、 Django の認証システムは別の認証ソースをプラグイ
ンできるようになっています。 Django がデフォルトで使っているデータベースの
スキームをオーバライドしたり、デフォルトのシステムを他のシステムと並列して
動作させたりできます。</p>
<div class="section" id="s-id34">
<span id="s-specifying-authentication-backends"></span><h3>他の認証バックエンドを指定する<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<p>舞台裏では、 Django は認証に使う「認証バックエンド」のリストを維持していま
す。前述の「ユーザをログインさせる」で説明したように
<a title="django.contrib.auth.authenticate" class="reference internal" href="#django.contrib.auth.authenticate"><tt class="xref docutils literal"><span class="pre">django.contrib.auth.authenticate()</span></tt></a> を呼び出すと、Django は全ての認
証バックエンドにわたって認証テストを試みます。最初の認証メソッドに失敗する
と次の認証バックエンド、という具合にして、認証に成功しない限り、全てのバッ
クエンドを試すまで続けます。</p>
<p>認証に使うバックエンドのリストは <a class="reference external" href="../ref/settings.html#setting-AUTHENTICATION_BACKENDS"><tt class="xref docutils literal"><span class="pre">AUTHENTICATION_BACKENDS</span></tt></a> 設定に
指定します。この値は Python モジュールパス名からなるタプルで、認証方法を実
装したクラスの名前を指定します。認証クラスは Python パス上のどこにあっても
かまいません。</p>
<p>デフォルトでは、 <a class="reference external" href="../ref/settings.html#setting-AUTHENTICATION_BACKENDS"><tt class="xref docutils literal"><span class="pre">AUTHENTICATION_BACKENDS</span></tt></a> の値は:</p>
<div class="highlight"><pre><span class="p">(</span><span class="s">&#39;django.contrib.auth.backends.ModelBackend&#39;</span><span class="p">,)</span>
</pre></div>
<p>に設定されています。このクラスは、 Django のユーザデータベースをチェックす
る認証スキームです。</p>
<p><a class="reference external" href="../ref/settings.html#setting-AUTHENTICATION_BACKENDS"><tt class="xref docutils literal"><span class="pre">AUTHENTICATION_BACKENDS</span></tt></a> の順番には意味があり、同じユーザ名とパス
ワードが複数のバックエンドで有効な値であったとしても、 Django は最初にユー
ザ名とパスワードがマッチした時点で認証処理を停止します。</p>
</div>
<div class="section" id="s-id35">
<span id="s-writing-an-authentication-backend"></span><h3>認証バックエンドを作成する<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<p>認証バックエンドの実体は、 <tt class="docutils literal"><span class="pre">get_user(user_id)</span></tt> と
<tt class="docutils literal"><span class="pre">authenticate(**credentials)</span></tt> という二つのメソッドを実装したクラスです。</p>
<p><tt class="docutils literal"><span class="pre">get_user</span></tt> メソッドはユーザ名、データベース ID などを表す引数
<tt class="docutils literal"><span class="pre">user_id</span></tt> をとり、対応する <tt class="docutils literal"><span class="pre">User</span></tt> オブジェクトを返します。</p>
<p><tt class="docutils literal"><span class="pre">authenticate</span></tt> メソッドは証明情報、すなわちユーザ名とパスワードなどをキー
ワード引数の形で受け取ります。ほとんどの場合、以下のような形式をとります:</p>
<pre>class MyBackend:
    def authenticate(self, username=None, password=None):
        # Check the username/password and return a User.</pre>
<p>以下のようにトークンに対する認証を行うようにも書けます:</p>
<pre>class MyBackend:
    def authenticate(self, token=None):
        # Check the token and return a User.</pre>
<p>どちらの方法でも、 <tt class="docutils literal"><span class="pre">authenticate</span></tt> は受け取った証明情報をチェックし、証明
情報が有効な場合、対応する <tt class="docutils literal"><span class="pre">User</span></tt> オブジェクトを返さねばなりません。証明
情報が無効なら、 <tt class="xref docutils literal"><span class="pre">None</span></tt> を返します。</p>
<p>Django の admin システムは、冒頭で説明した Django の <tt class="docutils literal"><span class="pre">User</span></tt> オブジェクト
と強くカップリングしています。従って、今のところ自作の認証バックエンドを扱
うには、 (LDAP ディレクトリや外部の SQL データベースなどのような) 別のバッ
クエンド上のユーザに対して Django の <tt class="docutils literal"><span class="pre">User</span></tt> オブジェクトを生成するのがベ
ストです。あらかじめスクリプトを書いておいてもよいですし、ユーザが最初にロ
グインした際に、 <tt class="docutils literal"><span class="pre">authenticate</span></tt> メソッドでその処理を行うようにしてもよい
でしょう。</p>
<p>以下に示すバックエンドの例では、 <tt class="docutils literal"><span class="pre">settings.py</span></tt> ファイルに定義されたユーザ
名とパスワードに対して認証を行い、ユーザが最初に認証を行ったときに <tt class="docutils literal"><span class="pre">User</span></tt>
オブジェクトを生成します:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span><span class="p">,</span> <span class="n">check_password</span>

<span class="k">class</span> <span class="nc">SettingsBackend</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Authenticate against the settings ADMIN_LOGIN and ADMIN_PASSWORD.</span>

<span class="sd">    Use the login name, and a hash of the password. For example:</span>

<span class="sd">    ADMIN_LOGIN = &#39;admin&#39;</span>
<span class="sd">    ADMIN_PASSWORD = &#39;sha1$4e987$afbcf42e21bd417fb71db8c66b321e9fc33051de&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">login_valid</span> <span class="o">=</span> <span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">ADMIN_LOGIN</span> <span class="o">==</span> <span class="n">username</span><span class="p">)</span>
        <span class="n">pwd_valid</span> <span class="o">=</span> <span class="n">check_password</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">ADMIN_PASSWORD</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">login_valid</span> <span class="ow">and</span> <span class="n">pwd_valid</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">User</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
                <span class="c"># Create a new user. Note that we can set password</span>
                <span class="c"># to anything, because it won&#39;t be checked; the password</span>
                <span class="c"># from settings.py will.</span>
                <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">&#39;get from settings.py&#39;</span><span class="p">)</span>
                <span class="n">user</span><span class="o">.</span><span class="n">is_staff</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">user</span>
        <span class="k">return</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">User</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
</pre></div>
</div>
<div class="section" id="s-id36">
<span id="s-handling-authorization-in-custom-backends"></span><h3>カスタムのバックエンドでパーミッションを扱う<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<p>カスタムの認証バックエンドから、独自のパーミッションを提供できます。</p>
<p>認証バックエンドがパーミッション照会のための関数
(<a title="django.contrib.auth.models.User.get_group_permissions" class="reference internal" href="#django.contrib.auth.models.User.get_group_permissions"><tt class="xref docutils literal"><span class="pre">get_group_permissions()</span></tt></a>,
<a title="django.contrib.auth.models.User.get_all_permissions" class="reference internal" href="#django.contrib.auth.models.User.get_all_permissions"><tt class="xref docutils literal"><span class="pre">get_all_permissions()</span></tt></a>,
<a title="django.contrib.auth.models.User.has_perm" class="reference internal" href="#django.contrib.auth.models.User.has_perm"><tt class="xref docutils literal"><span class="pre">has_perm()</span></tt></a>, および
<a title="django.contrib.auth.models.User.has_module_perms" class="reference internal" href="#django.contrib.auth.models.User.has_module_perms"><tt class="xref docutils literal"><span class="pre">has_module_perms()</span></tt></a>) をサポートして
いる場合、ユーザモデルはパーミッションの照会をバックエンドに移譲します。</p>
<p>あるユーザに付与されるパーミッションの集合は、全てのバックエンドの返しうる
パーミッションのスーパーセットです。すなわち、 Django はいずれかのバックエ
ンドのパーミッションを、どのユーザにも付与できます。</p>
<p>前述の単純なバックエンドで、万能の管理ユーザを作る方法は、以下のようにとても
簡単です:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">SettingsBackend</span><span class="p">:</span>

    <span class="c"># ...</span>

    <span class="k">def</span> <span class="nf">has_perm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_obj</span><span class="p">,</span> <span class="n">perm</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">user_obj</span><span class="o">.</span><span class="n">username</span> <span class="o">==</span> <span class="n">settings</span><span class="o">.</span><span class="n">ADMIN_LOGIN</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</pre></div>
<p>この書き方だと、上の例でアクセスを認可されたユーザにはあらゆるパーミッショ
ンが許されます。バックエンドの認証関数はユーザオブジェクトを引数にとります。
また、ユーザオブジェクトの代わりに、
<a title="django.contrib.auth.models.User" class="reference internal" href="#django.contrib.auth.models.User"><tt class="xref docutils literal"><span class="pre">User</span></tt></a> のコンストラクタと同じ引数も指定
できます。</p>
<p>認可の API は、 <a class="reference external" href="http://code.djangoproject.com/browser/django/trunk/django/contrib/auth/backends.py">django/contrib/auth/backends.py</a> で実装されています。この
バックエンドはデフォルトのバックエンドであり、ほとんどの場合
<tt class="docutils literal"><span class="pre">auth_permission</span></tt> にパーミッションを問い合わせます。</p>
</div>
</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference external" href="">Django でのユーザ認証</a><ul>
<li><a class="reference external" href="#id1">概要</a></li>
<li><a class="reference external" href="#id2">インストール</a></li>
<li><a class="reference external" href="#user">ユーザ (User)</a><ul>
<li><a class="reference external" href="#api">API リファレンス</a><ul>
<li><a class="reference external" href="#id3">フィールド</a></li>
<li><a class="reference external" href="#id4">メソッド</a></li>
<li><a class="reference external" href="#id6">マネジャ関数</a></li>
</ul>
</li>
<li><a class="reference external" href="#id7">基本的な使い方</a><ul>
<li><a class="reference external" href="#id8">ユーザの作成</a></li>
<li><a class="reference external" href="#id9">パスワードの変更</a></li>
</ul>
</li>
<li><a class="reference external" href="#id10">パスワード</a></li>
<li><a class="reference external" href="#id11">匿名ユーザ (Anonymous users)</a></li>
<li><a class="reference external" href="#id12">スーパユーザの作成</a></li>
<li><a class="reference external" href="#id13">追加のユーザ情報の保存</a></li>
</ul>
</li>
<li><a class="reference external" href="#web">Web リクエストに対する認証</a><ul>
<li><a class="reference external" href="#id14">ユーザをログインさせる</a></li>
<li><a class="reference external" href="#id16">ユーザのパスワードを手動で調べる</a></li>
<li><a class="reference external" href="#id17">ユーザをログアウトさせる</a></li>
<li><a class="reference external" href="#id18">ログインユーザだけがアクセスできるように制限をかける</a><ul>
<li><a class="reference external" href="#id19">生真面目な方法</a></li>
<li><a class="reference external" href="#login-required">login_required デコレータ</a></li>
</ul>
</li>
<li><a class="reference external" href="#id20">その他の組み込みビュー</a></li>
<li><a class="reference external" href="#id21">組み込みフォーム</a></li>
<li><a class="reference external" href="#id22">テストにパスしたログインユーザだけがアクセスできるように制限をかける</a><ul>
<li><a class="reference external" href="#permission-required">permission_required デコレータ</a></li>
</ul>
</li>
<li><a class="reference external" href="#id23">アクセスを汎用ビューに制限する</a></li>
</ul>
</li>
<li><a class="reference external" href="#permission">パーミッション (Permission)</a><ul>
<li><a class="reference external" href="#id24">デフォルトのパーミッション</a></li>
<li><a class="reference external" href="#id26">カスタムのパーミッション</a></li>
<li><a class="reference external" href="#id27">API リファレンス</a><ul>
<li><a class="reference external" href="#id28">フィールド</a></li>
<li><a class="reference external" href="#id29">メソッド</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#id30">認証データのテンプレート上での扱い</a><ul>
<li><a class="reference external" href="#id31">ユーザ</a></li>
<li><a class="reference external" href="#id32">パーミッション</a></li>
</ul>
</li>
<li><a class="reference external" href="#group">グループ (Group)</a></li>
<li><a class="reference external" href="#message">メッセージ (Message)</a></li>
<li><a class="reference external" href="#id33">他の認証データソースを使う</a><ul>
<li><a class="reference external" href="#id34">他の認証バックエンドを指定する</a></li>
<li><a class="reference external" href="#id35">認証バックエンドを作成する</a></li>
<li><a class="reference external" href="#id36">カスタムのバックエンドでパーミッションを扱う</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>前後のページ</h3>
  <ul>
    
      <li>前: <a href="testing.html">Djangoアプリケーションのテスト</a></li>
    
    
      <li>次: <a href="cache.html">Django のキャッシュフレームワーク</a></li>
    
  </ul>
  <h3>現在のページ:</h3>
  <ul>
      <li>
        <a href="../index.html">Django v1.0 documentation</a>
        
          <ul><li><a href="index.html">Django を使う</a>
        
        <ul><li>Django でのユーザ認証</li></ul>
        </li></ul>
      </li>
  </ul>  

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/topics/auth.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">Aug 31, 2012</p>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="testing.html" title="Djangoアプリケーションのテスト">前へ</a> 
     |
    <a href="index.html" title="Django を使う" accesskey="U">上へ</a>
   |
    <a href="cache.html" title="Django のキャッシュフレームワーク">次へ</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>