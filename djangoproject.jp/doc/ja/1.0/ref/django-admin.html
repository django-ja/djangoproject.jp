<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>django-admin.py と manage.py &mdash; Django v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="contents" title="Global table of contents" href="../contents.html" />
    <link rel="index" title="Global index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Django v1.0 documentation" href="../index.html" />
    <link rel="up" title="API リファレンス" href="index.html" />
    <link rel="next" title="ファイル操作 API リファレンス" href="files/index.html" />
    <link rel="prev" title="データベースのサポート状況" href="databases.html" />
  </head>
  <body>
  <div id="outdated-warning" class="doc-floating-warning" style="position: relative;">
    このドキュメントの Django のバージョンにはセキュリティ上の脆弱性があるため、すでにサポートが終了されています。新しいバージョンにアップグレードしてください！<a href="https://docs.djangoproject.com/ja/">最新の Django のバージョンのドキュメントはこちら</a>
  </div>
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Django v1.0 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">ホーム</a>  |
        <a title="Table of contents" href="../contents.html">目次</a>  |
        <a title="Global index" href="../genindex.html">索引</a>  |
        <a title="Search" href="../modindex.html">モジュール一覧</a>
      </div>
      <div class="nav">
    &laquo; <a href="databases.html" title="データベースのサポート状況">前へ</a> 
     |
    <a href="index.html" title="API リファレンス" accesskey="U">上へ</a>
   |
    <a href="files/index.html" title="ファイル操作 API リファレンス">次へ</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-django-admin">
            
  
  <div class="section" id="s-django-admin-py-manage-py">
<span id="s-ref-django-admin"></span><h1>django-admin.py と manage.py<a class="headerlink" href="#django-admin-py-manage-py" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">revision-up-to:</th><td class="field-body">8961 (1.0)</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">django-admin.py</span></tt> は Django の管理タスクを行うためのコマンドライン
ユーティリティです。このドキュメントでは <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> の全ての
機能について説明します。</p>
<p>また、各 Django プロジェクトには <tt class="docutils literal"><span class="pre">manage.py</span></tt> が自動的に生成されます。
<tt class="docutils literal"><span class="pre">manage.py</span></tt> は <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> に対する薄いラッパで、
<tt class="docutils literal"><span class="pre">django-admin.py</span></tt> に仕事を引き渡す前に以下の二つの処理を行います:</p>
<ul class="simple">
<li>プロジェクトのパッケージを <tt class="docutils literal"><span class="pre">sys.path</span></tt> に追加します。</li>
<li><span class="target" id="index-6"></span><strong class="xref">DJANGO_SETTINGS_MODULE</strong> 環境変数がプロジェクトの
<tt class="docutils literal"><span class="pre">settings.py</span></tt> を指すように設定します。</li>
</ul>
<p>Django を <tt class="docutils literal"><span class="pre">setup.py</span></tt> ユーティリティでインストールしていれば、
<tt class="docutils literal"><span class="pre">django-admin.py</span></tt> スクリプトはシステムパス上にあるはずです。システム
パス上にない場合、 Python インストールディレクトリ上の
<tt class="docutils literal"><span class="pre">site-packages/django/bin</span></tt> を探せば見つかるでしょう。
<tt class="docutils literal"><span class="pre">/usr/local/bin</span></tt> のようなパス上のどこかにシンボリックリンクを張って
おくように勧めます。</p>
<p>Windows を使っていて、シンボリックリンクを張れない場合には、パスの通った場
所に <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> をコピーするか、 <tt class="docutils literal"><span class="pre">PATH</span></tt> の設定値を (
<tt class="docutils literal"><span class="pre">マイコンピュータ(右クリック)</span></tt> - <tt class="docutils literal"><span class="pre">プロパティ</span></tt> - <tt class="docutils literal"><span class="pre">詳細設定</span></tt> -
<tt class="docutils literal"><span class="pre">環境変数</span></tt> - <tt class="docutils literal"><span class="pre">システム環境変数</span></tt> で) django-admin.py のインストールされ
ている場所を指すように変更してください。</p>
<p>一般論として、一つの Django プロジェクトだけで作業しているなら、
<tt class="docutils literal"><span class="pre">manage.py</span></tt> を使う方が簡単といえるでしょう。 <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> と
<tt class="docutils literal"><span class="pre">DJANGO_SETTINGS_MODULE</span></tt> や <tt class="docutils literal"><span class="pre">--settings</span></tt> コマンドラインオプション
を使えば、複数の Django 設定ファイルを切替えて操作できます。</p>
<p>このドキュメント内でのコマンドライン例では、一貫して <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> を
使っていますが、実際には <tt class="docutils literal"><span class="pre">manage.py</span></tt> を使ってもかまいません。</p>
<div class="section" id="s-id1">
<h2>使い方<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="highlight"><pre><span class="sb">``</span>django-admin.py &lt;subcommand&gt; <span class="o">[</span>options<span class="o">]</span><span class="sb">``</span>
<span class="sb">``</span>manage.py &lt;subcommand&gt; <span class="o">[</span>options<span class="o">]</span><span class="sb">``</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">subcommand</span></tt> には、このドキュメントで挙げているいずれかのサブコマンド
を指定します。 <tt class="docutils literal"><span class="pre">options</span></tt> は省略可能で、このドキュメントで挙げている
ゼロ個から複数個の利用可能なオプションをサブコマンドに与えます。</p>
<div class="section" id="s-id2">
<span id="s-getting-runtime-help"></span><h3>ランタイムヘルプを取得する<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<dl class="django-admin-option">
<dt id="djadminopt--help">
<tt class="descname">--help</tt><tt class="descclassname"></tt><a class="headerlink" href="#djadminopt--help" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Django 0.96では、 <tt class="docutils literal"><span class="pre">django-admin.py</span> <span class="pre">--help</span></tt> を実行すると、利用できる全ての
サブコマンドとオプションの詳細なリストの入ったヘルプメッセージを出力します。</p>
<p>開発版のDjangoでは、 <tt class="docutils literal"><span class="pre">django-admin.py</span> <span class="pre">--help</span></tt> を実行すると、利用できる全ての
サブコマンドを出力します。 <tt class="docutils literal"><span class="pre">django-admin.py</span> <span class="pre">help</span> <span class="pre">&lt;subcommand&gt;</span></tt> を実行すると
与えられたサブコマンドで利用できるオプションの詳細なリストを出力します。</p>
</div>
<div class="section" id="s-id3">
<span id="s-app-names"></span><h3>アプリケーションの名前<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>ほとんどのサブコマンドは <tt class="docutils literal"><span class="pre">appname</span></tt> のリストを引数にとります。 <tt class="docutils literal"><span class="pre">appname</span></tt>
はモデルの入ったパッケージの名前です。例えば <tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> に
<tt class="docutils literal"><span class="pre">mysite.blog</span></tt> を追加している場合、このアプリケーションの <tt class="docutils literal"><span class="pre">appname</span></tt>
は <tt class="docutils literal"><span class="pre">blog</span></tt> です。</p>
</div>
<div class="section" id="s-id4">
<span id="s-determining-the-version"></span><h3>バージョンを表示する<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<dl class="django-admin-option">
<dt id="djadminopt--version">
<tt class="descname">--version</tt><tt class="descclassname"></tt><a class="headerlink" href="#djadminopt--version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><tt class="docutils literal"><span class="pre">django-admin.py</span> <span class="pre">--version</span></tt> を実行すると、使用しているDjangoのバージョンを表示します。</p>
<p>表示例:</p>
<div class="highlight"><pre><span class="mf">0.95</span>
<span class="mf">0.96</span>
<span class="mf">0.97</span><span class="o">-</span><span class="n">pre</span><span class="o">-</span><span class="n">SVN</span><span class="o">-</span><span class="mi">6069</span>
</pre></div>
</div>
<div class="section" id="s-id5">
<span id="s-displaying-debug-output"></span><h3>デバッグ出力を表示する<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<dl class="django-admin-option">
<dt id="djadminopt--verbosity">
<tt class="descname">--verbosity</tt><tt class="descclassname"> &lt;amount&gt;</tt><a class="headerlink" href="#djadminopt--verbosity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><tt class="docutils literal"><span class="pre">django-admin.py</span></tt> の通知情報やデバッグ情報のコンソールへの出力量を指定する
には <tt class="docutils literal"><span class="pre">--verbosity</span></tt> を使います。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">0</span></tt> だと、何も出力しません。</li>
<li><tt class="docutils literal"><span class="pre">1</span></tt> だと、通常の出力 (デフォルト) です。</li>
<li><tt class="docutils literal"><span class="pre">2</span></tt> だと、詳細に出力します。</li>
</ul>
</div>
</div>
<div class="section" id="s-id6">
<span id="s-available-subcommands"></span><h2>利用可能なサブコマンド<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-cleanup">
<h3>cleanup<a class="headerlink" href="#cleanup" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p><tt class="docutils literal"><span class="pre">cron</span></tt> によるジョブとして実行したり、直接実行したりして、データベースから
古いデータ (現時点では、有効期限の切れたセッションのみ) を消去します。</p>
</div>
<div class="section" id="s-compilemessages">
<h3>compilemessages<a class="headerlink" href="#compilemessages" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました:</span> 1.0 以前は &quot;bin/compile-message.py&quot; コマンドでした。</div>
<p><tt class="docutils literal"><span class="pre">makemessages</span></tt> で作成した .po ファイルをコンパイルして、組み込みの
gettext サポートで使えるようにします。詳しくは  <a class="reference external" href="../topics/i18n.html#topics-i18n"><em>国際化</em></a> を参照し
てください。</p>
<div class="section" id="s-locale">
<h4>--locale<a class="headerlink" href="#locale" title="Permalink to this headline">¶</a></h4>
<p>処理したいロケールを指定するには <tt class="docutils literal"><span class="pre">--locale</span></tt> または <tt class="docutils literal"><span class="pre">-l</span></tt> オプションを使
います。指定しなければ、全てのロケールを処理します。</p>
<p>使い方:</p>
<pre>django-admin.py compilemessages --locale=br_PT</pre>
</div>
</div>
<div class="section" id="s-createcachetable">
<h3>createcachetable<a class="headerlink" href="#createcachetable" title="Permalink to this headline">¶</a></h3>
<dl class="django-admin">
<dt id="djadmin-createcachetable &lt;tablename&gt;">
<tt class="descname">django-admin.py createcachetable &lt;tablename&gt;</tt><a class="headerlink" href="#djadmin-createcachetable <tablename>" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>データベースキャッシュバックエンドで使うための、 <tt class="docutils literal"><span class="pre">tablename</span></tt> という
名前のキャッシュテーブルを生成します。詳しくは <a class="reference external" href="../topics/cache.html#topics-cache"><em>Django のキャッシュフレームワーク</em></a> を参照し
てください。</p>
</div>
<div class="section" id="s-createsuperuser">
<h3>createsuperuser<a class="headerlink" href="#createsuperuser" title="Permalink to this headline">¶</a></h3>
<dl class="django-admin">
<dt id="djadmin-createsuperuser">
<tt class="descname">django-admin.py createsuperuser</tt><a class="headerlink" href="#djadmin-createsuperuser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>スーパユーザアカウント (全てのパーミッションを保有するユーザ) を作成します。
初期スーパユーザを <tt class="docutils literal"><span class="pre">syncdb</span></tt> の実行時以外の場所で作成したい場合や、プログ
ラム上でスーパユーザアカウントを生成したい場合に便利です。</p>
<p>対話的に実行すると、 <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> コマンドはスーパユーザアカウントの
パスワードを入力するよう促します。非対話的に実行した場合、パスワードは設定
されず、パスワードを手動で設定するまで、作成されたスーパユーザはログインで
きません。</p>
<dl class="django-admin-option">
<dt id="djadminopt--username">
<tt class="descname">--username</tt><tt class="descclassname"></tt><a class="headerlink" href="#djadminopt--username" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="django-admin-option">
<dt id="djadminopt--email">
<tt class="descname">--email</tt><tt class="descclassname"></tt><a class="headerlink" href="#djadminopt--email" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>新たに作成するアカウントのユーザ名と e-mail アドレスは、それぞれ
コマンドラインの <tt class="docutils literal"><span class="pre">--username</span></tt> および <tt class="docutils literal"><span class="pre">--email</span></tt> 引数で指定できます。
どちらの引数も指定しなければ、 <tt class="docutils literal"><span class="pre">createsuperuser</span></tt> は対話モードでの実行時に
入力を促します。</p>
<p>このコマンドは Django の <a class="reference external" href="../topics/auth.html#topics-auth"><em>認証システム</em></a>
(<tt class="docutils literal"><span class="pre">django.contrib.auth</span></tt>) がインストールされている時にのみ利用可能です。</p>
</div>
<div class="section" id="s-dbshell">
<h3>dbshell<a class="headerlink" href="#dbshell" title="Permalink to this headline">¶</a></h3>
<dl class="django-admin">
<dt id="djadmin-dbshell">
<tt class="descname">django-admin.py dbshell</tt><a class="headerlink" href="#djadmin-dbshell" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><tt class="docutils literal"><span class="pre">DATABASE_ENGINE</span></tt> 設定に指定されたデータベースエンジンに対し、
<tt class="docutils literal"><span class="pre">DATABASE_USER</span></tt> および <tt class="docutils literal"><span class="pre">DATABASE_PASSWORD</span></tt> 等の設定に従ってコマンドライ
ンクライアントを起動します。</p>
<ul class="simple">
<li>PostgreSQL の場合には <tt class="docutils literal"><span class="pre">psql</span></tt> を実行します。</li>
<li>MySQL の場合には <tt class="docutils literal"><span class="pre">mysql</span></tt> を実行します。</li>
<li>SQLite の場合には <tt class="docutils literal"><span class="pre">sqlite3</span></tt> を実行します。</li>
</ul>
<p>このコマンドはプログラムが <tt class="docutils literal"><span class="pre">PATH</span></tt> 上にあると想定しているので、単純に
プログラム名で呼び出したとき (<tt class="docutils literal"><span class="pre">psql</span></tt>, <tt class="docutils literal"><span class="pre">mysql</span></tt>, <tt class="docutils literal"><span class="pre">sqlite3</span></tt>) に見つかる
プログラムを使います。プログラムの場所を手動で指定する方法はありません。</p>
</div>
<div class="section" id="s-diffsettings">
<h3>diffsettings<a class="headerlink" href="#diffsettings" title="Permalink to this headline">¶</a></h3>
<dl class="django-admin">
<dt id="djadmin-diffsettings">
<tt class="descname">django-admin.py diffsettings</tt><a class="headerlink" href="#djadmin-diffsettings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>現在の設定ファイルと Django のデフォルト設定との差分を表示します。</p>
<p>デフォルト設定にない設定の末尾には <tt class="docutils literal"><span class="pre">&quot;###&quot;</span></tt> を追加します。例えば、
デフォルト設定には <tt class="docutils literal"><span class="pre">ROOT_URLCONF</span></tt> 変数がないので、 <tt class="docutils literal"><span class="pre">diffsettings</span></tt>
の出力中では <tt class="docutils literal"><span class="pre">ROOT_URLCONF</span></tt> の末尾に <tt class="docutils literal"><span class="pre">&quot;###&quot;</span></tt> が付きます。</p>
<p>デフォルト設定の完全なリストを見たければ、
<tt class="docutils literal"><span class="pre">django/conf/global_settings.py</span></tt> にある Django のデフォルト設定を参照して
ください。</p>
</div>
<div class="section" id="s-dumpdata">
<h3>dumpdata<a class="headerlink" href="#dumpdata" title="Permalink to this headline">¶</a></h3>
<dl class="django-admin">
<dt id="djadmin-dumpdata &lt;appname appname ...&gt;">
<tt class="descname">django-admin.py dumpdata &lt;appname appname ...&gt;</tt><a class="headerlink" href="#djadmin-dumpdata <appname appname ...>" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>指定したアプリケーション (複数指定可) に関係した全てのデータをデータベース
から取り出し、標準出力に出力します。</p>
<p>アプリケーション名を指定しなかった場合、インストール済みのアプリケーション
全てのデータをダンプします。</p>
<p><tt class="docutils literal"><span class="pre">dumpdata</span></tt> の出力は <tt class="docutils literal"><span class="pre">loaddata</span></tt> の入力に使えます。</p>
<p><tt class="docutils literal"><span class="pre">dumpdata</span></tt> は、ダンプするレコードを取り出すときに、モデルのデフォルトマネ
ジャを使います。デフォルトマネジャに
<a class="reference external" href="../topics/db/managers.html#custom-managers"><em>カスタムマネジャ</em></a> を使っていて、カスタムマネジャ内
でレコードの一部をフィルタしていると、一部のオブジェクトがダンプされなくな
るので注意してください。</p>
<dl class="django-admin-option">
<dt id="djadminopt--exclude">
<tt class="descname">--exclude</tt><tt class="descclassname"></tt><a class="headerlink" href="#djadminopt--exclude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>出力から、特定のアプリケーションに関するコンテンツを除外します。例えば、
<tt class="docutils literal"><span class="pre">auth</span></tt> アプリケーションのコンテンツを出力から除外したければ、以下のように
実行します:</p>
<pre>django-admin.py dumpdata --exclude=auth</pre>
<p>複数のアプリケーションを除外したければ、複数回 <tt class="docutils literal"><span class="pre">--exclude</span></tt> ディレクティブ
を使います:</p>
<pre>django-admin.py dumpdata --exclude=auth --exclude=contenttype</pre>
<dl class="django-admin-option">
<dt id="djadminopt--format">
<tt class="descname">--format</tt><tt class="descclassname"> &lt;fmt&gt;</tt><a class="headerlink" href="#djadminopt--format" title="Permalink to this definition">¶</a></dt>
<dd>デフォルトでは、 <tt class="docutils literal"><span class="pre">dumpdata</span></tt> は JSON 形式でデータを出力しますが、
<tt class="docutils literal"><span class="pre">--format</span></tt> オプションを使って別の形式を指定することもできます。現在サ
ポートしているフォーマットは <a class="reference external" href="../topics/serialization.html#serialization-formats"><em>シリアライズの形式</em></a> に列挙されて
います。</dd></dl>

<dl class="django-admin-option">
<dt id="djadminopt--indent">
<tt class="descname">--indent</tt><tt class="descclassname"> &lt;num&gt;</tt><a class="headerlink" href="#djadminopt--indent" title="Permalink to this definition">¶</a></dt>
<dd>デフォルトでは、 <tt class="docutils literal"><span class="pre">dumpdata</span></tt> はすべてのデータを1行で出力します。これは
人間にとって読みやすくありません。出力を整形するためのインデント幅のス
ペース数の指定に <tt class="docutils literal"><span class="pre">--indent</span></tt> オプションを使えます。</dd></dl>

</div>
<div class="section" id="s-flush">
<h3>flush<a class="headerlink" href="#flush" title="Permalink to this headline">¶</a></h3>
<dl class="django-admin">
<dt id="djadmin-flush">
<tt class="descname">django-admin.py flush</tt><a class="headerlink" href="#djadmin-flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>データベースを syncdb 直後の状態に戻します。全てのデータがデータベースから
除去され、同期直後に呼び出される全てのハンドラが再度実行されます。また、
<tt class="docutils literal"><span class="pre">initial_data</span></tt> フィクスチャも再インストールされます。</p>
<div class="versionchanged">
<span class="title">Django 1.0 で変更されました.</span> </div>
<p>以前は、このコマンドはデータベース上のテーブルを (<tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> に登録
されているモデルに関係しているかどうかに関わらず)  <em>全て</em> 消去していました。</p>
<p>1.0 からは、 <tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> で有効化しているモデルのテーブルだけを消去
します。</p>
<dl class="django-admin-option">
<dt id="djadminopt--noinput">
<tt class="descname">--noinput</tt><tt class="descclassname"></tt><a class="headerlink" href="#djadminopt--noinput" title="Permalink to this definition">¶</a></dt>
<dd>ユーザプロンプトでの &quot;Are you sure?&quot; のような確認メッセージの出力の抑制
には <tt class="docutils literal"><span class="pre">--noinput</span></tt> オプションを使います。対話を必要とせずに
<tt class="docutils literal"><span class="pre">django-admin.py</span></tt> を実行する自動化されたスクリプトで役に立ちます。</dd></dl>

</div>
<div class="section" id="s-inspectdb">
<h3>inspectdb<a class="headerlink" href="#inspectdb" title="Permalink to this headline">¶</a></h3>
<dl class="django-admin">
<dt id="djadmin-inspectdb">
<tt class="descname">django-admin.py inspectdb</tt><a class="headerlink" href="#djadmin-inspectdb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><tt class="docutils literal"><span class="pre">DATABASE_NAME</span></tt> 設定で指定されたデータベース上のテーブルに対するイントロ
スペクションを行い、Django モデルモジュール (<tt class="docutils literal"><span class="pre">models.py</span></tt>) を標準出力に出
力します。</p>
<p>古いデータベースを持っていて、それを Django で使いたい場合に使ってくだ
さい。スクリプトはデータベースを調べ、データベース内の各テーブルに対す
るモデルを生成します。</p>
<p>想像の通り、生成されるモデルは、テーブルの各フィールド名に対応する属性
を持ちます。 <tt class="docutils literal"><span class="pre">inspectdb</span></tt> はフィールド名の出力に際して以下のようないく
つかの特殊なケースを持っているので注意して下さい:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">inspectdb</span></tt> があるカラムの型に対して適切なモデルのフィールド型
を決定できなかった場合、 <tt class="docutils literal"><span class="pre">TextField</span></tt> が使われ、生成されたモデ
ルの該当するフィールド名の次の行に、
<tt class="docutils literal"><span class="pre">'This</span> <span class="pre">field</span> <span class="pre">type</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">guess.'</span></tt> というコメントが入ります。</li>
<li>データベースのカラム名が Python の予約語 (<tt class="docutils literal"><span class="pre">'pass'</span></tt>, <tt class="docutils literal"><span class="pre">'class'</span></tt>,
<tt class="docutils literal"><span class="pre">'for'</span></tt> など) の場合、 <tt class="docutils literal"><span class="pre">inspectdb</span></tt> は属性名の後ろに <tt class="docutils literal"><span class="pre">'_field'</span></tt>
を追加します。例えば、テーブルに <tt class="docutils literal"><span class="pre">'for'</span></tt> という名前のフィールドがあ
れば、生成されるモデルは <tt class="docutils literal"><span class="pre">'for_field'</span></tt> という名前のフィールドを持ち、
このフィールドの <tt class="docutils literal"><span class="pre">db_column</span></tt> 属性は <tt class="docutils literal"><span class="pre">'for'</span></tt> になります。
<tt class="docutils literal"><span class="pre">inspectdb</span></tt> はフィールド名の次の行に、
<tt class="docutils literal"><span class="pre">'Field</span> <span class="pre">renamed</span> <span class="pre">because</span> <span class="pre">it</span> <span class="pre">was</span> <span class="pre">a</span> <span class="pre">Python</span> <span class="pre">reserved</span> <span class="pre">word.'</span></tt> というコメ
ントを追加します。</li>
</ul>
<p>この機能は単に手間を省くためのもので、しっかりしたモデル生成を行うため
のものではありません。実行した後に生成されたモデルを自分で確かめてカス
タマイズを行うことになるでしょう。具体的には、他のモデルを参照しているよう
なモデルが正しい順番で並ぶようにします。</p>
<p>PostgreSQL や MySQL を使っている場合、イントロスペクションで主キーを自動的
に決定し、必要な場所に <tt class="docutils literal"><span class="pre">primary_key=True</span></tt> を追加します。</p>
<p><tt class="docutils literal"><span class="pre">inspectdb</span></tt> は PostgreSQL, MySQL および SQLite で動作します。外部キー
の検出は PostgreSQL と一部の MySQL テーブル形式でのみ有効です。</p>
</div>
<div class="section" id="s-loaddata-fixture-fixture">
<h3>loaddata &lt;fixture fixture ...&gt;<a class="headerlink" href="#loaddata-fixture-fixture" title="Permalink to this headline">¶</a></h3>
<p>名前付きのフィクスチャを探し、その中身をデータベースにロードします。</p>
<p><em>フィクスチャ</em> (fixture) とは、データベースに入れるデータをシリアライズして
格納したファイル群を指します。各フィクスチャファイルには固有の名前を付けら
れますが、ある名前のフィクスチャを複数のディレクトリに入れても構いませんし、
複数のアプリケーション内に配置してもかまいません。</p>
<p>Django は以下の 3 種類の場所からフィクスチャを探します:</p>
<ol class="arabic simple">
<li>インストール済みの各アプリケーションの <tt class="docutils literal"><span class="pre">fixtures</span></tt> ディレクトリ</li>
<li><tt class="docutils literal"><span class="pre">FIXTURE_DIRS</span></tt> 設定に指定したディレクトリ</li>
<li>fixture に直接指定したパス</li>
</ol>
<p>Django は上記の場所に見つかった全てのフィクスチャファイルの中から、指定した
フィクスチャ名と一致するファイルをロードします。</p>
<p>フィクスチャ名にファイル拡張子を指定すると、指定した型のフィクスチャだけが
ロードされます。例えば:</p>
<pre>django-admin.py loaddata mydata.json</pre>
<p>のようにすると、 <tt class="docutils literal"><span class="pre">mydata</span></tt> という名前の JSON フィクスチャだけがロードされ
ます。フィクスチャの拡張子は、 (<tt class="docutils literal"><span class="pre">json</span></tt> や <tt class="docutils literal"><span class="pre">xml</span></tt> のように) シリアライザ
の登録名に対応していなければなりません。</p>
<p>拡張子を省略すると、 Django は全ての形式にフィクスチャを対象にフィクスチャ
ファイルを検索します。例えば:</p>
<pre>django-admin.py loaddata mydata</pre>
<p>のようにすると、 <tt class="docutils literal"><span class="pre">mydata</span></tt> という名前の全てのフィクスチャを探します。フィ
クスチャディレクトリに <tt class="docutils literal"><span class="pre">mudata.json</span></tt> という名前のファイルがあれば、 JSON
形式のフィクスチャとしてロードされます。同じ名前で別のフィクスチャ形式のも
のが見つかった場合 (例えば、 <tt class="docutils literal"><span class="pre">mydata.json</span></tt> と <tt class="docutils literal"><span class="pre">mydata.xml</span></tt> が同じディレ
クトリ下にあった場合)、フィクスチャのインストールは中止され、それまでに
<tt class="docutils literal"><span class="pre">loaddata</span></tt> によってロードされたデータは全てデータベースから削除されます。</p>
<p>フィクスチャの名前にはディレクトリ名を入れても構いません。ディレクトリ部分
を指定すると、各検索パスに追加されます。例えば:</p>
<pre>django-admin.py loaddata foo/bar/mydata.json</pre>
<p>とすると、インストール済みの各アプリケーションのディレクトリ <tt class="docutils literal"><span class="pre">&lt;appname&gt;</span></tt>
について <tt class="docutils literal"><span class="pre">&lt;appname&gt;/fixtures/foo/bar/mydata.json</span></tt> を、 <tt class="docutils literal"><span class="pre">FIXTURE_DIRS</span></tt>
の各ディレクトリ <tt class="docutils literal"><span class="pre">&lt;dirname&gt;</span></tt> について <tt class="docutils literal"><span class="pre">&lt;dirname&gt;/foo/bar/mydata.json</span></tt>
を、そして相対パス <tt class="docutils literal"><span class="pre">foo/bar/mydata.json</span></tt> を探します。</p>
<p>フィクスチャファイルの処理順は決まっていませんが、全てのフィクスチャのイン
ストールは単一のトランザクションで行われるため、あるフィクスチャが別のフィ
クスチャに対する参照を持っていてもかまいません。データベースバックエンドが
行レベルの制約 (row-level constraint) をサポートしているばあい、制約はトラ
ンザクションの最後にチェックされます。</p>
<p><tt class="docutils literal"><span class="pre">dumpdata</span></tt> コマンドを使うと、 <tt class="docutils literal"><span class="pre">loaddata</span></tt> の入力データを生成できます。</p>
<div class="admonition-mysql admonition">
<p class="first admonition-title">MySQL とフィクスチャ</p>
<p class="last">残念ながら、MySQL は Django のフィクスチャに関する全ての機能を利用でき
るわけではありません。 MyISAM を使っている場合、 MySQL はトランザクショ
ンや制約をサポートしていないので、複数のフィクスチャファイルに対するロー
ルバックを行えず、フィクスチャデータの検証も行えません。一方、 InnoDB
を使っている場合、データファイル間で前方参照を行えません。 MySQL は行制
約のチェックをトランザクションコミット直前まで遅延するためのメカニズム
を備えていないからです。</p>
</div>
<div class="section" id="s-verbosity">
<h4>--verbosity<a class="headerlink" href="#verbosity" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">django-admin.py</span></tt> のメッセージの通知やデバッグ情報のコンソールへの出力量を
指定するには <tt class="docutils literal"><span class="pre">--verbosity</span></tt> を使います。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">0</span></tt> だと、何も出力しません。</li>
<li><tt class="docutils literal"><span class="pre">1</span></tt> だと、通常の出力 (デフォルト) です。</li>
<li><tt class="docutils literal"><span class="pre">2</span></tt> だと、詳細に出力します。</li>
</ul>
<p>使用例:</p>
<pre>django-admin.py loaddata --verbosity=2</pre>
</div>
</div>
<div class="section" id="s-makemessages">
<h3>makemessages<a class="headerlink" href="#makemessages" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました:</span> 1.0 より前のバージョンでは、 &quot;bin/make-messages.py&quot; コマンドでした。</div>
<p>現在のディレクトリ以下にあるソースツリー全体を走査して、翻訳対象にマークさ
れている文字列全てを取り出します。django のソースツリー上で行った場合には
<tt class="docutils literal"><span class="pre">conf/locale</span></tt> 下に、プロジェクトやアプリケーションのソースツリー上で行っ
た場合には <tt class="docutils literal"><span class="pre">locale</span></tt> 下にメッセージファイルを作成します。メッセージファイ
ルに変更があった場合、 <tt class="docutils literal"><span class="pre">compilemessages</span></tt> でファイルをコンパイルして、組み
込みの gettext サポートで利用できるようにしてください。詳しくは
<a class="reference external" href="../topics/i18n.html#how-to-create-language-files"><em>i18n のドキュメント</em></a> を参照してください。</p>
<div class="section" id="s-all">
<h4>--all<a class="headerlink" href="#all" title="Permalink to this headline">¶</a></h4>
<p>全ての言語のメッセージファイルを更新するには <tt class="docutils literal"><span class="pre">--all</span></tt> または <tt class="docutils literal"><span class="pre">-a</span></tt> を使っ
てください。</p>
<p>使い方:</p>
<pre>django-admin.py makemessages --all</pre>
</div>
<div class="section" id="s-extension">
<h4>--extension<a class="headerlink" href="#extension" title="Permalink to this headline">¶</a></h4>
<p>メッセージを取り出す対象に含めるファイルの拡張子を指定するには
<tt class="docutils literal"><span class="pre">--extension</span></tt> または <tt class="docutils literal"><span class="pre">-e</span></tt> オプションを使います(デフォルトは &quot;.html&quot; で
す)。</p>
<p>使い方:</p>
<pre>django-admin.py makemessages --locale=de --extension xhtml</pre>
<p>複数の拡張子を指定するには、カンマで区切るか、 <tt class="docutils literal"><span class="pre">--extension</span></tt> や <tt class="docutils literal"><span class="pre">-e</span></tt>
を複数使います:</p>
<pre>django-admin.py makemessages --locale=de --extension=html,txt --extension xml</pre>
</div>
<div class="section" id="s-id7">
<h4>--locale<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>処理したいロケールを指定するには <tt class="docutils literal"><span class="pre">--locale</span></tt> または <tt class="docutils literal"><span class="pre">-l</span></tt> オプションを使
います。</p>
<p>使い方:</p>
<pre>django-admin.py makemessages --locale=br_PT</pre>
</div>
<div class="section" id="s-domain">
<h4>--domain<a class="headerlink" href="#domain" title="Permalink to this headline">¶</a></h4>
<p>メッセージファイルのドメインを変更するには <tt class="docutils literal"><span class="pre">--domain</span></tt> または <tt class="docutils literal"><span class="pre">-d</span></tt> オプ
ションを使ってください。</p>
<p>現在サポートしているのは、以下のドメインです:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">django</span></tt>: <tt class="docutils literal"><span class="pre">*.py</span></tt> ファイルと <tt class="docutils literal"><span class="pre">*.html</span></tt> ファイル (デフォルト)</li>
<li><tt class="docutils literal"><span class="pre">djangojs</span></tt>: <tt class="docutils literal"><span class="pre">*.js</span></tt> ファイル</li>
</ul>
</div>
<div class="section" id="s-id8">
<h4>--verbosity<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">django-admin.py</span></tt> の通知情報やデバッグ情報のコンソールへの出力量を指定する
には <tt class="docutils literal"><span class="pre">--verbosity</span></tt> または <tt class="docutils literal"><span class="pre">-v</span></tt> を使います。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">0</span></tt> だと、何も出力しません。</li>
<li><tt class="docutils literal"><span class="pre">1</span></tt> だと、通常の出力 (デフォルト) です。</li>
<li><tt class="docutils literal"><span class="pre">2</span></tt> だと、詳細に出力します。</li>
</ul>
<p>使い方:</p>
<pre>django-admin.py makemessages --verbosity=2</pre>
</div>
</div>
<div class="section" id="s-reset-appname-appname">
<h3>reset &lt;appname appname ...&gt;<a class="headerlink" href="#reset-appname-appname" title="Permalink to this headline">¶</a></h3>
<p>指定した appname に対して <tt class="docutils literal"><span class="pre">sqlreset</span></tt> と同じ操作を実行します。</p>
<div class="section" id="s-noinput">
<h4>--noinput<a class="headerlink" href="#noinput" title="Permalink to this headline">¶</a></h4>
<p>ユーザプロンプトでの &quot;Are you sure?&quot; のような確認メッセージの出力の抑制には
<tt class="docutils literal"><span class="pre">--noinput</span></tt> オプションを使います。対話を必要とせずに <tt class="docutils literal"><span class="pre">django-admin.py</span></tt>
を実行する自動化されたスクリプトで役に立ちます。</p>
</div>
</div>
<div class="section" id="s-runfcgi-options">
<h3>runfcgi [options]<a class="headerlink" href="#runfcgi-options" title="Permalink to this headline">¶</a></h3>
<p>FastCGI プロトコルをサポートする Web サーバ向けの一連の FastCGI プロセス群
を起動します。詳しくは <a class="reference external" href="../howto/deployment/fastcgi.html#howto-deployment-fastcgi"><em>FastCGI による運用</em></a>
を参照してください。 Python の FastCGI インタフェースモジュールである
<a class="reference external" href="http://www.saddi.com/software/flup/">flup</a> が必要です。</p>
</div>
<div class="section" id="s-runserver-optional-port-number-or-ipaddr-port">
<h3>runserver [optional port number, or ipaddr:port]<a class="headerlink" href="#runserver-optional-port-number-or-ipaddr-port" title="Permalink to this headline">¶</a></h3>
<p>ローカルマシン上に軽量な開発用ウェブサーバを立ち上げます。デフォルトでは、
サーバは IP アドレス 127.0.0.1、ポート番号 8000 で動作します。 IP アドレス
やポート番号は明示的に指定できます。</p>
<p>このスクリプトを通常ユーザの権限下で実行した場合 (そうするように勧めます)、
ポート番号を低い値にできないかもしれません。値の低いポート番号はスーパユー
ザ (root) 用に予約されているからです。</p>
<p><strong>開発用サーバをプロダクションサーバとして使ってはなりません。</strong> 開発用サー
バはセキュリティ検査もパフォーマンステストも行われていません(我々が目指して
いるのは Web フレームワークの開発であり、このサーバを改良して運用環境でも利
用できるようにするのは Django プロジェクトの目的とするところではありません。)</p>
<p>開発サーバはリクエストを受け付ける度に、必要に応じて自動的に Python コード
をリロードします。このため、コードの変更を反映させるためにいちいちサーバを
際起動しなくてもよくなっています。</p>
<p>サーバの起動時や、サーバの稼働中に Python コードを変更した場合、開発用サー
バはインストールされている全てのモデルを自動的に検証します (後述の
<tt class="docutils literal"><span class="pre">validate</span></tt> オプションを参照してください)。検証時にエラーが見つかった場合、
エラーは標準出力に出力されますが、サーバは停止しません。</p>
<p>ポート番号を別々にしているかぎりいくつでもサーバを起動できます。
<tt class="docutils literal"><span class="pre">django-admin.py</span> <span class="pre">runserver</span></tt> を複数回起動するだけです。</p>
<p>デフォルトの IP アドレスである 127.0.0.1 は、ネットワーク上の他のマシンから
は利用できません。開発サーバをネットワーク上の他のマシンから見えるようにす
るには、サーバホスト固有の IP アドレス (例えば <tt class="docutils literal"><span class="pre">192.168.2.1</span></tt>) または
<tt class="docutils literal"><span class="pre">0.0.0.0</span></tt> を使って下さい。</p>
<div class="section" id="s-adminmedia">
<h4>--adminmedia<a class="headerlink" href="#adminmedia" title="Permalink to this headline">¶</a></h4>
<p>Django 管理インタフェース用の CSS や JavaScript ファイルを探す場所を Django に
教えるには <tt class="docutils literal"><span class="pre">--adminmedia</span></tt> オプションを使います。通常、これらのファイルは
Django のソースツリーから探索されて配信されるようになっていますが、自作のサイト
用に変更を加えた CSS や JavaScript を指定したい場合には、このオプションを使いま
す。</p>
<p>使用例:</p>
<pre>django-admin.py runserver --adminmedia=/tmp/new-admin-style/</pre>
</div>
<div class="section" id="s-noreload">
<h4>--noreload<a class="headerlink" href="#noreload" title="Permalink to this headline">¶</a></h4>
<p>自動リロード機能の使用を無効にするには <tt class="docutils literal"><span class="pre">--noreload</span></tt> オプションを使います。
これが意味するところは、サーバの稼働中にいかなる Python コードの変更も検知
<em>せず</em> 既にメモリ上に読み込まれている Python モジュールが利用されます。</p>
<p>使用例:</p>
<pre>django-admin.py runserver --noreload</pre>
</div>
<div class="section" id="s-ip">
<span id="s-examples-of-using-different-ports-and-addresses"></span><h4>異なる IP アドレスとポート番号を使用する例<a class="headerlink" href="#ip" title="Permalink to this headline">¶</a></h4>
<p>IP アドレス 127.0.0.1、ポート番号 8000:</p>
<pre>django-admin.py runserver</pre>
<p>IP アドレス 1.2.3.4、ポート番号 8000:</p>
<pre>django-admin.py runserver 1.2.3.4:8000</pre>
<p>IP アドレス 127.0.0.1、ポート番号 7000:</p>
<pre>django-admin.py runserver 7000</pre>
<p>IP アドレス 1.2.3.4、ポート番号 7000:</p>
<pre>django-admin.py runserver 1.2.3.4:7000</pre>
</div>
<div class="section" id="s-id9">
<span id="s-serving-static-files-with-the-development-server"></span><h4>開発用サーバで静的なファイルを提供する<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>デフォルトでは、開発用サーバはサイト用の静的ファイル (CSSファイル、画像、
<tt class="docutils literal"><span class="pre">MEDIA_URL</span></tt> 下のファイルなど) を全く提供しません。 Django に静的メディ
アを提供させたければ、 <a class="reference external" href="../howto/static-files.html#howto-static-files"><em>静的なファイルの提供方法</em></a>
を参照してください。</p>
</div>
<div class="section" id="s-auto-reload">
<span id="s-turning-off-auto-reload"></span><h4>auto-reload を切る<a class="headerlink" href="#auto-reload" title="Permalink to this headline">¶</a></h4>
<p>開発サーバの起動中にコードのオートリロードが起きるのを止めたければ、以下の
ように <tt class="docutils literal"><span class="pre">--noreload</span></tt> オプションを使ってください:</p>
<pre>django-admin.py runserver --noreload</pre>
</div>
</div>
<div class="section" id="s-shell">
<h3>shell<a class="headerlink" href="#shell" title="Permalink to this headline">¶</a></h3>
<p>Python の対話インタプリタを起動します。</p>
<p><a class="reference external" href="http://ipython.scipy.org/">IPython</a> がインストールされている場合、Django は IPython を使おうとします。
IPython がインストールされていて、かつ「普通の」インタプリタを使いたいのな
ら、以下のように <tt class="docutils literal"><span class="pre">--plain</span></tt> オプションを使って下さい:</p>
<pre>django-admin.py shell --plain</pre>
</div>
<div class="section" id="s-sql-appname-appname">
<h3>sql &lt;appname appname ...&gt;<a class="headerlink" href="#sql-appname-appname" title="Permalink to this headline">¶</a></h3>
<p>指定した appname の CREATE TABLE SQL 文を出力します。</p>
</div>
<div class="section" id="s-sqlall-appname-appname">
<h3>sqlall &lt;appname appname ...&gt;<a class="headerlink" href="#sqlall-appname-appname" title="Permalink to this headline">¶</a></h3>
<p>指定した appname の CREATE TABLE および初期カスタム SQL の発行、データ入力
のための SQL 文を出力します。</p>
<p>初期カスタム SQL の指定方法は <tt class="docutils literal"><span class="pre">sqlcustom</span></tt> の説明を参照してください。</p>
</div>
<div class="section" id="s-sqlclear-appname-appname">
<h3>sqlclear &lt;appname appname ...&gt;<a class="headerlink" href="#sqlclear-appname-appname" title="Permalink to this headline">¶</a></h3>
<p>指定した appname の DROP TABLE SQL 文を出力します。</p>
</div>
<div class="section" id="s-sqlcustom-appname-appname">
<h3>sqlcustom &lt;appname appname ...&gt;<a class="headerlink" href="#sqlcustom-appname-appname" title="Permalink to this headline">¶</a></h3>
<p>指定した appname のカスタム SQL 文を出力します。</p>
<p>このコマンドは、指定した各アプリケーションのモデルについて、 <tt class="docutils literal"><span class="pre">&lt;appname&gt;</span></tt>
をアプリケーションの名前、 <tt class="docutils literal"><span class="pre">&lt;modelname&gt;</span></tt> をモデルの名前を全て小文字にした
文字列として、 <tt class="docutils literal"><span class="pre">&lt;appname&gt;/sql/&lt;modelname&gt;.sql</span></tt> という名前のファイルを探し
ます。例えば、 <tt class="docutils literal"><span class="pre">news</span></tt> というアプリケーションで <tt class="docutils literal"><span class="pre">Story</span></tt> というモデルが定
義されていれば、 <tt class="docutils literal"><span class="pre">sqlcustom</span></tt> は <tt class="docutils literal"><span class="pre">news/sql/story.sql</span></tt> というファイルを探
して読みだし、その内容をこのコマンドの出力の末尾に追加します。</p>
<p>各 SQL ファイルには、有効な SQL を入れることになっています。 SQL ファイルの
内容は、モデルのテーブル生成文を全て実行した後に、データベースに直接パイプ
されます。テーブルに対して変更を加えたり、 SQL 関数をデータベースに組み込む
には、この SQL フックを使ってください。</p>
</div>
<div class="section" id="s-sqlflush">
<h3>sqlflush<a class="headerlink" href="#sqlflush" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#flush">flush</a> コマンドによって実行されるのと等価な SQL 文を出力します。</p>
</div>
<div class="section" id="s-sqlindexes-appname-appname">
<h3>sqlindexes &lt;appname appname ...&gt;<a class="headerlink" href="#sqlindexes-appname-appname" title="Permalink to this headline">¶</a></h3>
<p>指定したアプリケーションに対する CREATE INDEX SQL 文を出力します。</p>
</div>
<div class="section" id="s-sqlreset-appname-appname">
<h3>sqlreset &lt;appname appname ...&gt;<a class="headerlink" href="#sqlreset-appname-appname" title="Permalink to this headline">¶</a></h3>
<p>指定した appname に対する DROP TABLE SQL 文を出力し、
その後で CREATE TABLE SQL 文を出力します。</p>
</div>
<div class="section" id="s-sqlsequencereset-appname-appname">
<h3>sqlsequencereset &lt;appname appname ...&gt;<a class="headerlink" href="#sqlsequencereset-appname-appname" title="Permalink to this headline">¶</a></h3>
<p>指定した appname のシークエンスをリセットするためのSQL 文を出力します。</p>
<p>詳しくは <a class="reference external" href="http://simon.incutio.com/archive/2004/04/21/postgres">http://simon.incutio.com/archive/2004/04/21/postgres</a> を参照し
てください。</p>
</div>
<div class="section" id="s-startapp-appname">
<h3>startapp &lt;appname&gt;<a class="headerlink" href="#startapp-appname" title="Permalink to this headline">¶</a></h3>
<p>現在のディレクトリに、 appname に指定した名前の Django アプリケーショ
ンディレクトリ階層を作成します。</p>
</div>
<div class="section" id="s-startproject-projectname">
<h3>startproject &lt;projectname&gt;<a class="headerlink" href="#startproject-projectname" title="Permalink to this headline">¶</a></h3>
<p>現在のディレクトリに、 projectname に指定した名前の Django プロジェク
トディレクトリ階層を作成します。</p>
<p><tt class="docutils literal"><span class="pre">--settings</span></tt> オプションを指定して <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> を呼び出したときや、
環境変数 <tt class="docutils literal"><span class="pre">DJANGO_SETTINGS_MODULE</span></tt> が指定されていると、このコマンドを使え
ません。 <tt class="docutils literal"><span class="pre">startproject</span></tt> を使いたければ、 <tt class="docutils literal"><span class="pre">--settings</span></tt> オプションを外し、
<tt class="docutils literal"><span class="pre">DJANGO_SETTINGS_MODULE</span></tt> を unset してください。</p>
</div>
<div class="section" id="s-syncdb">
<h3>syncdb<a class="headerlink" href="#syncdb" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> に登録されており、まだテーブルを作成していないアプリケー
ション全てのテーブルを作成します。</p>
<p>このコマンドは、新たなアプリケーションをプロジェクトに追加し、データベース
にインストールしたい場合に使って下さい。アプリケーションには、 Django に付
属しているアプリケーションで、デフォルトで <tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> に入っている
ものも含みます。新たなプロジェクトを開始する際には、このコマンドを実行して
デフォルトのアプリケーションをインストールする必要があります。</p>
<div class="admonition-syncdb admonition">
<p class="first admonition-title"><tt class="docutils literal"><span class="pre">syncdb</span></tt> は既存のテーブルを置き換えません</p>
<p><tt class="docutils literal"><span class="pre">syncdb</span></tt> は、インストールされていないモデルのテーブルしか作成しません。
すでにインストールされているモデルクラスに変更を行っても、それに合わせる
ように <tt class="docutils literal"><span class="pre">ALTER</span> <span class="pre">TABLE</span></tt> を発行することは <em>決してありません</em> 。モデルクラ
スやデータベーススキーマに対する変更には、何らかの形であいまいな部分があ
るものです。そのあいまいな部分に対して、 Django どのように変更を適用すべ
きか正しく判断せねばならないとすれば、変更の過程で重要なデータが失われる
というリスクが生まれてしまいます。</p>
<p class="last">モデルに変更を適用した後、変更に合わせてデータベーステーブルも置き換えた
いのなら、 <tt class="docutils literal"><span class="pre">sql</span></tt> コマンドを使って新たな SQL を出力し、既存のテーブルス
キーマと比較して、手動で変更を適用してください。</p>
</div>
<p><tt class="docutils literal"><span class="pre">django.contrib.auth</span></tt> アプリケーションをインストールした場合には、
<tt class="docutils literal"><span class="pre">syncdb</span></tt> はスーパユーザを作成するか尋ねます。</p>
<p><tt class="docutils literal"><span class="pre">syncdb</span></tt> はまた、 <tt class="docutils literal"><span class="pre">initial_data</span></tt> という名前で、適切な拡張子 (<tt class="docutils literal"><span class="pre">json</span></tt>
や <tt class="docutils literal"><span class="pre">xml</span></tt> など) のフィクスチャを探してインストールします。フィクスチャデー
タファイルの詳細は <tt class="docutils literal"><span class="pre">loaddata</span></tt> のドキュメントを参照してください。</p>
<div class="section" id="s-id10">
<h4>--verbosity<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">django-admin.py</span></tt> の通知情報やデバッグ情報のコンソールへの出力量を指定する
には <tt class="docutils literal"><span class="pre">--verbosity</span></tt> を使います。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">0</span></tt> だと、何も出力しません。</li>
<li><tt class="docutils literal"><span class="pre">1</span></tt> だと、通常の出力 (デフォルト) です。</li>
<li><tt class="docutils literal"><span class="pre">2</span></tt> だと、詳細に出力します。</li>
</ul>
<p>使用例:</p>
<pre>django-admin.py syncdb --verbosity=2</pre>
</div>
<div class="section" id="s-id11">
<h4>--noinput<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>ユーザプロンプトでの &quot;Are you sure?&quot; のような確認メッセージの出力の抑制には
<tt class="docutils literal"><span class="pre">--noinput</span></tt> オプションを使います。対話を必要とせずに <tt class="docutils literal"><span class="pre">django-admin.py</span></tt>
を実行する自動化されたスクリプトで役に立ちます。</p>
</div>
</div>
<div class="section" id="s-test">
<h3>test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p>インストールされている全てのモデルについてテストを実行します。
詳しくは <a class="reference external" href="../topics/testing.html#topics-testing"><em>Django アプリケーションのテスト</em></a> を参照して
ください。</p>
<div class="section" id="s-id12">
<h4>--noinput<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>ユーザプロンプトでの &quot;Are you sure?&quot; のような確認メッセージの出力の抑制には
<tt class="docutils literal"><span class="pre">--noinput</span></tt> オプションを使います。対話を必要とせずに <tt class="docutils literal"><span class="pre">django-admin.py</span></tt>
を実行する自動化されたスクリプトで役に立ちます。</p>
</div>
<div class="section" id="s-id13">
<h4>--verbosity<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">django-admin.py</span></tt> の通知情報やデバッグ情報のコンソールへの出力量を指定する
には <tt class="docutils literal"><span class="pre">--verbosity</span></tt> を使います。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">0</span></tt> だと、何も出力しません。</li>
<li><tt class="docutils literal"><span class="pre">1</span></tt> だと、通常の出力 (デフォルト) です。</li>
<li><tt class="docutils literal"><span class="pre">2</span></tt> だと、詳細に出力します。</li>
</ul>
<p>使用例:</p>
<pre>django-admin.py test --verbosity=2</pre>
</div>
</div>
<div class="section" id="s-testserver-fixture-fixture">
<h3>testserver &lt;fixture fixture ...&gt;<a class="headerlink" href="#testserver-fixture-fixture" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>指定したフィクスチャを使って、 (<tt class="docutils literal"><span class="pre">runserver</span></tt> と同様に) 開発用サーバを起動
します。</p>
<p>例えば、次のコマンド:</p>
<pre>django-admin.py testserver mydata.json</pre>
<p>を実行すると、以下のようなステップを実行します:</p>
<ol class="arabic simple">
<li><a class="reference external" href="../topics/testing.html#topics-testing"><em>Djangoアプリケーションのテスト</em></a> 手順に従って、テストデータベース
を生成します。</li>
<li>指定したフィクスチャを使ってテストデータベースに値を入れます (フィク
スチャの説明は <tt class="docutils literal"><span class="pre">loaddata</span></tt> ドキュメントを参照してください)。</li>
<li>生成したテストデータベースを使って (<tt class="docutils literal"><span class="pre">runserver</span></tt> と同様に) 開発サー
バを実行します。</li>
</ol>
<p><tt class="docutils literal"><span class="pre">testserver</span></tt> が便利な局面はいくつかあります:</p>
<ul class="simple">
<li>特定のフィクスチャデータに対するビューの動作を調べるための
<a class="reference external" href="../topics/testing.html#topics-testing"><em>ユニットテスト</em></a> を書いている際に、ブラウザでの
表示を手動で調べるのに <tt class="docutils literal"><span class="pre">testserver</span></tt> を使えます。</li>
<li>Django アプリケーションを開発していて、「無垢の状態の」データベースを
使って操作してみたいとしましょう。データベースを (前述の <tt class="docutils literal"><span class="pre">dumpdata</span></tt>
コマンドを使って) フィクスチャとしてダンプしておき、 <tt class="docutils literal"><span class="pre">testserver</span></tt>
を使って Web アプリケーションを実行すれば、アプリケーション上でどんな
操作を行っても、変更はテストデータベースにしか加えられないので、好き
にデータベースを「汚せ」ます。</li>
</ul>
<p><tt class="docutils literal"><span class="pre">runserver</span></tt> は動作中に Python のソースコード上に加えられた変更を自動的に
検出しますが、 <tt class="docutils literal"><span class="pre">testserver</span></tt> は検出しません。ただし、テンプレートへの変更
は検出します。</p>
<div class="section" id="s-addrport-port-number-or-ipaddr-port">
<h4>--addrport [port number or ipaddr:port]<a class="headerlink" href="#addrport-port-number-or-ipaddr-port" title="Permalink to this headline">¶</a></h4>
<p>IP アドレスやポート番号を 127.0.0.1:8000 から変更するには、 <tt class="docutils literal"><span class="pre">--addrport</span></tt>
を使います。この値は、 <tt class="docutils literal"><span class="pre">runserver</span></tt> サブコマンドの引数と同じ形式で指定し、
意味も同じです。</p>
<p>テストサーバをポート 7000 で起動し、 <tt class="docutils literal"><span class="pre">fixture1</span></tt> および <tt class="docutils literal"><span class="pre">fixture2</span></tt> のテ
ストを実施するには、以下のようにします:</p>
<pre>django-admin.py testserver --addrport 7000 fixture1 fixture2
django-admin.py testserver fixture1 fixture2 --addrport 7000</pre>
<p>(上の二つのコマンドは互いに等価です。オプションはフィクスチャを指定するため
の引数の前にきても後ろに来てもかまいません。)</p>
<p><tt class="docutils literal"><span class="pre">test</span></tt> フィクスチャを 1.2.3.4:7000 で実行するには、以下のようにします:</p>
<pre>django-admin.py testserver --addrport 1.2.3.4:7000 test</pre>
</div>
<div class="section" id="s-id14">
<h4>--verbosity<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">django-admin.py</span></tt> の通知情報やデバッグ情報のコンソールへの出力量を指定する
には <tt class="docutils literal"><span class="pre">--verbosity</span></tt> を使います。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">0</span></tt> だと、何も出力しません。</li>
<li><tt class="docutils literal"><span class="pre">1</span></tt> だと、通常の出力 (デフォルト) です。</li>
<li><tt class="docutils literal"><span class="pre">2</span></tt> だと、詳細に出力します。</li>
</ul>
<p>使用例:</p>
<pre>django-admin.py testserver --verbosity=2</pre>
</div>
</div>
<div class="section" id="s-validate">
<h3>validate<a class="headerlink" href="#validate" title="Permalink to this headline">¶</a></h3>
<p>インストールされている (<tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> に登録されている) 全てのモ
デルを検証 (validate) し、エラーがあれば標準出力に出力します。</p>
</div>
</div>
<div class="section" id="s-id15">
<span id="s-default-options"></span><h2>デフォルトのオプション<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<p>各々のサブコマンドの独自のオプションの他に、以下の共通のオプションがありま
す:</p>
<div class="section" id="s-pythonpath">
<h3>--pythonpath<a class="headerlink" href="#pythonpath" title="Permalink to this headline">¶</a></h3>
<p>使用例:</p>
<pre>django-admin.py syncdb --pythonpath='/home/djangoprojects/myproject'</pre>
<p>指定したファイルシステムパスを Python の <a class="reference external" href="http://diveintopython.org/getting_to_know_python/everything_is_an_object.html">import 検索パス</a> に追加
します。このオプションを指定しない場合、 <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> は環境変
数 <tt class="docutils literal"><span class="pre">PYTHONPATH</span></tt> を使います。</p>
<p><tt class="docutils literal"><span class="pre">manage.py</span></tt> は Python パスをきちんと設定してくれるので、このオプション
は必要ありません。</p>
</div>
<div class="section" id="s-settings">
<h3>--settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h3>
<p>使用例:</p>
<pre>django-admin.py init --settings=mysite.settings</pre>
<p>管理対象のプロジェクトの設定モジュールを明示的に指定します。設定モジュー
ルは Python のパッケージ表現構文、すなわち &quot;mysite.settings&quot; のような形式で
指定します。このオプションを指定しない場合、 <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> は環境変数
<tt class="docutils literal"><span class="pre">DJANGO_SETTINGS_MODULE</span></tt> を使います。</p>
<p><tt class="docutils literal"><span class="pre">manage.py</span></tt> はデフォルトで現在のプロジェクトの <tt class="docutils literal"><span class="pre">settings.py</span></tt> を使うので、
通常はこのオプションは必要ありません。</p>
</div>
<div class="section" id="s-traceback">
<h3>--traceback<a class="headerlink" href="#traceback" title="Permalink to this headline">¶</a></h3>
<p>使用例:</p>
<pre>django-admin.py syncdb --traceback</pre>
<p>デフォルトでは、 <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> はエラーが起きるたびに簡単なエラーメッ
セージを表示します。 <tt class="docutils literal"><span class="pre">--traceback</span></tt> を指定すると <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> は
例外が送出された際に完全なスタックトレースを出力します。</p>
</div>
</div>
<div class="section" id="s-id16">
<span id="s-extra-niceties"></span><h2>その他のからくり<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-id17">
<h3>シンタクスの色づけ<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<p>SQL 文を標準出力に出力する <tt class="docutils literal"><span class="pre">django-admin.py</span></tt> / <tt class="docutils literal"><span class="pre">manage.py</span></tt> コマンドは、
端末が ANSI カラー出力をサポートする場合にはコードを色づけして表示します。
ただし、出力を別のプログラムにパイプしている場合には色づけを行いません。</p>
</div>
<div class="section" id="s-bash">
<h3>bash での補完<a class="headerlink" href="#bash" title="Permalink to this headline">¶</a></h3>
<p>bash シェルを使っているのなら、 Django の bash 補完スクリプトのインストール
を検討してみてください。スクリプトは Django 配布物の
<tt class="docutils literal"><span class="pre">extras/django_bash_completion</span></tt> にあります。 bash 補完機能を使うと、
<tt class="docutils literal"><span class="pre">django-admin.py</span></tt> および <tt class="docutils literal"><span class="pre">manage.py</span></tt> コマンドをタブ補完できるようになり
ます。例えば:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">django-admin.py</span></tt> とタイプします。</li>
<li>[TAB] を押すと、利用可能な全てのオプションを表示します。</li>
<li><tt class="docutils literal"><span class="pre">sql</span></tt> とタイプして [TAB] を押すと、 <tt class="docutils literal"><span class="pre">sql</span></tt> で始まる全てのオプショ
ンを表示します。</li>
</ul>
</div>
<div class="section" id="s-id18">
<h3>アクションの自作<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<p>アクションを自作するには、 <a class="reference external" href="../howto/custom-management-commands.html#howto-custom-management-commands"><em>アクションを自作する</em></a> を参照し
てください。</p>
</div>
</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference external" href="">django-admin.py と manage.py</a><ul>
<li><a class="reference external" href="#id1">使い方</a><ul>
<li><a class="reference external" href="#id2">ランタイムヘルプを取得する</a></li>
<li><a class="reference external" href="#id3">アプリケーションの名前</a></li>
<li><a class="reference external" href="#id4">バージョンを表示する</a></li>
<li><a class="reference external" href="#id5">デバッグ出力を表示する</a></li>
</ul>
</li>
<li><a class="reference external" href="#id6">利用可能なサブコマンド</a><ul>
<li><a class="reference external" href="#cleanup">cleanup</a></li>
<li><a class="reference external" href="#compilemessages">compilemessages</a><ul>
<li><a class="reference external" href="#locale">&#8211;locale</a></li>
</ul>
</li>
<li><a class="reference external" href="#createcachetable">createcachetable</a></li>
<li><a class="reference external" href="#createsuperuser">createsuperuser</a></li>
<li><a class="reference external" href="#dbshell">dbshell</a></li>
<li><a class="reference external" href="#diffsettings">diffsettings</a></li>
<li><a class="reference external" href="#dumpdata">dumpdata</a></li>
<li><a class="reference external" href="#flush">flush</a></li>
<li><a class="reference external" href="#inspectdb">inspectdb</a></li>
<li><a class="reference external" href="#loaddata-fixture-fixture">loaddata &lt;fixture fixture ...&gt;</a><ul>
<li><a class="reference external" href="#verbosity">&#8211;verbosity</a></li>
</ul>
</li>
<li><a class="reference external" href="#makemessages">makemessages</a><ul>
<li><a class="reference external" href="#all">&#8211;all</a></li>
<li><a class="reference external" href="#extension">&#8211;extension</a></li>
<li><a class="reference external" href="#id7">&#8211;locale</a></li>
<li><a class="reference external" href="#domain">&#8211;domain</a></li>
<li><a class="reference external" href="#id8">&#8211;verbosity</a></li>
</ul>
</li>
<li><a class="reference external" href="#reset-appname-appname">reset &lt;appname appname ...&gt;</a><ul>
<li><a class="reference external" href="#noinput">&#8211;noinput</a></li>
</ul>
</li>
<li><a class="reference external" href="#runfcgi-options">runfcgi [options]</a></li>
<li><a class="reference external" href="#runserver-optional-port-number-or-ipaddr-port">runserver [optional port number, or ipaddr:port]</a><ul>
<li><a class="reference external" href="#adminmedia">&#8211;adminmedia</a></li>
<li><a class="reference external" href="#noreload">&#8211;noreload</a></li>
<li><a class="reference external" href="#ip">異なる IP アドレスとポート番号を使用する例</a></li>
<li><a class="reference external" href="#id9">開発用サーバで静的なファイルを提供する</a></li>
<li><a class="reference external" href="#auto-reload">auto-reload を切る</a></li>
</ul>
</li>
<li><a class="reference external" href="#shell">shell</a></li>
<li><a class="reference external" href="#sql-appname-appname">sql &lt;appname appname ...&gt;</a></li>
<li><a class="reference external" href="#sqlall-appname-appname">sqlall &lt;appname appname ...&gt;</a></li>
<li><a class="reference external" href="#sqlclear-appname-appname">sqlclear &lt;appname appname ...&gt;</a></li>
<li><a class="reference external" href="#sqlcustom-appname-appname">sqlcustom &lt;appname appname ...&gt;</a></li>
<li><a class="reference external" href="#sqlflush">sqlflush</a></li>
<li><a class="reference external" href="#sqlindexes-appname-appname">sqlindexes &lt;appname appname ...&gt;</a></li>
<li><a class="reference external" href="#sqlreset-appname-appname">sqlreset &lt;appname appname ...&gt;</a></li>
<li><a class="reference external" href="#sqlsequencereset-appname-appname">sqlsequencereset &lt;appname appname ...&gt;</a></li>
<li><a class="reference external" href="#startapp-appname">startapp &lt;appname&gt;</a></li>
<li><a class="reference external" href="#startproject-projectname">startproject &lt;projectname&gt;</a></li>
<li><a class="reference external" href="#syncdb">syncdb</a><ul>
<li><a class="reference external" href="#id10">&#8211;verbosity</a></li>
<li><a class="reference external" href="#id11">&#8211;noinput</a></li>
</ul>
</li>
<li><a class="reference external" href="#test">test</a><ul>
<li><a class="reference external" href="#id12">&#8211;noinput</a></li>
<li><a class="reference external" href="#id13">&#8211;verbosity</a></li>
</ul>
</li>
<li><a class="reference external" href="#testserver-fixture-fixture">testserver &lt;fixture fixture ...&gt;</a><ul>
<li><a class="reference external" href="#addrport-port-number-or-ipaddr-port">&#8211;addrport [port number or ipaddr:port]</a></li>
<li><a class="reference external" href="#id14">&#8211;verbosity</a></li>
</ul>
</li>
<li><a class="reference external" href="#validate">validate</a></li>
</ul>
</li>
<li><a class="reference external" href="#id15">デフォルトのオプション</a><ul>
<li><a class="reference external" href="#pythonpath">&#8211;pythonpath</a></li>
<li><a class="reference external" href="#settings">&#8211;settings</a></li>
<li><a class="reference external" href="#traceback">&#8211;traceback</a></li>
</ul>
</li>
<li><a class="reference external" href="#id16">その他のからくり</a><ul>
<li><a class="reference external" href="#id17">シンタクスの色づけ</a></li>
<li><a class="reference external" href="#bash">bash での補完</a></li>
<li><a class="reference external" href="#id18">アクションの自作</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>前後のページ</h3>
  <ul>
    
      <li>前: <a href="databases.html">データベースのサポート状況</a></li>
    
    
      <li>次: <a href="files/index.html">ファイル操作 API リファレンス</a></li>
    
  </ul>
  <h3>現在のページ:</h3>
  <ul>
      <li>
        <a href="../index.html">Django v1.0 documentation</a>
        
          <ul><li><a href="index.html">API リファレンス</a>
        
        <ul><li>django-admin.py と manage.py</li></ul>
        </li></ul>
      </li>
  </ul>  

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/ref/django-admin.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">Aug 31, 2012</p>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="databases.html" title="データベースのサポート状況">前へ</a> 
     |
    <a href="index.html" title="API リファレンス" accesskey="U">上へ</a>
   |
    <a href="files/index.html" title="ファイル操作 API リファレンス">次へ</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>