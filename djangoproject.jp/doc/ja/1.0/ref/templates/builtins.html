<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>組み込みタグ／フィルタリファレンス &mdash; Django v1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="contents" title="Global table of contents" href="../../contents.html" />
    <link rel="index" title="Global index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="Django v1.0 documentation" href="../../index.html" />
    <link rel="up" title="テンプレートシステムリファレンス" href="index.html" />
    <link rel="next" title="Python プログラマのための Django テンプレート言語ガイド" href="api.html" />
    <link rel="prev" title="テンプレートシステムリファレンス" href="index.html" />
  </head>
  <body>
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../index.html">Django v1.0 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">ホーム</a>  |
        <a title="Table of contents" href="../../contents.html">目次</a>  |
        <a title="Global index" href="../../genindex.html">索引</a>  |
        <a title="Search" href="../../modindex.html">モジュール一覧</a>
      </div>
      <div class="nav">
    &laquo; <a href="index.html" title="テンプレートシステムリファレンス">前へ</a> 
     |
    <a href="../index.html" title="API リファレンス" accesskey="U">上へ</a>
   |
    <a href="api.html" title="Python プログラマのための Django テンプレート言語ガイド">次へ</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-templates-builtins">
            
  
  <div class="section" id="s-id1">
<span id="s-built-in-tag-and-filter-reference"></span><span id="s-ref-templates-builtins"></span><h1>組み込みタグ／フィルタリファレンス<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">revision-up-to:</th><td class="field-body">8961 (1.0)</td>
</tr>
</tbody>
</table>
<p>このドキュメントでは、 Django の組み込みテンプレートタグおよびフィルタにつ
いて解説しています。 また、 <a class="reference external" href="../../topics/templates.html#template-built-in-reference"><em>自動生成ドキュメント</em></a> を使えば、インストールされている組み込みタグ
とカスタムタグのドキュメントを読めるのでお勧めです。</p>
<div class="section" id="s-id2">
<span id="s-built-in-tag-reference"></span><span id="s-ref-templates-builtins-tags"></span><h2>組み込みタグリファレンス<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-autoescape">
<span id="s-ttag-autoescape"></span><h3>autoescape<a class="headerlink" href="#autoescape" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>自動エスケープ機能を制御します。このタグは引数に <tt class="docutils literal"><span class="pre">on</span></tt> または <tt class="docutils literal"><span class="pre">off</span></tt> を取
り、ブロック内の自動エスケープの有効・無効を決定します。</p>
<p>自動エスケープがオンの場合、変数の値は全て、最終的な文字列出力になる直前に
HTML エスケープされます (他のフィルタは先に適用されます)。この動作は、
変数に <tt class="docutils literal"><span class="pre">escape</span></tt> フィルタを手動で適用した場合と同じです。</p>
<p>例外として、変数をテンプレートに挿入するコードや、 <tt class="docutils literal"><span class="pre">safe</span></tt>, <tt class="docutils literal"><span class="pre">escape</span></tt> と
いったフィルタの適用によって、 &#8220;safe&#8221; マーク済みの変数はエスケープされませ
ん。</p>
</div>
<div class="section" id="s-block">
<span id="s-ttag-block"></span><h3>block<a class="headerlink" href="#block" title="Permalink to this headline">¶</a></h3>
<p>子テンプレートでオーバライドできるブロックを定義します。
<a class="reference external" href="../../topics/templates.html#template-inheritance"><em>テンプレートの継承</em></a> を参照してください。</p>
</div>
<div class="section" id="s-comment">
<span id="s-ttag-comment"></span><h3>comment<a class="headerlink" href="#comment" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">comment</span> <span class="pre">%}</span></tt> から <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">endcomment</span> <span class="pre">%}</span></tt> までの内容を全て無視します。</p>
</div>
<div class="section" id="s-cycle">
<span id="s-ttag-cycle"></span><h3>cycle<a class="headerlink" href="#cycle" title="Permalink to this headline">¶</a></h3>
<div class="versionchanged">
<span class="title">Django 1.0 で変更されました:</span> タグを処理するごとに、指定した文字列や変数を循環して返します。</div>
<p>ループの中では、ループごとに指定した文字列や変数を循環して返します:</p>
<pre>{% for o in some_list %}
    &lt;tr class="{% cycle 'row1' 'row2' rowvar %}"&gt;
        ...
    &lt;/tr&gt;
{% endfor %}</pre>
<p>ループの外側では、最初に一意な名前を与えておき、以後はその名前を使います。
例えば:</p>
<pre>&lt;tr class="{% cycle 'row1' 'row2' rowvar as rowcolors %}"&gt;...&lt;/tr&gt;
&lt;tr class="{% cycle rowcolors %}"&gt;...&lt;/tr&gt;
&lt;tr class="{% cycle rowcolors %}"&gt;...&lt;/tr&gt;</pre>
<p>任意の個数の値を使えます。値はスペースで区切ります。値をクオート (<tt class="docutils literal"><span class="pre">'</span></tt>)
または二重クオート (<tt class="docutils literal"><span class="pre">&quot;</span></tt>) で囲むと、文字列リテラルとして扱います。
クオートされていない値はコンテキスト変数への参照とみなされます。</p>
<p>値をカンマで区切った形式もつかえます:</p>
<pre>{% cycle row1,row2,row3 %}</pre>
<p>ただし、この構文では、値は全てリテラルテキストとして扱われます。
カンマを使った構文は以前のバージョンとの互換性のために残されています。
新たなプロジェクトでは使わないようにしてください。</p>
</div>
<div class="section" id="s-debug">
<span id="s-ttag-debug"></span><h3>debug<a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h3>
<p>現在のコンテキストや import されたモジュールなどを含んだデバッグ情報ひと揃
いを出力します。</p>
</div>
<div class="section" id="s-extends">
<span id="s-ttag-extends"></span><h3>extends<a class="headerlink" href="#extends" title="Permalink to this headline">¶</a></h3>
<p>このテンプレートが親テンプレートに対する拡張であることを指示します。</p>
<p>このタグには 2 種類の使い方があります:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">&quot;base.html&quot;</span> <span class="pre">%}</span></tt> (引用符つき) のような場合、リテラル値
<tt class="docutils literal"><span class="pre">&quot;base.html&quot;</span></tt> を親テンプレートの名前として使います。</li>
<li><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">variable</span> <span class="pre">%}</span></tt> のようにすると、 <tt class="docutils literal"><span class="pre">variable</span></tt> の値を親テンプ
レートの名前として使います。 <tt class="docutils literal"><span class="pre">variable</span></tt> の値が文字列の場合、 Django
はその文字列を親テンプレートの名前として使います。値が <tt class="docutils literal"><span class="pre">Template</span></tt> オ
ブジェクトの場合、Django はそのオブジェクトを親テンプレートにします。</li>
</ul>
<p>詳しくは <a class="reference external" href="../../topics/templates.html#template-inheritance"><em>テンプレートの継承</em></a> を参照してください。</p>
</div>
<div class="section" id="s-filter">
<span id="s-ttag-filter"></span><h3>filter<a class="headerlink" href="#filter" title="Permalink to this headline">¶</a></h3>
<p>タグのコンテンツを変数フィルタ (variable filter) を使ってフィルタします。</p>
<p>フィルタはパイプでつないで連鎖でき、引数をもたせることができます。</p>
<p>使用例:</p>
<pre>{% filter force_escape|lower %}
    This text will be HTML-escaped, and will appear in all lowercase.
{% endfilter %}</pre>
</div>
<div class="section" id="s-firstof">
<span id="s-ttag-firstof"></span><h3>firstof<a class="headerlink" href="#firstof" title="Permalink to this headline">¶</a></h3>
<p>タグに渡された変数のうち、False でない最初の変数の値を出力します。全ての変
数が False であった場合、何も出力しません。</p>
<p>使用例:</p>
<pre>{% firstof var1 var2 var3 %}</pre>
<p>上は、以下のテンプレートと等価です:</p>
<pre>{% if var1 %}
    {{ var1 }}
{% else %}{% if var2 %}
    {{ var2 }}
{% else %}{% if var3 %}
    {{ var3 }}
{% endif %}{% endif %}{% endif %}</pre>
<p>また、全ての変数が False の場合のフォールバック値としてリテラル文字列を指定
できます:</p>
<pre>{% firstof var1 var2 var3 "fallback value" %}</pre>
</div>
<div class="section" id="s-for">
<span id="s-ttag-for"></span><h3>for<a class="headerlink" href="#for" title="Permalink to this headline">¶</a></h3>
<p>アレイの各要素に渡ってループします。例えば、アスリート (athlete) のリストを
<tt class="docutils literal"><span class="pre">athlete_list</span></tt> で渡して表示するには:</p>
<pre>&lt;ul&gt;
{% for athlete in athlete_list %}
    &lt;li&gt;{{ athlete.name }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;</pre>
<p><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">for</span> <span class="pre">obj</span> <span class="pre">in</span> <span class="pre">list</span> <span class="pre">reversed</span> <span class="pre">%}</span></tt> のようにすると、リストに対して逆順のルー
プを実行できます。</p>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>リストのリストにわたってループ処理を行う場合、各サブリストをアンパックして、
個別に名前を割り当てられます。例えば、座標 (x, y) のリストが入った
<tt class="docutils literal"><span class="pre">points</span></tt> というコンテキスト変数があり、各座標を出力したい場合には以下のよ
うにします:</p>
<pre>{% for x, y in points %}
    座標 {{ x }},{{ y }} が登録されています。
{% endfor %}</pre>
<p>この方法は、辞書の各要素にアクセスしたい場合にも便利です。例えば、コンテキ
スト変数 <tt class="docutils literal"><span class="pre">data</span></tt> に辞書が入っている場合。以下のようにすれば辞書内のキーと
値を表示できます:</p>
<pre>{% for key, value in data.items %}
    {{ key }}: {{ value }}
{% endfor %}</pre>
<p>for ループは、ループの各回ごとに使える変数を設定します:</p>
<table class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">変数名</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">forloop.counter</span></tt></td>
<td>現在のループ回数番号 (1 から数えたもの)</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">forloop.counter0</span></tt></td>
<td>現在のループ回数番号 (0 から数えたもの)</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">forloop.revcounter</span></tt></td>
<td>末尾から数えたループ回数番号 (1 から数えたもの)</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">forloop.revcounter0</span></tt></td>
<td>末尾から数えたループ回数番号 (0 から数えたもの)</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">forloop.first</span></tt></td>
<td>最初のループであれば True になります</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">forloop.last</span></tt></td>
<td>最後のループであれば True になります</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">forloop.parentloop</span></tt></td>
<td>入れ子のループの場合、一つ上のループを表します</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-if">
<span id="s-ttag-if"></span><h3>if<a class="headerlink" href="#if" title="Permalink to this headline">¶</a></h3>
<p>変数を評価して、値が「真」 (値が存在して、空の配列でなく、ブール値が偽でな
い) の場合、ブロック内のコンテンツを出力します:</p>
<pre>{% if athlete_list %}
    Number of athletes: {{ athlete_list|length }}
{% else %}
    No athletes.
{% endif %}</pre>
<p>上の例では、 <tt class="docutils literal"><span class="pre">athlete_list</span></tt> が空でなければ、アスリートの人数を
<tt class="docutils literal"><span class="pre">{{</span> <span class="pre">athlete_list|length</span> <span class="pre">}}</span></tt> で表示します。</p>
<p>例にもあるように、 <tt class="docutils literal"><span class="pre">if</span></tt> タグにはオプションの <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">else</span> <span class="pre">%}</span></tt> 節があり、テ
ストに失敗した場合に表示されるコンテンツを定義できます。</p>
<p><tt class="docutils literal"><span class="pre">and</span></tt> や <tt class="docutils literal"><span class="pre">or</span></tt> で複数の変数をチェックしたり、 <tt class="docutils literal"><span class="pre">not</span></tt> で否をとったりでき
ます:</p>
<pre>{% if athlete_list and coach_list %}
    Both athletes and coaches are available.
{% endif %}

{% if not athlete_list %}
    There are no athletes.
{% endif %}

{% if athlete_list or coach_list %}
    There are some athletes or some coaches.
{% endif %}

{% if not athlete_list or coach_list %}
    There are no athletes or there are some coaches (OK, so
    writing English translations of boolean logic sounds
    stupid; it's not our fault).
{% endif %}

{% if athlete_list and not coach_list %}
    There are some athletes and absolutely no coaches.
{% endif %}

{% if athlete_list and not coach_list %}
    There are some athletes and absolutely no coaches.
{% endif %}</pre>
<p><tt class="docutils literal"><span class="pre">and</span></tt> と <tt class="docutils literal"><span class="pre">or</span></tt> 節を同じタグの中に入れると、ロジックの優先順位があいまい
になるため、 同じ <tt class="docutils literal"><span class="pre">if</span></tt> タグには入れられません。例えば、以下のテンプレート
は無効です:</p>
<pre>{% if athlete_list and coach_list or cheerleader_list %}</pre>
<p><tt class="docutils literal"><span class="pre">and</span></tt> タグと <tt class="docutils literal"><span class="pre">or</span></tt> タグを使ったロジックを行いたければ、以下の例のように
<tt class="docutils literal"><span class="pre">if</span></tt> タグを入れ子にしてください:</p>
<pre>{% if athlete_list %}
    {% if coach_list or cheerleader_list %}
        We have athletes, and either coaches or cheerleaders!
    {% endif %}
{% endif %}</pre>
<p>同じ論理記号はいくつでも並べられます。ただし、同じ演算子を使う場合に限りま
す。例えば、以下は有効なテンプレートです:</p>
<pre>{% if athlete_list or coach_list or parent_list or teacher_list %}</pre>
</div>
<div class="section" id="s-ifchanged">
<span id="s-ttag-ifchanged"></span><h3>ifchanged<a class="headerlink" href="#ifchanged" title="Permalink to this headline">¶</a></h3>
<p>ブロック内のコンテンツが直前のループと違う値になるかどうか調べます。</p>
<p><tt class="docutils literal"><span class="pre">ifchanged</span></tt> ブロックタグはループの中で使います。このタグには二通りの使い
方があります。</p>
<ol class="arabic">
<li><p class="first">ブロック内のレンダリング対象コンテンツを直前のループでの状態と比較して、
内容が変化している場合にのみコンテンツを表示する場合です。たとえば、日付
のリストを表示するときに、月が変わったときだけ月名を表示したければ以下の
ようにします:</p>
<pre>&lt;h1&gt;Archive for {{ year }}&lt;/h1&gt;

{% for date in days %}
    {% ifchanged %}&lt;h3&gt;{{ date|date:"F" }}&lt;/h3&gt;{% endifchanged %}
    &lt;a href="{{ date|date:"M/d"|lower }}/"&gt;{{ date|date:"j" }}&lt;/a&gt;
{% endfor %}</pre>
</li>
<li><p class="first">タグに引数を指定すると、変数が変化したかどうかを調べます。例えば、以下の
例では日付が変化したときに日付を表示し、日付と時刻が同時に変化したときの
み時刻も表示します:</p>
<pre>{% for date in days %}
    {% ifchanged date.date %} {{ date.date }} {% endifchanged %}
    {% ifchanged date.hour date.date %}
        {{ date.hour }}
    {% endifchanged %}
{% endfor %}</pre>
</li>
</ol>
</div>
<div class="section" id="s-ifequal">
<span id="s-ttag-ifequal"></span><h3>ifequal<a class="headerlink" href="#ifequal" title="Permalink to this headline">¶</a></h3>
<p>2 つの引数が互いに等しい場合にブロックの内容を出力します。</p>
<p>例:</p>
<pre>{% ifequal user.id comment.user_id %}
    ...
{% endifequal %}</pre>
<p><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">%}</span></tt> タグと同様、オプションで <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">else</span> <span class="pre">%}</span></tt> 節を使えます。</p>
<p>引数はハードコードされた文字列でもよいので、以下のような表現は有効です:</p>
<pre>{% ifequal user.username "adrian" %}
    ...
{% endifequal %}</pre>
<p>引数と比較できるのは、テンプレート変数または文字列だけです。 <tt class="xref docutils literal"><span class="pre">True</span></tt> や
<tt class="xref docutils literal"><span class="pre">False</span></tt> のような、 Python オブジェクトに対する等価比較は行えません。
<tt class="xref docutils literal"><span class="pre">True</span></tt> や <tt class="xref docutils literal"><span class="pre">False</span></tt> との比較を行いたければ <tt class="docutils literal"><span class="pre">if</span></tt> を使ってください。</p>
</div>
<div class="section" id="s-ifnotequal">
<span id="s-ttag-ifnotequal"></span><h3>ifnotequal<a class="headerlink" href="#ifnotequal" title="Permalink to this headline">¶</a></h3>
<p>2 つの引数が互いに等しくない場合にブロックの内容を出力します。</p>
</div>
<div class="section" id="s-include">
<span id="s-ttag-include"></span><h3>include<a class="headerlink" href="#include" title="Permalink to this headline">¶</a></h3>
<p>テンプレートをロードして、現在のコンテキストを使ってレンダリングします。あ
るテンプレートに別のテンプレートを取り込む (&quot;include&quot;) 方法の一つです。</p>
<p>テンプレート名はハードコードされた (引用符で囲った) 文字列でもよく、引用符
は一重でも二重でもかまいません。</p>
<p>以下の例では、 <tt class="docutils literal"><span class="pre">&quot;foo/bar.html&quot;</span></tt> という名前のテンプレートを取り込みます:</p>
<pre>{% include "foo/bar.html" %}</pre>
<p>次の例では、 変数 <tt class="docutils literal"><span class="pre">template_name</span></tt> に入っている名前のテンプレートを取り込
みます:</p>
<pre>{% include template_name %}</pre>
<p>取り込まれたテンプレートは、取り込んだ側で使われているコンテキストの下でレ
ンダリングされます。下の例では <tt class="docutils literal"><span class="pre">&quot;Hello,</span> <span class="pre">John&quot;</span></tt> を出力します:</p>
<ul>
<li><p class="first">コンテキスト: 変数 <tt class="docutils literal"><span class="pre">person</span></tt> を <tt class="docutils literal"><span class="pre">&quot;john&quot;</span></tt> に設定</p>
</li>
<li><p class="first">テンプレート:</p>
<pre>{% include "name_snippet.html" %}</pre>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">name_snippet.html</span></tt> テンプレート:</p>
<div class="highlight"><pre><span class="n">Hello</span><span class="p">,</span> <span class="p">{{</span> <span class="n">person</span> <span class="p">}}</span>
</pre></div>
</li>
</ul>
<p><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">ssi</span> <span class="pre">%}</span></tt> も参照してください。</p>
</div>
<div class="section" id="s-load">
<span id="s-ttag-load"></span><h3>load<a class="headerlink" href="#load" title="Permalink to this headline">¶</a></h3>
<p>カスタムのテンプレートタグリストを読み込みます。</p>
<p>詳しくは
<a class="reference external" href="../../howto/custom-template-tags.html#howto-custom-template-tags"><em>カスタムタグとカスタムフィルタのライブラリ</em></a>
を参照してください。</p>
</div>
<div class="section" id="s-now">
<span id="s-ttag-now"></span><h3>now<a class="headerlink" href="#now" title="Permalink to this headline">¶</a></h3>
<p>指定したフォーマット文字列にしたがって現在の日時を表示します。</p>
<p>フォーマットは PHP の <tt class="docutils literal"><span class="pre">date()</span></tt> 関数 (<a class="reference external" href="http://php.net/date">http://php.net/date</a>) と同じで、いく
つかの点で拡張されています。</p>
<p>利用できるフォーマットを示します:</p>
<table class="docutils">
<colgroup>
<col width="12%" />
<col width="31%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">フォーマット文字</th>
<th class="head">説明</th>
<th class="head">出力例</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>a</td>
<td><tt class="docutils literal"><span class="pre">'a.m.'</span></tt> または <tt class="docutils literal"><span class="pre">'p.m.'</span></tt> (Associated
Press に合わせるため、'.' が入っている点
が PHP と違います)。</td>
<td><tt class="docutils literal"><span class="pre">'a.m.'</span></tt></td>
</tr>
<tr><td>A</td>
<td><tt class="docutils literal"><span class="pre">'AM'</span></tt> または <tt class="docutils literal"><span class="pre">'PM'</span></tt> です。</td>
<td><tt class="docutils literal"><span class="pre">'AM'</span></tt></td>
</tr>
<tr><td>b</td>
<td>3 文字の小文字で表した月名です。</td>
<td><tt class="docutils literal"><span class="pre">'jan'</span></tt></td>
</tr>
<tr><td>B</td>
<td>実装されていません。</td>
<td>&nbsp;</td>
</tr>
<tr><td>d</td>
<td>月の中の日。 2 桁のゼロ詰めです。</td>
<td><tt class="docutils literal"><span class="pre">'01'</span></tt> から <tt class="docutils literal"><span class="pre">'31'</span></tt></td>
</tr>
<tr><td>D</td>
<td>週の中の日。 3 文字のテキスト形式です。</td>
<td><tt class="docutils literal"><span class="pre">'Fri'</span></tt></td>
</tr>
<tr><td>f</td>
<td>12 時間表記の時と分。ただし、ゼロ分の
場合には表示しません。独自の拡張です。</td>
<td><tt class="docutils literal"><span class="pre">'1'</span></tt>, <tt class="docutils literal"><span class="pre">'1:30'</span></tt></td>
</tr>
<tr><td>F</td>
<td>月名を長いテキスト形式で表したものです。</td>
<td><tt class="docutils literal"><span class="pre">'January'</span></tt></td>
</tr>
<tr><td>g</td>
<td>12 時間表記の時。ゼロ詰めはしません。</td>
<td><tt class="docutils literal"><span class="pre">'1'</span></tt> から <tt class="docutils literal"><span class="pre">'12'</span></tt></td>
</tr>
<tr><td>G</td>
<td>24 時間表記の時。ゼロ詰めはしません。</td>
<td><tt class="docutils literal"><span class="pre">'0'</span></tt> から <tt class="docutils literal"><span class="pre">'23'</span></tt></td>
</tr>
<tr><td>h</td>
<td>12 時間表記の時です。</td>
<td><tt class="docutils literal"><span class="pre">'01'</span></tt> から <tt class="docutils literal"><span class="pre">'12'</span></tt></td>
</tr>
<tr><td>H</td>
<td>24 時間表記の時です。</td>
<td><tt class="docutils literal"><span class="pre">'00'</span></tt> から <tt class="docutils literal"><span class="pre">'23'</span></tt></td>
</tr>
<tr><td>i</td>
<td>分です。</td>
<td><tt class="docutils literal"><span class="pre">'00'</span></tt> から <tt class="docutils literal"><span class="pre">'59'</span></tt></td>
</tr>
<tr><td>I</td>
<td>実装されていません。</td>
<td>&nbsp;</td>
</tr>
<tr><td>j</td>
<td>月の中の日。ゼロ詰めしません。</td>
<td><tt class="docutils literal"><span class="pre">'1'</span></tt> から <tt class="docutils literal"><span class="pre">'31'</span></tt></td>
</tr>
<tr><td>l</td>
<td>週の中の曜日。長いテキスト形式です。</td>
<td><tt class="docutils literal"><span class="pre">'Friday'</span></tt></td>
</tr>
<tr><td>L</td>
<td>閏年かどうかを表すブール値です。</td>
<td><tt class="xref docutils literal"><span class="pre">True</span></tt> または <tt class="xref docutils literal"><span class="pre">False</span></tt></td>
</tr>
<tr><td>m</td>
<td>月です。2 桁でゼロ詰めしたものです。</td>
<td><tt class="docutils literal"><span class="pre">'01'</span></tt> から <tt class="docutils literal"><span class="pre">'12'</span></tt></td>
</tr>
<tr><td>M</td>
<td>月です。3 文字のテキスト形式です。</td>
<td><tt class="docutils literal"><span class="pre">'Jan'</span></tt></td>
</tr>
<tr><td>n</td>
<td>月です。ゼロ詰めしません。</td>
<td><tt class="docutils literal"><span class="pre">'1'</span></tt> から <tt class="docutils literal"><span class="pre">'12'</span></tt></td>
</tr>
<tr><td>N</td>
<td>Associated Press スタイルの月の省略表記
です。独自の拡張です。</td>
<td><tt class="docutils literal"><span class="pre">'Jan.'</span></tt>, <tt class="docutils literal"><span class="pre">'Feb.'</span></tt>, <tt class="docutils literal"><span class="pre">'March'</span></tt>, <tt class="docutils literal"><span class="pre">'May'</span></tt></td>
</tr>
<tr><td>O</td>
<td>グリニッジ標準時からの時差です。</td>
<td><tt class="docutils literal"><span class="pre">'+0200'</span></tt></td>
</tr>
<tr><td>P</td>
<td>時刻です。12 時間表記の時、分、
そして 'a.m.'/'p.m.' です。分がゼロの
場合には省略され、必要に応じて
'midnight' または 'noon' になります。
独自の拡張です。</td>
<td><tt class="docutils literal"><span class="pre">'1</span> <span class="pre">a.m.'</span></tt>, <tt class="docutils literal"><span class="pre">'1:30</span> <span class="pre">p.m.'</span></tt>, <tt class="docutils literal"><span class="pre">'midnight'</span></tt>, <tt class="docutils literal"><span class="pre">'noon'</span></tt>, <tt class="docutils literal"><span class="pre">'12:30</span> <span class="pre">p.m.'</span></tt></td>
</tr>
<tr><td>r</td>
<td>RFC 2822に従ったフォーマットの日時です。</td>
<td><tt class="docutils literal"><span class="pre">'Thu,</span> <span class="pre">21</span> <span class="pre">Dec</span> <span class="pre">2000</span> <span class="pre">16:01:07</span> <span class="pre">+0200'</span></tt></td>
</tr>
<tr><td>s</td>
<td>秒です。 2 桁のゼロ詰めです。</td>
<td><tt class="docutils literal"><span class="pre">'00'</span></tt> から <tt class="docutils literal"><span class="pre">'59'</span></tt></td>
</tr>
<tr><td>S</td>
<td>月の中の日につける 2 文字の序数接尾辞
です。</td>
<td><tt class="docutils literal"><span class="pre">'st'</span></tt>, <tt class="docutils literal"><span class="pre">'nd'</span></tt>, <tt class="docutils literal"><span class="pre">'rd'</span></tt> or <tt class="docutils literal"><span class="pre">'th'</span></tt></td>
</tr>
<tr><td>t</td>
<td>月の日数です。</td>
<td><tt class="docutils literal"><span class="pre">28</span></tt> から <tt class="docutils literal"><span class="pre">31</span></tt></td>
</tr>
<tr><td>T</td>
<td>計算機のタイムゾーン設定です。</td>
<td><tt class="docutils literal"><span class="pre">'EST'</span></tt>, <tt class="docutils literal"><span class="pre">'MDT'</span></tt></td>
</tr>
<tr><td>U</td>
<td>実装されていません。</td>
<td>&nbsp;</td>
</tr>
<tr><td>w</td>
<td>週の中の曜日です。ゼロ詰めしません。</td>
<td><tt class="docutils literal"><span class="pre">'0'</span></tt> (Sunday) to <tt class="docutils literal"><span class="pre">'6'</span></tt> (Saturday)</td>
</tr>
<tr><td>W</td>
<td>ISO-8601 に従った年の中の週番号です。
週は月曜日から始まります。</td>
<td><tt class="docutils literal"><span class="pre">1</span></tt>, <tt class="docutils literal"><span class="pre">53</span></tt></td>
</tr>
<tr><td>y</td>
<td>2 桁の年です。</td>
<td><tt class="docutils literal"><span class="pre">'99'</span></tt></td>
</tr>
<tr><td>Y</td>
<td>4 桁の年です。</td>
<td><tt class="docutils literal"><span class="pre">'1999'</span></tt></td>
</tr>
<tr><td>z</td>
<td>年の中の日</td>
<td><tt class="docutils literal"><span class="pre">0</span></tt> から <tt class="docutils literal"><span class="pre">365</span></tt></td>
</tr>
<tr><td>Z</td>
<td>タイムゾーンオフセットを秒であらわした
ものです。UTC よりも西側のタイムゾーン値
は全て負の値になり、東側の値は常に正に
なります。</td>
<td><tt class="docutils literal"><span class="pre">-43200</span></tt> から <tt class="docutils literal"><span class="pre">43200</span></tt></td>
</tr>
</tbody>
</table>
<p>例:</p>
<pre>It is {% now "jS F Y H:i" %}</pre>
<p>フォーマット文字列中で普通の文字列を使いたければ、バックスラッシュでエスケー
プできます。下の例では、&quot;f&quot; が時刻を表すフォーマット指定子として解釈されな
いようにエスケープしています。 &quot;o&quot; はフォーマット指定子ではないのでエスケー
プしていません:</p>
<pre>It is the {% now "jS o\f F" %}</pre>
<p>このテンプレートをレンダすると &quot;It is the 4th of September&quot; になります。</p>
</div>
<div class="section" id="s-regroup">
<span id="s-ttag-regroup"></span><h3>regroup<a class="headerlink" href="#regroup" title="Permalink to this headline">¶</a></h3>
<p>オブジェクトのリストから、属性値によって同種のオブジェクトをまとめます。</p>
<p>この難解なタグを説明するには、例を使うのが一番でしょう: 仮に、複数人の情報
の入った <tt class="docutils literal"><span class="pre">people</span></tt> というリストがあり、各人の情報は <tt class="docutils literal"><span class="pre">first_name</span></tt>,
<tt class="docutils literal"><span class="pre">last_name</span></tt>, および <tt class="docutils literal"><span class="pre">gender</span></tt> といったキーを持つ辞書で表されているとしま
しょう:</p>
<div class="highlight"><pre><span class="n">people</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;George&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Bush&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">:</span> <span class="s">&#39;Male&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Bill&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Clinton&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">:</span> <span class="s">&#39;Male&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Margaret&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Thatcher&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">:</span> <span class="s">&#39;Female&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Condoleezza&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Rice&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">:</span> <span class="s">&#39;Female&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Pat&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Smith&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">:</span> <span class="s">&#39;Unknown&#39;</span><span class="p">},</span>
<span class="p">]</span>
</pre></div>
<p>このデータを、以下のように性別ごとに階層化して表示したいとします:</p>
<pre>* Male:
    * George Bush
    * Bill Clinton
* Female:
    * Margaret Thatcher
    * Condoleezza Rice
* Unknown:
    * Pat Smith</pre>
<p><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">regroup</span> <span class="pre">%}</span></tt> タグを使うと、 <tt class="docutils literal"><span class="pre">people</span></tt> を性別ごとにグループ化できます。
以下のようなテンプレートを使って実現します:</p>
<pre>{% regroup people by gender as gender_list %}
&lt;ul&gt;
{% for gender in gender_list  %}
    &lt;li&gt;{{ gender.grouper }}
    &lt;ul&gt;
        {% for item in gender.list %}
        &lt;li&gt;{{ item.first_name }} {{ item.last_name }}&lt;/li&gt;
        {% endfor %}
    &lt;/ul&gt;
    &lt;/li&gt;
{% endfor %}
&lt;/ul&gt;</pre>
<p>例を順番に見てゆきましょう。 <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">regroup</span> <span class="pre">%}</span></tt> は 3 つの引数をとります。最
初は再グループ化 (regroup) したいリスト、二つめはグループ化に使う属性やキー
の名前、そして最後は再グループ化後のリストにつける名前です。ここでは、
<tt class="docutils literal"><span class="pre">gender</span></tt> キーを使って <tt class="docutils literal"><span class="pre">people</span></tt> を再グループ化し、 <tt class="docutils literal"><span class="pre">gender_list</span></tt> とい
う名前で参照できるようにしています。</p>
<p><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">regroup</span> <span class="pre">%}</span></tt> は <strong>グループオブジェクト</strong> のリストを生成して返します
(この場合は <tt class="docutils literal"><span class="pre">gender_list</span></tt> です)。グループオブジェクトには二つの属性があり
ます:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">grouper</span></tt> -- グループ化している項目 (例えば &quot;Male&quot; や &quot;Female&quot; といっ
た文字列) です。</li>
<li><tt class="docutils literal"><span class="pre">list</span></tt> -- グループ内の全ての要素からなるリスト (例えば、
<tt class="docutils literal"><span class="pre">gender='Male'</span></tt> の人全員からなるリスト) です。</li>
</ul>
<p><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">regroup</span> <span class="pre">%}</span></tt> は入力をソートしないので注意してください! 上の例では、
リスト <tt class="docutils literal"><span class="pre">people</span></tt> はあらかじめ <tt class="docutils literal"><span class="pre">gender</span></tt> でソート済みという前提に立ってい
ます。 <tt class="docutils literal"><span class="pre">people</span></tt> が <tt class="docutils literal"><span class="pre">gender</span></tt> の順に並んで <em>いない</em> 場合、再グループは何
も考えずに一つの性別のグループを複数つくってしまいます。例えば、 <tt class="docutils literal"><span class="pre">people</span></tt>
が以下のように (<tt class="docutils literal"><span class="pre">'Male'</span></tt> がリスト内でまとまっていない状態に) なっていたと
しましょう:</p>
<div class="highlight"><pre><span class="n">people</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Bill&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Clinton&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">:</span> <span class="s">&#39;Male&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Pat&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Smith&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">:</span> <span class="s">&#39;Unknown&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Margaret&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Thatcher&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">:</span> <span class="s">&#39;Female&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;George&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Bush&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">:</span> <span class="s">&#39;Male&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Condoleezza&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Rice&#39;</span><span class="p">,</span> <span class="s">&#39;gender&#39;</span><span class="p">:</span> <span class="s">&#39;Female&#39;</span><span class="p">},</span>
<span class="p">]</span>
</pre></div>
<p>この <tt class="docutils literal"><span class="pre">people</span></tt> を入力に使うと、上の <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">regroup</span> <span class="pre">%}</span></tt> のテンプレートコード
例は以下のような出力を生成します:</p>
<pre>* Male:
    * Bill Clinton
* Unknown:
    * Pat Smith
* Female:
    * Margaret Thatcher
* Male:
    * George Bush
* Female:
    * Condoleezza Rice</pre>
<p>こうした落し穴を解決したければ、ビューコード内であらかじめデータを表示した
い順番に並べておくのが最も簡単でしょう。</p>
<p>データが辞書の列の場合には、もう一つの解決策として、テンプレートの中で
<tt class="docutils literal"><span class="pre">dictsort</span></tt> フィルタを使ってデータを並べ変えられます:</p>
<pre>{% regroup people|dictsort:"gender" by gender as gender_list %}</pre>
</div>
<div class="section" id="s-spaceless">
<span id="s-ttag-spaceless"></span><h3>spaceless<a class="headerlink" href="#spaceless" title="Permalink to this headline">¶</a></h3>
<p>ブロック内の HTML タグ間にある空白文字を除去します。タブ文字や改行も含みま
す。</p>
<p>使用例:</p>
<pre>{% spaceless %}
    &lt;p&gt;
        &lt;a href="foo/"&gt;Foo&lt;/a&gt;
    &lt;/p&gt;
{% endspaceless %}</pre>
<p>上の例は下のような HTML になります:</p>
<pre>&lt;p&gt;&lt;a href="foo/"&gt;Foo&lt;/a&gt;&lt;/p&gt;</pre>
<dl class="docutils">
<dt><em>タグ間の</em> 空白だけが正規化されます -- タグとテキストの間のスペースは正規化</dt>
<dd><p class="first">しません。下の例では、 <tt class="docutils literal"><span class="pre">Hello</span></tt> の周りの空白をはぎとりません:</p>
<pre>{% spaceless %}
    &lt;strong&gt;
        Hello
    &lt;/strong&gt;
{% endspaceless %}</pre>
</dd>
</dl>
</div>
<div class="section" id="s-ssi">
<span id="s-ttag-ssi"></span><h3>ssi<a class="headerlink" href="#ssi" title="Permalink to this headline">¶</a></h3>
<p>指定したファイルの内容をページ内に取り込みます。</p>
<p>&quot;inlcude&quot; タグと同様、 <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">ssi</span> <span class="pre">%}</span></tt> は別のファイルの内容を取り込みます。引
数は絶対パスで指定せねばなりません:</p>
<pre>{% ssi /home/html/ljworld.com/includes/right_generic.html %}</pre>
<p>オプションの &quot;parsed&quot; パラメタを指定すると、取り込まれたファイルを現在のコ
ンテキストのテンプレートコードとして評価します:</p>
<pre>{% ssi /home/html/ljworld.com/includes/right_generic.html parsed %}</pre>
<p><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">ssi</span> <span class="pre">%}</span></tt> を使う場合には、セキュリティの観点から、 Django の設定に
<a class="reference external" href="../settings.html#setting-ALLOWED_INCLUDE_ROOTS"><tt class="xref docutils literal"><span class="pre">ALLOWED_INCLUDE_ROOTS</span></tt></a> を定義しておく必要があるでしょう。</p>
<p><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">include</span> <span class="pre">%}</span></tt> も参照してください。</p>
</div>
<div class="section" id="s-templatetag">
<span id="s-ttag-templatetag"></span><h3>templatetag<a class="headerlink" href="#templatetag" title="Permalink to this headline">¶</a></h3>
<p>テンプレートタグの構成に使われる文字自体を出力します。</p>
<p>Django のテンプレートには「エスケープ」の概念がないので、テンプレートタグの
構成に使われている要素を出力したければ <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">templatetag</span> <span class="pre">%}</span></tt> タグを使わねば
なりません。</p>
<p>引数にはどの要素出力するかを指定します:</p>
<table class="docutils">
<colgroup>
<col width="72%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Argument</th>
<th class="head">Outputs</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">openblock</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{%</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">closeblock</span></tt></td>
<td><tt class="docutils literal"><span class="pre">%}</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">openvariable</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{{</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">closevariable</span></tt></td>
<td><tt class="docutils literal"><span class="pre">}}</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">openbrace</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">closebrace</span></tt></td>
<td><tt class="docutils literal"><span class="pre">}</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">opencomment</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{#</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">closecomment</span></tt></td>
<td><tt class="docutils literal"><span class="pre">#}</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-url">
<span id="s-ttag-url"></span><h3>url<a class="headerlink" href="#url" title="Permalink to this headline">¶</a></h3>
<p>ビュー関数とオプションのパラメタを指定すると、絶対 URL (ドメイン名のない
URL) を返します。これによって、テンプレートに URL をハードコードするような
DRY 則の侵犯を避けられます:</p>
<pre>{% url path.to.some_view arg1,arg2,name1=value1 %}</pre>
<p>第一引数はビュー関数へのパスで、 <tt class="docutils literal"><span class="pre">package.module.function</span></tt> のよう
な形式で指定します。それ以降の引数はオプションで、カンマで区切って指定しま
す。引数はそれぞれビューの固定引数やキーワード引数になります。 URLconf に指
定されている引数全てを指定せねばなりません。</p>
<p>例えば、 <tt class="docutils literal"><span class="pre">app_views.client</span></tt> という名前のビューがあり、クライアントの ID
を引数に取るとしましょう (<tt class="docutils literal"><span class="pre">client()</span></tt> は <tt class="docutils literal"><span class="pre">app_views.py</span></tt> で定義されている
メソッドです)。 URLconf は以下のようになるはずです:</p>
<div class="highlight"><pre><span class="p">(</span><span class="s">&#39;^client/(\d+)/$&#39;</span><span class="p">,</span> <span class="s">&#39;app_views.client&#39;</span><span class="p">)</span>
</pre></div>
<p>あるアプリケーションの URLconf が、プロジェクトの URLconf に以下のような形
で include されていたとします:</p>
<div class="highlight"><pre><span class="p">(</span><span class="s">&#39;^clients/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;project_name.app_name.urls&#39;</span><span class="p">))</span>
</pre></div>
<p>テンプレート内では、以下のようにしてビューへのリンクを生成できます:</p>
<pre>{% url app_views.client client.id %}</pre>
<p>結果的に、テンプレートは <tt class="docutils literal"><span class="pre">/clients/client/123/</span></tt> のような文字列を生成しま
す。</p>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p><a class="reference external" href="../../topics/http/urls.html#naming-url-patterns"><em>名前つき URL パターン</em></a> を使っている場合、
<tt class="docutils literal"><span class="pre">url</span></tt> タグにはビューのパス名の代わりにパターン名を指定できます。</p>
<p>逆変換しようとしている URL が存在しない場合、 <tt class="xref docutils literal"><span class="pre">NoReverseMatch</span></tt> 例外を
送出するため、エラーページが表示されます。</p>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>URL を表示せず、取り出したいだけなら、以下のような形式で呼び出せます:</p>
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">url</span> <span class="nv">path.to.view</span> <span class="nv">arg</span><span class="o">,</span> <span class="nv">arg2</span> <span class="k">as</span> <span class="nv">the_url</span> <span class="cp">%}</span>

<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">the_url</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>I&#39;m linking to <span class="cp">{{</span> <span class="nv">the_url</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">{%</span> <span class="pre">url</span> <span class="pre">...</span> <span class="pre">as</span> <span class="pre">var</span> <span class="pre">%}</span></tt> の形式は、 URL からビューを解決できなくてもエラー
を送出 <em>しません</em> 。従って、ビューへのリンクは以下のようにも書けます:</p>
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">url</span> <span class="nv">path.to.view</span> <span class="k">as</span> <span class="nv">the_url</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">the_url</span> <span class="cp">%}</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">the_url</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>Link to optional stuff<span class="nt">&lt;/a&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="section" id="s-widthratio">
<span id="s-ttag-widthratio"></span><h3>widthratio<a class="headerlink" href="#widthratio" title="Permalink to this headline">¶</a></h3>
<p>バーチャートなどを生成する場合のために、指定した値と最大値との比を計算し、
定数に掛けた値を返します。</p>
<p>例えば:</p>
<pre>&lt;img src="bar.gif" height="10"
 width="{% widthratio this_value max_value 100 %}" /&gt;</pre>
<p>のようにすると、 <tt class="docutils literal"><span class="pre">this_value</span></tt> が 175 で <tt class="docutils literal"><span class="pre">max_value</span></tt> が 200 の場合には、
(175/200 = .875; .875 * 100 = 87.5 で、88 に丸めた結果) 画像の幅は 88 ピク
セルになります。</p>
</div>
<div class="section" id="s-with">
<span id="s-ttag-with"></span><h3>with<a class="headerlink" href="#with" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>複雑な表記の変数の値をキャッシュします。また、簡単な名前で参照できるように
します。呼出しコストの高いメソッド (例えばデータベースを操作するようなメソッ
ド) に何度もアクセスする際に便利です。</p>
<p>以下に例を示します:</p>
<pre>{% with business.employees.count as total %}
    {{ total }} employee{{ total|pluralize }}
{% endwith %}</pre>
<p>値を組み込んだ変数 (上の例でいえば <tt class="docutils literal"><span class="pre">total</span></tt>) は <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">with</span> <span class="pre">%}</span></tt> と
<tt class="docutils literal"><span class="pre">{%</span> <span class="pre">endwith</span> <span class="pre">%}</span></tt> タグの間でだけ使えます。</p>
</div>
</div>
<div class="section" id="s-id3">
<span id="s-built-in-filter-reference"></span><span id="s-ref-templates-builtins-filters"></span><h2>組み込みフィルタリファレンス<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-add">
<span id="s-tfilter-add"></span><h3>add<a class="headerlink" href="#add" title="Permalink to this headline">¶</a></h3>
<p>入力値に対して引数の値を加算します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">add</span><span class="p">:</span><span class="s">&quot;2&quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">4</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">6</span></tt> になるでしょう。</p>
</div>
<div class="section" id="s-addslashes">
<span id="s-tfilter-addslashes"></span><h3>addslashes<a class="headerlink" href="#addslashes" title="Permalink to this headline">¶</a></h3>
<p>入力値のクオートの前にスラッシュを追加します。CSV などの文字列をエスケープ
する際に便利です。</p>
</div>
<div class="section" id="s-capfirst">
<span id="s-tfilter-capfirst"></span><h3>capfirst<a class="headerlink" href="#capfirst" title="Permalink to this headline">¶</a></h3>
<p>入力値の先頭の文字を大文字に変換します。</p>
</div>
<div class="section" id="s-center">
<span id="s-tfilter-center"></span><h3>center<a class="headerlink" href="#center" title="Permalink to this headline">¶</a></h3>
<p>入力値を引数に指定された幅のフィールド内に中央寄せします。</p>
</div>
<div class="section" id="s-cut">
<span id="s-tfilter-cut"></span><h3>cut<a class="headerlink" href="#cut" title="Permalink to this headline">¶</a></h3>
<p>入力値の中から引数に指定した値を全て除去します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">cut</span><span class="p">:</span><span class="s">&quot; &quot;</span><span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">&quot;String</span> <span class="pre">with</span> <span class="pre">spaces&quot;</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">&quot;Stringwithspaces&quot;</span></tt> に
なるでしょう。</p>
</div>
<div class="section" id="s-date">
<span id="s-tfilter-date"></span><h3>date<a class="headerlink" href="#date" title="Permalink to this headline">¶</a></h3>
<p>引数に指定した書式で日付をフォーマットします。 (<a class="reference internal" href="#now">now</a> タグと同じです)</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">date</span><span class="p">:</span><span class="s">&quot;D d M Y&quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">datetime</span></tt> オブジェクト (例えば、 <tt class="docutils literal"><span class="pre">datetime.datetime.now()</span></tt>
の戻り値) ならば、 出力は文字列 <tt class="docutils literal"><span class="pre">'Wed</span> <span class="pre">09</span> <span class="pre">Jan</span> <span class="pre">2008'</span></tt> になります。</p>
</div>
<div class="section" id="s-default">
<span id="s-tfilter-default"></span><h3>default<a class="headerlink" href="#default" title="Permalink to this headline">¶</a></h3>
<p>入力の評価値が <tt class="xref docutils literal"><span class="pre">False</span></tt> の場合、引数に指定したデフォルト値を使います。そうで
なければ、入力値を使います。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">default</span><span class="p">:</span><span class="s">&quot;nothing&quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt> (空文字列)ならば、出力は <tt class="docutils literal"><span class="pre">nothing</span></tt> になります。</p>
</div>
<div class="section" id="s-default-if-none">
<span id="s-tfilter-default_if_none"></span><h3>default_if_none<a class="headerlink" href="#default-if-none" title="Permalink to this headline">¶</a></h3>
<p>値が <tt class="xref docutils literal"><span class="pre">None</span></tt> の場合、かつその場合のみ、引数に指定したデフォルト値を使いま
す。そうでなければ、入力値を使います。</p>
<p>空文字列を入力した場合には、デフォルト値を使わ <strong>ない</strong> ので注意してくださ
い。空文字列をフォールバックしたければ <tt class="docutils literal"><span class="pre">default</span></tt> フィルタを使ってください。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">default_if_none</span><span class="p">:</span><span class="s">&quot;nothing&quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="xref docutils literal"><span class="pre">None</span></tt> ならば、出力は文字列 <tt class="docutils literal"><span class="pre">&quot;nothing&quot;</span></tt> になります。</p>
</div>
<div class="section" id="s-dictsort">
<span id="s-tfilter-dictsort"></span><h3>dictsort<a class="headerlink" href="#dictsort" title="Permalink to this headline">¶</a></h3>
<p>辞書のリストを入力に取り、引数に指定したキーでリストをソートして返します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">dictsort</span><span class="p">:</span><span class="s">&quot;name&quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が以下のようだったとします:</p>
<div class="highlight"><pre><span class="p">[</span>
    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;zed&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">19</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;amy&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;joe&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">31</span><span class="p">},</span>
<span class="p">]</span>
</pre></div>
<p>出力は以下のようになるでしょう。:</p>
<div class="highlight"><pre><span class="p">[</span>
    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;amy&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;joe&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">31</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;zed&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">19</span><span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="section" id="s-dictsortreversed">
<span id="s-tfilter-dictsortreversed"></span><h3>dictsortreversed<a class="headerlink" href="#dictsortreversed" title="Permalink to this headline">¶</a></h3>
<p>辞書のリストを入力に取り、引数に指定したキーでリストを逆順にソートして返し
ます。上のフィルタと全く同じ処理をしますが、返す値は逆順です。</p>
</div>
<div class="section" id="s-divisibleby">
<span id="s-tfilter-divisibleby"></span><h3>divisibleby<a class="headerlink" href="#divisibleby" title="Permalink to this headline">¶</a></h3>
<p>値を引数で除算できる場合に <tt class="xref docutils literal"><span class="pre">True</span></tt> を返します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">divisibleby</span><span class="p">:</span><span class="s">&quot;3&quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">21</span></tt> なら、出力は <tt class="xref docutils literal"><span class="pre">True</span></tt> になります。</p>
</div>
<div class="section" id="s-escape">
<span id="s-tfilter-escape"></span><h3>escape<a class="headerlink" href="#escape" title="Permalink to this headline">¶</a></h3>
<div class="versionchanged">
<span class="title">Django 1.0 で変更されました:</span> 自動エスケープの導入に伴って、このフィルタの挙動はバージョン 1.0 で少し
変更され、他の全てのフィルタの後に適用されるようになりました。</div>
<p>入力文字中の HTML 特有の文字をエスケープします。具体的には、以下のような置
換を行います:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">&lt;</span></tt> は <tt class="docutils literal"><span class="pre">&quot;&amp;lt;&quot;</span></tt> に変換されます。</li>
<li><tt class="docutils literal"><span class="pre">&gt;</span></tt> は <tt class="docutils literal"><span class="pre">&quot;&amp;gt;&quot;</span></tt> に変換されます。</li>
<li><tt class="docutils literal"><span class="pre">&quot;'&quot;</span></tt> (クオート) は <tt class="docutils literal"><span class="pre">'&amp;#39;'</span></tt> に変換されます。</li>
<li><tt class="docutils literal"><span class="pre">'&quot;'</span></tt> (二重クオート) は <tt class="docutils literal"><span class="pre">'&amp;quot;'</span></tt> に変換されます。</li>
<li><tt class="docutils literal"><span class="pre">&quot;&amp;&quot;</span></tt> は <tt class="docutils literal"><span class="pre">&quot;&amp;amp;&quot;</span></tt>  に変換されます。</li>
</ul>
<p>エスケープは最終的な文字列出力を生成する時に適用されます。従って、フィルタ
を連鎖している場合、連鎖のどこにフィルタが置かれていても、フィルタの最後の
段階でエスケープ処理が行われます。エスケープを即座に適用したければ、
<tt class="docutils literal"><span class="pre">force_escape</span></tt> フィルタを使ってください。</p>
<p>すでに自動エスケープが施された変数に <tt class="docutils literal"><span class="pre">escape</span></tt> を適用しても、結果的には一
度しかエスケープを行いません。従って、自動エスケープ環境で <tt class="docutils literal"><span class="pre">escape</span></tt>
を呼び出しても問題はありません。意図的に複数回エスケープを施したければ、
<tt class="docutils literal"><span class="pre">force_escape</span></tt> フィルタを使ってください。</p>
<p><strong>開発版の Django で新たに登場した機能</strong>: 自動エスケープの導入によって、
このフィルタの挙動は少し変更されました。フィルタによる置き換えは、他の (前
後のフィルタを含め)全てのフィルタを適用した後に一度だけ行われます。</p>
</div>
<div class="section" id="s-escapejs">
<span id="s-tfilter-escapejs"></span><h3>escapejs<a class="headerlink" href="#escapejs" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>JavaScript の文字列リテラルとして扱うために文字エスケープを行います。エスケー
プ結果は、 HTML としては安全 <em>ではありません</em> が、JavaScrpt/JSON を生成する
テンプレートの出力が構文エラーを引き起こすのを防げます。</p>
</div>
<div class="section" id="s-filesizeformat">
<span id="s-tfilter-filesizeformat"></span><h3>filesizeformat<a class="headerlink" href="#filesizeformat" title="Permalink to this headline">¶</a></h3>
<p>ファイルサイズを「目に優しい (human-readable)」表現 (<tt class="docutils literal"><span class="pre">'13</span> <span class="pre">KB'</span></tt>,
<tt class="docutils literal"><span class="pre">'4.1</span> <span class="pre">MB'</span></tt>, <tt class="docutils literal"><span class="pre">'102</span> <span class="pre">bytes'</span></tt> など) に変換します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">filesizeformat</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が 123456789 なら、出力は <tt class="docutils literal"><span class="pre">117.7</span> <span class="pre">MB</span></tt> になります。</p>
</div>
<div class="section" id="s-first">
<span id="s-tfilter-first"></span><h3>first<a class="headerlink" href="#first" title="Permalink to this headline">¶</a></h3>
<p>リスト中の最初の要素を返します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">first</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> がリスト <tt class="docutils literal"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c']</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">'a'</span></tt> になります。</p>
</div>
<div class="section" id="s-fix-ampersands">
<span id="s-tfilter-fix_ampersands"></span><h3>fix_ampersands<a class="headerlink" href="#fix-ampersands" title="Permalink to this headline">¶</a></h3>
<div class="versionchanged">
<span class="title">Django 1.0 で変更されました.</span> </div>
<p>アンパーサンド (&quot;&amp;&quot;) を <tt class="docutils literal"><span class="pre">&amp;amp;</span></tt> エンティティで置き換えます。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">fix_ampersands</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">Tom</span> <span class="pre">&amp;</span> <span class="pre">Jerry</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">Tom</span> <span class="pre">&amp;amp;</span> <span class="pre">Jerry</span></tt> になります。</p>
</div>
<div class="section" id="s-floatformat">
<span id="s-tfilter-floatformat"></span><h3>floatformat<a class="headerlink" href="#floatformat" title="Permalink to this headline">¶</a></h3>
<p>引数を指定せずに使うと、小数部がある場合に限り、浮動小数点数を小数点以下ひ
と桁でまるめます。例えば:</p>
<table class="docutils">
<colgroup>
<col width="26%" />
<col width="57%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><tt class="docutils literal"><span class="pre">value</span></tt></th>
<th class="head">テンプレート</th>
<th class="head">出力</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">34.23234</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">value|floatformat</span> <span class="pre">}}</span></tt></td>
<td><tt class="docutils literal"><span class="pre">34.2</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">34.00000</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">value|floatformat</span> <span class="pre">}}</span></tt></td>
<td><tt class="docutils literal"><span class="pre">34</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">34.26000</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">value|floatformat</span> <span class="pre">}}</span></tt></td>
<td><tt class="docutils literal"><span class="pre">34.3</span></tt></td>
</tr>
</tbody>
</table>
<p>整数の引数を指定すると、 <tt class="docutils literal"><span class="pre">floatformat</span></tt> は小数部を指定の桁数で丸めます。例
えば:</p>
<table class="docutils">
<colgroup>
<col width="24%" />
<col width="57%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><tt class="docutils literal"><span class="pre">value</span></tt></th>
<th class="head">テンプレート</th>
<th class="head">出力</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">34.23234</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">value|floatformat:3</span> <span class="pre">}}</span></tt></td>
<td><tt class="docutils literal"><span class="pre">34.232</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">34.00000</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">value|floatformat:3</span> <span class="pre">}}</span></tt></td>
<td><tt class="docutils literal"><span class="pre">34.000</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">34.26000</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">value|floatformat:3</span> <span class="pre">}}</span></tt></td>
<td><tt class="docutils literal"><span class="pre">34.260</span></tt></td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">floatformat</span></tt> の引数に負の数を指定した場合、小数部がある場合に限り、小数
部を指定の桁数で丸めます。例えば:</p>
<table class="docutils">
<colgroup>
<col width="22%" />
<col width="59%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><tt class="docutils literal"><span class="pre">value</span></tt></th>
<th class="head">テンプレート</th>
<th class="head">出力</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">34.23234</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">value|floatformat:&quot;-3&quot;</span> <span class="pre">}}</span></tt></td>
<td><tt class="docutils literal"><span class="pre">34.232</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">34.00000</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">value|floatformat:&quot;-3&quot;</span> <span class="pre">}}</span></tt></td>
<td><tt class="docutils literal"><span class="pre">34</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">34.26000</span></tt></td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">value|floatformat:&quot;-3&quot;</span> <span class="pre">}}</span></tt></td>
<td><tt class="docutils literal"><span class="pre">34.260</span></tt></td>
</tr>
</tbody>
</table>
<p>従って、引数なしの <tt class="docutils literal"><span class="pre">floatformat</span></tt> は <tt class="docutils literal"><span class="pre">-1</span></tt> を引数に指定した場合と同じにな
ります。</p>
</div>
<div class="section" id="s-force-escape">
<span id="s-tfilter-force_escape"></span><h3>force_escape<a class="headerlink" href="#force-escape" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>文字列に HTML エスケープを適用します。 (詳しくは <tt class="docutils literal"><span class="pre">escape</span></tt> フィルタを参照
してください)。フィルタは <em>即座に</em> 適用され、新たなエスケープ済みの文字列を
返します。このタグが有用なケースは稀で、エスケープ済みの結果に対して他のフィ
ルタを適用したいような、複数回エスケープが必要な場合に使われるにすぎません。
通常は <tt class="docutils literal"><span class="pre">escape</span></tt> フィルタをつかうことになるでしょう。</p>
</div>
<div class="section" id="s-get-digit">
<span id="s-tfilter-get_digit"></span><h3>get_digit<a class="headerlink" href="#get-digit" title="Permalink to this headline">¶</a></h3>
<p>入力が整数の場合、引数に指定した桁の数字を返します。 1 は右はじの桁、2 は右
から 2 つ目の桁、といった具合に指定します。入力が整数でない場合には、入力値
をそのまま返します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">get_digit</span><span class="p">:</span><span class="s">&quot;2&quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">123456789</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">8</span></tt> になります。</p>
</div>
<div class="section" id="s-iriencode">
<span id="s-tfilter-iriendcode"></span><h3>iriencode<a class="headerlink" href="#iriencode" title="Permalink to this headline">¶</a></h3>
<p>IRI (国際化リソース識別子 Internationalized Resource Identifier)
を URL 埋め込みに適した文字列に変換します。非 ASCII 文字列を URL に埋め込む
場合に必要なフィルタです。</p>
<p><tt class="docutils literal"><span class="pre">urlencode</span></tt> フィルタを通した文字列をこのフィルタに通しても問題はありませ
ん。</p>
</div>
<div class="section" id="s-join">
<span id="s-tfilter-join"></span><h3>join<a class="headerlink" href="#join" title="Permalink to this headline">¶</a></h3>
<p>Python の <tt class="docutils literal"><span class="pre">str.join(list)</span></tt> と同じく、リストを文字列でつなぎます。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">join</span><span class="p">:</span><span class="s">&quot; // &quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> がリスト <tt class="docutils literal"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c']</span></tt> なら、出力は文字列 <tt class="docutils literal"><span class="pre">&quot;a</span> <span class="pre">//</span> <span class="pre">b</span> <span class="pre">//</span> <span class="pre">c&quot;</span></tt> に
なります。</p>
</div>
<div class="section" id="s-last">
<span id="s-tfilter-last"></span><h3>last<a class="headerlink" href="#last" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p>リストの末尾の要素を返します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">last</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> がリスト <tt class="docutils literal"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c',</span> <span class="pre">'d']</span></tt> なら、出力は文字列 <tt class="docutils literal"><span class="pre">&quot;d&quot;</span></tt> になり
ます。</p>
</div>
<div class="section" id="s-length">
<span id="s-tfilter-length"></span><h3>length<a class="headerlink" href="#length" title="Permalink to this headline">¶</a></h3>
<p>入力値の長さを返します。文字列とリストいずれにも作用します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">length</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c',</span> <span class="pre">'d']</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">4</span></tt> になります。</p>
</div>
<div class="section" id="s-length-is">
<span id="s-tfilter-length_is"></span><h3>length_is<a class="headerlink" href="#length-is" title="Permalink to this headline">¶</a></h3>
<p>入力値の長さと引数が等しければ <tt class="xref docutils literal"><span class="pre">True</span></tt> を返し、そうでなければ <tt class="xref docutils literal"><span class="pre">False</span></tt> を
返します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">length_is</span><span class="p">:</span><span class="s">&quot;4&quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c',</span> <span class="pre">'d']</span></tt> なら、出力は <tt class="xref docutils literal"><span class="pre">True</span></tt> になります。</p>
</div>
<div class="section" id="s-linebreaks">
<span id="s-tfilter-linebreaks"></span><h3>linebreaks<a class="headerlink" href="#linebreaks" title="Permalink to this headline">¶</a></h3>
<p>プレーンテキストの改行を適切な HTML タグに変換します。
改行 1 つは HTML 改行 (<tt class="docutils literal"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></tt>) タグ、改行と空行はパラグラフ
改行 (<tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt>) に変換します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">linebreaks</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">Joel\nis</span> <span class="pre">a</span> <span class="pre">slug</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">&lt;p&gt;Joel&lt;br&gt;is</span> <span class="pre">a</span> <span class="pre">slug&lt;/p&gt;</span></tt>
になります。</p>
</div>
<div class="section" id="s-linebreaksbr">
<span id="s-tfilter-linebreaksbr"></span><h3>linebreaksbr<a class="headerlink" href="#linebreaksbr" title="Permalink to this headline">¶</a></h3>
<p>プレーンテキストの改行を HTML の改行 (<tt class="docutils literal"><span class="pre">&lt;br</span> <span class="pre">/&gt;</span></tt>) タグに変換します。</p>
</div>
<div class="section" id="s-linenumbers">
<span id="s-tfilter-linenumbers"></span><h3>linenumbers<a class="headerlink" href="#linenumbers" title="Permalink to this headline">¶</a></h3>
<p>テキストを行番号付きで表示します。</p>
</div>
<div class="section" id="s-ljust">
<span id="s-tfilter-ljust"></span><h3>ljust<a class="headerlink" href="#ljust" title="Permalink to this headline">¶</a></h3>
<p>入力値を指定幅のフィールド内に左詰めします。</p>
<p><strong>引数:</strong> フィールドの幅</p>
</div>
<div class="section" id="s-lower">
<span id="s-tfilter-lower"></span><h3>lower<a class="headerlink" href="#lower" title="Permalink to this headline">¶</a></h3>
<p>文字列を全て小文字に変換します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">lower</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">Still</span> <span class="pre">MAD</span> <span class="pre">At</span> <span class="pre">Yoko</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">still</span> <span class="pre">mad</span> <span class="pre">at</span> <span class="pre">yoko</span></tt> にな
ります。</p>
</div>
<div class="section" id="s-make-list">
<span id="s-tfilter-make_list"></span><h3>make_list<a class="headerlink" href="#make-list" title="Permalink to this headline">¶</a></h3>
<p>入力値をリストに変換します。整数の場合には各桁の数字からなるリストに、文字
列の場合は各文字からなるリストに変換します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">make_list</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が文字列 <tt class="docutils literal"><span class="pre">&quot;Joel&quot;</span></tt> なら、出力はリスト
<tt class="docutils literal"><span class="pre">[u'J',</span> <span class="pre">u'o',</span> <span class="pre">u'e',</span> <span class="pre">u'l']</span></tt> です。 <tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">123</span></tt> なら、出力はリスト
<tt class="docutils literal"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></tt> です。</p>
</div>
<div class="section" id="s-phone2numeric">
<span id="s-tfilter-phone2numeric"></span><h3>phone2numeric<a class="headerlink" href="#phone2numeric" title="Permalink to this headline">¶</a></h3>
<p>電話番号 (文字を含む場合もあります) を数値だけの番号に変換します。例えば、
<tt class="docutils literal"><span class="pre">'800-COLLECT'</span></tt> は <tt class="docutils literal"><span class="pre">'800-2655328'</span></tt> になります。</p>
<p>入力値は正しい電話番号でなくてもかまいません。このフィルタはどんな文字列で
も変換します。</p>
</div>
<div class="section" id="s-pluralize">
<span id="s-tfilter-pluralize"></span><h3>pluralize<a class="headerlink" href="#pluralize" title="Permalink to this headline">¶</a></h3>
<p>値が 1 でない場合に、複数形を表す接尾辞を付けます。デフォルトでは、接尾辞は
<tt class="docutils literal"><span class="pre">'s'</span></tt> です。</p>
<p>例:</p>
<pre>You have {{ num_messages }} message{{ num_messages|pluralize }}.</pre>
<p><tt class="docutils literal"><span class="pre">'s'</span></tt> 以外の接尾辞が必要な場合、フィルタのパラメタに指定できます。</p>
<p>例:</p>
<pre>You have {{ num_walruses }} walrus{{ num_walrus|pluralize:"es" }}.</pre>
<p>単なる接尾辞だけで複数形化できない場合、単数形と複数形の接尾辞の両方をコン
マで区切って指定できます。</p>
<p>例:</p>
<pre>You have {{ num_cherries }} cherr{{ num_cherries|pluralize:"y,ies" }}.</pre>
</div>
<div class="section" id="s-pprint">
<span id="s-tfilter-pprint"></span><h3>pprint<a class="headerlink" href="#pprint" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.python.org/doc/2.5/lib/module-pprint.html">pprint.pprint</a>  のラッパです -- 単なるデバッグ用にすぎません。</p>
</div>
<div class="section" id="s-random">
<span id="s-tfilter-random"></span><h3>random<a class="headerlink" href="#random" title="Permalink to this headline">¶</a></h3>
<p>与えられたリストからランダムな要素を返します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">random</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> がリスト <tt class="docutils literal"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c',</span> <span class="pre">'d']</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">&quot;b&quot;</span></tt> かもしれません。</p>
</div>
<div class="section" id="s-removetags">
<span id="s-tfilter-removetags"></span><h3>removetags<a class="headerlink" href="#removetags" title="Permalink to this headline">¶</a></h3>
<p>入力から引数に指定された [X]HTML タグを除去します。タグはスペースで区切って
指定します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">removetags</span><span class="p">:</span><span class="s">&quot;b span&quot;</span><span class="o">|</span><span class="n">safe</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">&quot;&lt;b&gt;Joel&lt;/b&gt;</span> <span class="pre">&lt;button&gt;is&lt;/button&gt;</span> <span class="pre">a</span> <span class="pre">&lt;span&gt;slug&lt;/span&gt;&quot;</span></tt> なら、
出力は <tt class="docutils literal"><span class="pre">&quot;Joel</span> <span class="pre">&lt;button&gt;is&lt;/button&gt;</span> <span class="pre">a</span> <span class="pre">slug&quot;</span></tt> になります。</p>
</div>
<div class="section" id="s-rjust">
<span id="s-tfilter-rjust"></span><h3>rjust<a class="headerlink" href="#rjust" title="Permalink to this headline">¶</a></h3>
<p>指定幅のフィールドに右詰めします。</p>
<p><strong>引数:</strong> フィールドの幅</p>
</div>
<div class="section" id="s-safe">
<span id="s-tfilter-safe"></span><h3>safe<a class="headerlink" href="#safe" title="Permalink to this headline">¶</a></h3>
<p>文字列に対して、さらなるエスケープが必要でないことをマークするのに使います。
autoescaping がオフの場合、このフィルタは何もしません。</p>
</div>
<div class="section" id="s-slice">
<span id="s-tfilter-slice"></span><h3>slice<a class="headerlink" href="#slice" title="Permalink to this headline">¶</a></h3>
<p>リストに対するスライスを返します。</p>
<p>Python におけるリストのスライスと同じ構文を使います。スライスについて学びた
ければ、
<a class="reference external" href="http://diveintopython.org/native_data_types/lists.html#odbchelper.list.slice">http://diveintopython.org/native_data_types/lists.html#odbchelper.list.slice</a>
を読んで下さい。</p>
<p>例: <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">some_list|slice:&quot;:2&quot;</span> <span class="pre">}}</span></tt></p>
</div>
<div class="section" id="s-slugify">
<span id="s-tfilter-slugify"></span><h3>slugify<a class="headerlink" href="#slugify" title="Permalink to this headline">¶</a></h3>
<p>入力を小文字に変換し、語でない (英数字またはアンダースコアでない) 文字を除
去し、スペースをハイフンに変換します。また、先頭と末尾の空白をはぎとります。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">slugify</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">&quot;Joel</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">slug&quot;</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">&quot;joel-is-a-slug&quot;</span></tt> になり
ます。</p>
</div>
<div class="section" id="s-stringformat">
<span id="s-tfilter-stringformat"></span><h3>stringformat<a class="headerlink" href="#stringformat" title="Permalink to this headline">¶</a></h3>
<p>引数に指定されたフォーマット指示子に従って変数をフォーマットします。フォー
マット指示子は Python のフォーマット指示構文と同じですが、先頭の &quot;%&quot; は必要
ありません。</p>
<p>Python の文字列フォーマットについては
<a class="reference external" href="http://www.python.jp/doc/release/lib/typesseq-strings.html">http://www.python.jp/doc/release/lib/typesseq-strings.html</a> を参照してくださ
い。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">stringformat</span><span class="p">:</span><span class="s">&quot;s&quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">&quot;Joel</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">slug&quot;</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">&quot;Joel</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">slug&quot;</span></tt> になり
ます。</p>
</div>
<div class="section" id="s-striptags">
<span id="s-tfilter-striptags"></span><h3>striptags<a class="headerlink" href="#striptags" title="Permalink to this headline">¶</a></h3>
<p>[X]HTML タグを全てはぎとります。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">striptags</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">&quot;&lt;b&gt;Joel&lt;/b&gt;</span> <span class="pre">&lt;button&gt;is&lt;/button&gt;</span> <span class="pre">a</span> <span class="pre">&lt;span&gt;slug&lt;/span&gt;&quot;</span></tt> なら、
出力は <tt class="docutils literal"><span class="pre">&quot;Joel</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">slug&quot;</span></tt> になります。</p>
</div>
<div class="section" id="s-time">
<span id="s-tfilter-time"></span><h3>time<a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h3>
<p>時刻を指定の書式でフォーマットします (<a class="reference internal" href="#now">now</a> タグと同じです)。
<tt class="docutils literal"><span class="pre">time</span></tt> フィルタの引数は、時刻に関するフォーマット文字しか受け付けません
(理由は言うまでもありませんよね)。日付のフォーマットを行いたければ <a class="reference internal" href="#date">date</a>
フィルタを使ってください。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">time</span><span class="p">:</span><span class="s">&quot;H:i&quot;</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">datetime.datetime.now()</span></tt> と同等な値なら、出力は文字列
<tt class="docutils literal"><span class="pre">&quot;01:23&quot;</span></tt> なります。</p>
</div>
<div class="section" id="s-timesince">
<span id="s-tfilter-timesince"></span><h3>timesince<a class="headerlink" href="#timesince" title="Permalink to this headline">¶</a></h3>
<p>日付を経過時間の形式にフォーマットします (例えば、 &quot;4 days, 6 hours&quot;) 。</p>
<p>オプションの引数として、 比較対象として使う時刻をとります (引数を省略すると
<em>現在時刻</em> を使います)。例えば、 <tt class="docutils literal"><span class="pre">blog_date</span></tt> が <tt class="docutils literal"><span class="pre">1</span> <span class="pre">June</span> <span class="pre">2006</span></tt> を表す日
付オブジェクトで、 <tt class="docutils literal"><span class="pre">comment_date</span></tt> が <tt class="docutils literal"><span class="pre">08:00</span> <span class="pre">on</span> <span class="pre">1</span> <span class="pre">June</span> <span class="pre">2006</span></tt> を表す日時
オブジェクトの場合、 <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">blog_date|timesince:comment_date</span> <span class="pre">}}</span></tt> は
&quot;8 hours&quot; を返します。</p>
<p>最小の単位は分で、比較対象の時刻より以前の時刻に対しては
&quot;0 minutes&quot; を返します。</p>
</div>
<div class="section" id="s-timeuntil">
<span id="s-tfilter-timeuntil"></span><h3>timeuntil<a class="headerlink" href="#timeuntil" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">timesince</span></tt> に似ていますが、現在時刻から指定の日付または日時までの時刻を
計算します。</p>
<p>例えば、現在の日付が <tt class="docutils literal"><span class="pre">1</span> <span class="pre">June</span> <span class="pre">2006</span></tt> で、 <tt class="docutils literal"><span class="pre">conference_date</span></tt> が
<tt class="docutils literal"><span class="pre">29</span> <span class="pre">June</span> <span class="pre">2006</span></tt> の場合、 <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">conference_date|timeuntil</span> <span class="pre">}}</span></tt> は &quot;4 weeks&quot;
を返します。</p>
<p>オプションの引数として、 (<em>現在時刻</em> の代わりに) 比較対象として使う時刻をと
ります。 例えば、 <tt class="docutils literal"><span class="pre">from_date</span></tt> が <tt class="docutils literal"><span class="pre">22</span> <span class="pre">June</span> <span class="pre">2006</span></tt> の場合、
<tt class="docutils literal"><span class="pre">{{</span> <span class="pre">conference_date|timeuntil:from_date</span> <span class="pre">}}</span></tt> は &quot;1 week&quot; を返します。</p>
<p>オフセットつきの時刻とオフセットなしの時刻を比較すると、空の文字列を返しま
す。</p>
<p>最小の単位は分で、比較対象の時刻より以前の時刻に対しては
&quot;0 minutes&quot; を返します。</p>
</div>
<div class="section" id="s-title">
<span id="s-tfilter-title"></span><h3>title<a class="headerlink" href="#title" title="Permalink to this headline">¶</a></h3>
<p>文字列をタイトルケースに変換します。</p>
</div>
<div class="section" id="s-truncatewords">
<span id="s-tfilter-truncatewords"></span><h3>truncatewords<a class="headerlink" href="#truncatewords" title="Permalink to this headline">¶</a></h3>
<p>文字列を指定語数以下になるように切り詰めます。</p>
<p><strong>引数:</strong> 文字列を切り詰めるまでの語数</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">truncatewords</span><span class="p">:</span><span class="mi">2</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">&quot;Joel</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">slug&quot;</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">&quot;Joel</span> <span class="pre">is</span> <span class="pre">...&quot;</span></tt> になります。</p>
</div>
<div class="section" id="s-truncatewords-html">
<span id="s-tfilter-truncatewords_html"></span><h3>truncatewords_html<a class="headerlink" href="#truncatewords-html" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">truncatewords</span></tt> に似ていますが、 HTML タグを正しく扱えます。切り詰めを行
う時点で閉じていないタグがあれば、切り詰めた文字の直後に全て閉じます。</p>
<p>このタグの処理は <tt class="docutils literal"><span class="pre">truncatewords</span></tt> よりもやや非効率なので、 HTML テキストを
渡す場合にだけ使うようにしてください。</p>
</div>
<div class="section" id="s-unordered-list">
<span id="s-tfilter-unordered_list"></span><h3>unordered_list<a class="headerlink" href="#unordered-list" title="Permalink to this headline">¶</a></h3>
<p>再帰的に入れ子になったリストを入力にとり、 HTML の無番号リスト (UL,
unordered list) に変換します。<strong>ただし</strong>、最も外側の &lt;ul&gt; タグは表示しませ
ん。</p>
<div class="versionchanged">
<span class="title">Django 1.0 で変更されました:</span> <tt class="docutils literal"><span class="pre">unordered_list</span></tt> の引数の形式は、より分かりやすく変更されました。</div>
<p>リストは適切な形式になっているものとみなします。例えば、 <tt class="docutils literal"><span class="pre">var</span></tt> が
<tt class="docutils literal"><span class="pre">['States',</span> <span class="pre">['Kansas',</span> <span class="pre">['Lawrence',</span> <span class="pre">'Topeka'],</span> <span class="pre">'Illinois']]</span></tt> であれば、
<tt class="docutils literal"><span class="pre">{{</span> <span class="pre">var|unordered_list</span> <span class="pre">}}</span></tt> は以下のようになります:</p>
<pre>&lt;li&gt;States
&lt;ul&gt;
        &lt;li&gt;Kansas
        &lt;ul&gt;
                &lt;li&gt;Lawrence&lt;/li&gt;
                &lt;li&gt;Topeka&lt;/li&gt;
        &lt;/ul&gt;
        &lt;/li&gt;
        &lt;li&gt;Illinois&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;</pre>
<p>ノート: 以前の、より杓子定規で冗長な形式、
<tt class="docutils literal"><span class="pre">['States',</span> <span class="pre">[['Kansas',</span> <span class="pre">[['Lawrence',</span> <span class="pre">[]],</span> <span class="pre">['Topeka',</span> <span class="pre">[]]]],</span> <span class="pre">['Illinois',[]]]]</span></tt>
も継続してサポートしています。</p>
</div>
<div class="section" id="s-upper">
<span id="s-tfilter-upper"></span><h3>upper<a class="headerlink" href="#upper" title="Permalink to this headline">¶</a></h3>
<p>入力値をすべて大文字に変換します。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">upper</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">&quot;Joel</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">slug&quot;</span></tt> なら、出力は <tt class="docutils literal"><span class="pre">&quot;JOEL</span> <span class="pre">IS</span> <span class="pre">A</span> <span class="pre">SLUG&quot;</span></tt> になり
ます。</p>
</div>
<div class="section" id="s-urlencode">
<span id="s-tfilter-urlencode"></span><h3>urlencode<a class="headerlink" href="#urlencode" title="Permalink to this headline">¶</a></h3>
<p>入力値を URL で使えるようにエスケープします。</p>
</div>
<div class="section" id="s-urlize">
<span id="s-tfilter-urlize"></span><h3>urlize<a class="headerlink" href="#urlize" title="Permalink to this headline">¶</a></h3>
<p>平文で書かれた URL をクリック可能なリンクに変換します。</p>
<p>HTML マークアップの入ったテキストに <tt class="docutils literal"><span class="pre">urlize</span></tt> を適用すると、予想通りの出力
を得られない場合があるので注意してください。このフィルタは <em>素の</em> テキスト
に対してだけ使ってください。</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">urlize</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">&quot;Check</span> <span class="pre">out</span> <span class="pre">www.djangoproject.com&quot;</span></tt> なら、出力は
<tt class="docutils literal"><span class="pre">&quot;Check</span> <span class="pre">out</span> <span class="pre">&lt;a</span>
<span class="pre">href=&quot;http://www.djangoproject.com&quot;&gt;www.djangoproject.com&lt;/a&gt;&quot;</span></tt> になります。</p>
</div>
<div class="section" id="s-urlizetrunc">
<span id="s-tfilter-urlizetrunc"></span><h3>urlizetrunc<a class="headerlink" href="#urlizetrunc" title="Permalink to this headline">¶</a></h3>
<p>URL をクリック可能なリンクに変換します。このとき、指定の文字数以上の URL を
切り詰めます。</p>
<p><tt class="docutils literal"><span class="pre">urlize</span></tt> と同様、このフィルタは <em>素の</em> テキストに対してだけ使ってください。</p>
<p><strong>引数:</strong> URL を切り詰める長さ</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">urlizetrunc</span><span class="p">:</span><span class="mi">15</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">&quot;Check</span> <span class="pre">out</span> <span class="pre">www.djangoproject.com&quot;</span></tt> なら、出力は
<tt class="docutils literal"><span class="pre">'Check</span> <span class="pre">out</span> <span class="pre">&lt;a</span>
<span class="pre">href=&quot;http://www.djangoproject.com&quot;&gt;www.djangopr...&lt;/a&gt;'</span></tt> になります。</p>
</div>
<div class="section" id="s-wordcount">
<span id="s-tfilter-wordcount"></span><h3>wordcount<a class="headerlink" href="#wordcount" title="Permalink to this headline">¶</a></h3>
<p>語数を返します。</p>
</div>
<div class="section" id="s-wordwrap">
<span id="s-tfilter-wordwrap"></span><h3>wordwrap<a class="headerlink" href="#wordwrap" title="Permalink to this headline">¶</a></h3>
<p>指定した行幅で語列をラップします。</p>
<p><strong>引数:</strong> テキストをラップするまでの語数</p>
<p>使用例:</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="n">value</span><span class="o">|</span><span class="n">wordwrap</span><span class="p">:</span><span class="mi">5</span> <span class="p">}}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">value</span></tt> が <tt class="docutils literal"><span class="pre">Joel</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">slug</span></tt> なら、出力はこうなります:</p>
<pre>Joel
is a
slug</pre>
</div>
<div class="section" id="s-yesno">
<span id="s-tfilter-yesno"></span><h3>yesno<a class="headerlink" href="#yesno" title="Permalink to this headline">¶</a></h3>
<p>入力値 (真、偽、オプションで None) に応じて、引数に指定した文字のいずれかを
返します。</p>
<table class="docutils">
<colgroup>
<col width="15%" />
<col width="33%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">入力値</th>
<th class="head">引数</th>
<th class="head">出力</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="xref docutils literal"><span class="pre">True</span></tt></td>
<td><tt class="docutils literal"><span class="pre">&quot;yeah,no,maybe&quot;</span></tt></td>
<td><tt class="docutils literal"><span class="pre">yeah</span></tt></td>
</tr>
<tr><td><tt class="xref docutils literal"><span class="pre">False</span></tt></td>
<td><tt class="docutils literal"><span class="pre">&quot;yeah,no,maybe&quot;</span></tt></td>
<td><tt class="docutils literal"><span class="pre">no</span></tt></td>
</tr>
<tr><td><tt class="xref docutils literal"><span class="pre">None</span></tt></td>
<td><tt class="docutils literal"><span class="pre">&quot;yeah,no,maybe&quot;</span></tt></td>
<td><tt class="docutils literal"><span class="pre">maybe</span></tt></td>
</tr>
<tr><td><tt class="xref docutils literal"><span class="pre">None</span></tt></td>
<td><tt class="docutils literal"><span class="pre">&quot;yeah,no&quot;</span></tt></td>
<td><tt class="docutils literal"><span class="pre">&quot;no&quot;</span></tt> (None に対応する値が
ない場合は False 扱いになります)</td>
</tr>
</tbody>
</table>
<div class="section" id="s-id5">
<span id="s-other-tags-and-filter-libraries"></span><h4>その他のタグとフィルタライブラリ<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>Django には他にも二つのテンプレートタグライブラリがついてきます。これらのラ
イブラリは <tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt> 設定で明示的に有効化した上で、 <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">%}</span></tt>
タグを使ってテンプレート上にロードせねばなりません。</p>
</div>
</div>
</div>
<div class="section" id="s-django-contrib-humanize">
<h2>django.contrib.humanize<a class="headerlink" href="#django-contrib-humanize" title="Permalink to this headline">¶</a></h2>
<p>データを「ヒトにやさしい」表現にする上で便利な Django テンプレートフィルタ
です。 <a class="reference external" href="../contrib/humanize.html#ref-contrib-humanize"><em>django.contrib.humanize</em></a> を参照してください。</p>
</div>
<div class="section" id="s-django-contrib-markup">
<h2>django.contrib.markup<a class="headerlink" href="#django-contrib-markup" title="Permalink to this headline">¶</a></h2>
<p>以下のマークアップ言語を実装したテンプレートフィルタのコレクションです:</p>
<ul class="simple">
<li>Textile</li>
<li>Markdown</li>
<li>ReST (ReStructured Text)</li>
</ul>
<p>詳しくは <a class="reference external" href="../contrib/index.html#ref-contrib-markup"><em>markup</em></a> を参照してください。</p>
</div>
<div class="section" id="s-django-contrib-webdesign">
<h2>django.contrib.webdesign<a class="headerlink" href="#django-contrib-webdesign" title="Permalink to this headline">¶</a></h2>
<p>「Lorem Ipsum...」のような例文を出力するタグなど、ウェブサイトをデザインす
るときに役立つテンプレートタグを集めたものです。
<a class="reference external" href="../contrib/webdesign.html#ref-contrib-webdesign"><em>django.contrib.webdesign</em></a> も参照してください。</p>
</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference external" href="">組み込みタグ／フィルタリファレンス</a><ul>
<li><a class="reference external" href="#id2">組み込みタグリファレンス</a><ul>
<li><a class="reference external" href="#autoescape">autoescape</a></li>
<li><a class="reference external" href="#block">block</a></li>
<li><a class="reference external" href="#comment">comment</a></li>
<li><a class="reference external" href="#cycle">cycle</a></li>
<li><a class="reference external" href="#debug">debug</a></li>
<li><a class="reference external" href="#extends">extends</a></li>
<li><a class="reference external" href="#filter">filter</a></li>
<li><a class="reference external" href="#firstof">firstof</a></li>
<li><a class="reference external" href="#for">for</a></li>
<li><a class="reference external" href="#if">if</a></li>
<li><a class="reference external" href="#ifchanged">ifchanged</a></li>
<li><a class="reference external" href="#ifequal">ifequal</a></li>
<li><a class="reference external" href="#ifnotequal">ifnotequal</a></li>
<li><a class="reference external" href="#include">include</a></li>
<li><a class="reference external" href="#load">load</a></li>
<li><a class="reference external" href="#now">now</a></li>
<li><a class="reference external" href="#regroup">regroup</a></li>
<li><a class="reference external" href="#spaceless">spaceless</a></li>
<li><a class="reference external" href="#ssi">ssi</a></li>
<li><a class="reference external" href="#templatetag">templatetag</a></li>
<li><a class="reference external" href="#url">url</a></li>
<li><a class="reference external" href="#widthratio">widthratio</a></li>
<li><a class="reference external" href="#with">with</a></li>
</ul>
</li>
<li><a class="reference external" href="#id3">組み込みフィルタリファレンス</a><ul>
<li><a class="reference external" href="#add">add</a></li>
<li><a class="reference external" href="#addslashes">addslashes</a></li>
<li><a class="reference external" href="#capfirst">capfirst</a></li>
<li><a class="reference external" href="#center">center</a></li>
<li><a class="reference external" href="#cut">cut</a></li>
<li><a class="reference external" href="#date">date</a></li>
<li><a class="reference external" href="#default">default</a></li>
<li><a class="reference external" href="#default-if-none">default_if_none</a></li>
<li><a class="reference external" href="#dictsort">dictsort</a></li>
<li><a class="reference external" href="#dictsortreversed">dictsortreversed</a></li>
<li><a class="reference external" href="#divisibleby">divisibleby</a></li>
<li><a class="reference external" href="#escape">escape</a></li>
<li><a class="reference external" href="#escapejs">escapejs</a></li>
<li><a class="reference external" href="#filesizeformat">filesizeformat</a></li>
<li><a class="reference external" href="#first">first</a></li>
<li><a class="reference external" href="#fix-ampersands">fix_ampersands</a></li>
<li><a class="reference external" href="#floatformat">floatformat</a></li>
<li><a class="reference external" href="#force-escape">force_escape</a></li>
<li><a class="reference external" href="#get-digit">get_digit</a></li>
<li><a class="reference external" href="#iriencode">iriencode</a></li>
<li><a class="reference external" href="#join">join</a></li>
<li><a class="reference external" href="#last">last</a></li>
<li><a class="reference external" href="#length">length</a></li>
<li><a class="reference external" href="#length-is">length_is</a></li>
<li><a class="reference external" href="#linebreaks">linebreaks</a></li>
<li><a class="reference external" href="#linebreaksbr">linebreaksbr</a></li>
<li><a class="reference external" href="#linenumbers">linenumbers</a></li>
<li><a class="reference external" href="#ljust">ljust</a></li>
<li><a class="reference external" href="#lower">lower</a></li>
<li><a class="reference external" href="#make-list">make_list</a></li>
<li><a class="reference external" href="#phone2numeric">phone2numeric</a></li>
<li><a class="reference external" href="#pluralize">pluralize</a></li>
<li><a class="reference external" href="#pprint">pprint</a></li>
<li><a class="reference external" href="#random">random</a></li>
<li><a class="reference external" href="#removetags">removetags</a></li>
<li><a class="reference external" href="#rjust">rjust</a></li>
<li><a class="reference external" href="#safe">safe</a></li>
<li><a class="reference external" href="#slice">slice</a></li>
<li><a class="reference external" href="#slugify">slugify</a></li>
<li><a class="reference external" href="#stringformat">stringformat</a></li>
<li><a class="reference external" href="#striptags">striptags</a></li>
<li><a class="reference external" href="#time">time</a></li>
<li><a class="reference external" href="#timesince">timesince</a></li>
<li><a class="reference external" href="#timeuntil">timeuntil</a></li>
<li><a class="reference external" href="#title">title</a></li>
<li><a class="reference external" href="#truncatewords">truncatewords</a></li>
<li><a class="reference external" href="#truncatewords-html">truncatewords_html</a></li>
<li><a class="reference external" href="#unordered-list">unordered_list</a></li>
<li><a class="reference external" href="#upper">upper</a></li>
<li><a class="reference external" href="#urlencode">urlencode</a></li>
<li><a class="reference external" href="#urlize">urlize</a></li>
<li><a class="reference external" href="#urlizetrunc">urlizetrunc</a></li>
<li><a class="reference external" href="#wordcount">wordcount</a></li>
<li><a class="reference external" href="#wordwrap">wordwrap</a></li>
<li><a class="reference external" href="#yesno">yesno</a><ul>
<li><a class="reference external" href="#id5">その他のタグとフィルタライブラリ</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#django-contrib-humanize">django.contrib.humanize</a></li>
<li><a class="reference external" href="#django-contrib-markup">django.contrib.markup</a></li>
<li><a class="reference external" href="#django-contrib-webdesign">django.contrib.webdesign</a></li>
</ul>
</li>
</ul>

  <h3>前後のページ</h3>
  <ul>
    
      <li>前: <a href="index.html">テンプレートシステムリファレンス</a></li>
    
    
      <li>次: <a href="api.html">Python プログラマのための Django テンプレート言語ガイド</a></li>
    
  </ul>
  <h3>現在のページ:</h3>
  <ul>
      <li>
        <a href="../../index.html">Django v1.0 documentation</a>
        
          <ul><li><a href="../index.html">API リファレンス</a>
        
          <ul><li><a href="index.html">テンプレートシステムリファレンス</a>
        
        <ul><li>組み込みタグ／フィルタリファレンス</li></ul>
        </li></ul></li></ul>
      </li>
  </ul>  

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ref/templates/builtins.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">Aug 31, 2012</p>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="index.html" title="テンプレートシステムリファレンス">前へ</a> 
     |
    <a href="../index.html" title="API リファレンス" accesskey="U">上へ</a>
   |
    <a href="api.html" title="Python プログラマのための Django テンプレート言語ガイド">次へ</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>