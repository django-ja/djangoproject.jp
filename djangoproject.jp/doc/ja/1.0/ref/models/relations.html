<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>リレーションオブジェクトリファレンス &mdash; Django v1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="contents" title="Global table of contents" href="../../contents.html" />
    <link rel="index" title="Global index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="Django v1.0 documentation" href="../../index.html" />
    <link rel="up" title="モデル" href="index.html" />
    <link rel="next" title="モデルの Meta オプション" href="options.html" />
    <link rel="prev" title="モデルフィールドリファレンス" href="fields.html" />
  </head>
  <body>
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../index.html">Django v1.0 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">ホーム</a>  |
        <a title="Table of contents" href="../../contents.html">目次</a>  |
        <a title="Global index" href="../../genindex.html">索引</a>  |
        <a title="Search" href="../../modindex.html">モジュール一覧</a>
      </div>
      <div class="nav">
    &laquo; <a href="fields.html" title="モデルフィールドリファレンス">前へ</a> 
     |
    <a href="../index.html" title="API リファレンス" accesskey="U">上へ</a>
   |
    <a href="options.html" title="モデルの &lt;tt class="docutils literal docutils literal docutils literal"&gt;&lt;span class="pre"&gt;Meta&lt;/span&gt;&lt;/tt&gt; オプション">次へ</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-models-relations">
            
  
  <div class="section" id="s-id1">
<span id="s-ref-models-relations"></span><h1>リレーションオブジェクトリファレンス<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">revision-up-to:</th><td class="field-body">8961 (1.0)</td>
</tr>
</tbody>
</table>
<div class="section" id="s-foreignkey">
<h2>ForeignKey を経由した場合にマネジャから利用できる追加のメソッド<a class="headerlink" href="#foreignkey" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="django.db.models.QuerySet.add">
<!--[django.db.models.QuerySet.add]--><tt class="descclassname">QuerySet.</tt><tt class="descname">add</tt>(<em>obj1</em><span class="optional">[</span>, <em>obj2</em>, <em>...</em><span class="optional">]</span>)<a class="headerlink" href="#django.db.models.QuerySet.add" title="Permalink to this definition">¶</a></dt>
<dd><p>指定したモデルオブジェクトを、披リレーションのセットに追加し (リレーショ
ン先のオブジェクトからリレーションを張り)ます。</p>
<p>使い方:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Blog</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">Entry</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">234</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">entry_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="c"># Entry e を Blog b に関連づけます。</span>
</pre></div>
</dd></dl>

<dl class="method">
<dt>
<tt class="descname">QuerySet.create(**kwargs)`</tt></dt>
<dd><p>新たなオブジェクトを生成し、保存して、披リレーションのセットに追加しま
す。新たに生成されたオブジェクトを返します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Blog</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">entry_set</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">headline</span><span class="o">=</span><span class="s">&#39;Hello&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">body_text</span><span class="o">=</span><span class="s">&#39;Hi&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">pub_date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>

<span class="go"># e は自動的に保存されるので、 e.save() は呼ばなくてかまいません</span>
</pre></div>
<p>上の例は、下記と同じ処理を実現します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Blog</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">Entry</span><span class="p">(</span>
<span class="go">....     blog=b,</span>
<span class="go">....     headline=&#39;Hello&#39;,</span>
<span class="go">....     body_text=&#39;Hi&#39;,</span>
<span class="go">....     pub_date=datetime.date(2005, 1, 1)</span>
<span class="go">.... )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
<p>リレーションを定義するためのキーワード引数を指定する必要はないので注意
してください。上の例では、 <tt class="docutils literal"><span class="pre">create()</span></tt> に <tt class="docutils literal"><span class="pre">blog</span></tt> パラメタを渡してい
ません。 Django は <tt class="docutils literal"><span class="pre">Entry</span></tt> オブジェクトの <tt class="docutils literal"><span class="pre">blog</span></tt> フィールドに自動的
に <tt class="docutils literal"><span class="pre">b</span></tt> をセットします。</p>
</dd></dl>

<dl class="method">
<dt id="django.db.models.QuerySet.remove">
<!--[django.db.models.QuerySet.remove]--><tt class="descclassname">QuerySet.</tt><tt class="descname">remove</tt>(<em>obj1</em><span class="optional">[</span>, <em>obj2</em>, <em>...</em><span class="optional">]</span>)<a class="headerlink" href="#django.db.models.QuerySet.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>指定したオブジェクトを披リレーションセットから除去します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Blog</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">Entry</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">234</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">entry_set</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="c"># Disassociates Entry e from Blog b.</span>
</pre></div>
<p>データベースの一貫性を保持するために、このメソッドは <tt class="docutils literal"><span class="pre">null=True</span></tt> の
<tt class="docutils literal"><span class="pre">ForeignKey</span></tt> オブジェクトがリレーションを張っている先のモデルでしか使
えません。リレーションフィールドの値を <tt class="xref docutils literal"><span class="pre">None</span></tt> (<tt class="docutils literal"><span class="pre">NULL</span></tt>) にできなけれ
ば、あるオブジェクトを披リレーションセットから除去したときに、何らかの
他のオブジェクトに対してリレーションを張り直さなければならないからです。
上の例で、 <tt class="docutils literal"><span class="pre">b.entry_set()</span></tt> からの <tt class="docutils literal"><span class="pre">e</span></tt> の除去は <tt class="docutils literal"><span class="pre">e.blog</span> <span class="pre">=</span> <span class="pre">None</span></tt> に
相当しますが、 <tt class="docutils literal"><span class="pre">blog</span></tt> の <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> には <tt class="docutils literal"><span class="pre">null=True</span></tt> が設定され
ていないので、これは無効な操作です。</p>
</dd></dl>

<dl class="method">
<dt id="django.db.models.QuerySet.clear">
<!--[django.db.models.QuerySet.clear]--><tt class="descclassname">QuerySet.</tt><tt class="descname">clear</tt>()<a class="headerlink" href="#django.db.models.QuerySet.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>披リレーションセットから、全てのオブジェクトを除去します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Blog</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">entry_set</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
<p>このメソッドは、リレーション元のオブジェクトを削除せず、ただ単にリレー
ションを解除するだけなので注意してください。</p>
<p><tt class="docutils literal"><span class="pre">remove()</span></tt> と同様、 <tt class="docutils literal"><span class="pre">clear()</span></tt> は <tt class="docutils literal"><span class="pre">null=True</span></tt> の <tt class="docutils literal"><span class="pre">ForeignKey</span></tt>
でしか使えません。</p>
</dd></dl>

</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference external" href="">リレーションオブジェクトリファレンス</a><ul>
<li><a class="reference external" href="#foreignkey">ForeignKey を経由した場合にマネジャから利用できる追加のメソッド</a></li>
</ul>
</li>
</ul>

  <h3>前後のページ</h3>
  <ul>
    
      <li>前: <a href="fields.html">モデルフィールドリファレンス</a></li>
    
    
      <li>次: <a href="options.html">モデルの <tt class="docutils literal docutils literal docutils literal"><span class="pre">Meta</span></tt> オプション</a></li>
    
  </ul>
  <h3>現在のページ:</h3>
  <ul>
      <li>
        <a href="../../index.html">Django v1.0 documentation</a>
        
          <ul><li><a href="../index.html">API リファレンス</a>
        
          <ul><li><a href="index.html">モデル</a>
        
        <ul><li>リレーションオブジェクトリファレンス</li></ul>
        </li></ul></li></ul>
      </li>
  </ul>  

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ref/models/relations.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">Aug 31, 2012</p>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="fields.html" title="モデルフィールドリファレンス">前へ</a> 
     |
    <a href="../index.html" title="API リファレンス" accesskey="U">上へ</a>
   |
    <a href="options.html" title="モデルの &lt;tt class="docutils literal docutils literal docutils literal"&gt;&lt;span class="pre"&gt;Meta&lt;/span&gt;&lt;/tt&gt; オプション">次へ</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>