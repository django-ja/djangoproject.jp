<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>フォーム API &mdash; Django v1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../../',
          VERSION:     '1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="contents" title="Global table of contents" href="../../contents.html" />
    <link rel="index" title="Global index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="Django v1.0 documentation" href="../../index.html" />
    <link rel="up" title="フォーム API" href="index.html" />
    <link rel="next" title="フォームフィールド" href="fields.html" />
    <link rel="prev" title="フォーム API" href="index.html" />
  </head>
  <body>
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../index.html">Django v1.0 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">ホーム</a>  |
        <a title="Table of contents" href="../../contents.html">目次</a>  |
        <a title="Global index" href="../../genindex.html">索引</a>  |
        <a title="Search" href="../../modindex.html">モジュール一覧</a>
      </div>
      <div class="nav">
    &laquo; <a href="index.html" title="フォーム API">前へ</a> 
     |
    <a href="../index.html" title="API リファレンス" accesskey="U">上へ</a>
   |
    <a href="fields.html" title="フォームフィールド">次へ</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-forms-api">
            
  
  <div class="section" id="s-api">
<span id="s-the-forms-api"></span><span id="s-ref-forms-api"></span><h1>フォーム API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">revision-up-to:</th><td class="field-body">8961 (1.0)</td>
</tr>
</tbody>
</table>
<div class="admonition- admonition">
<p class="first admonition-title">このドキュメントについて</p>
<p class="last">このドキュメントでは、 Django のフォーム API の細かい部分を解説していま
す。まずは <a class="reference external" href="../../topics/forms/index.html#topics-forms-index"><em>フォーム処理入門</em></a> を先に読んでく
ださい。</p>
</div>
<div class="section" id="s-id1">
<span id="s-bound-and-unbound-forms"></span><span id="s-ref-forms-api-bound-unbound"></span><h2>束縛フォームと非束縛フォーム<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>フォームのインスタンスには、何らかのデータの集まりが結び付いた
<strong>束縛 (bound) フォーム</strong> と、そうでない <strong>非束縛 (unbound) フォーム</strong> があ
ります。</p>
<ul class="simple">
<li>データと <strong>結び付いている</strong> フォームは、データを検証機能する機能と、
フォームを HTML にレンダリングするときにデータを HTML 形式で表示する
機能をあわせ持っています。</li>
<li>データと <strong>結び付いていない</strong> フォームには検証機能はありません (検証
すべきデータがないから当然ですね!) が、空のフォームを HTML としてレン
ダリングする機能は備えています。</li>
</ul>
<p>非束縛フォームのインスタンスを生成するには、単にフォームクラスのインスタン
ス化を行います:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
</pre></div>
<p>フォームにデータを結び付けるには、データの入った辞書をフォームクラスのコン
ストラクタの第一引数に渡します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;hello&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&#39;Hi there&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;sender&#39;</span><span class="p">:</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;cc_myself&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
<p>この辞書の中では、キーは各フィールドの名前であり、フォームクラスの各属性に
対応しています。値は検証すべきデータです。通常、値は文字列にしますが、必ず
しも文字列でなくてかまいません。値にどんなデータ型を指定指定できるかは、フィー
ルドの型に依存します。</p>
<dl class="attribute">
<dt id="django.forms.Form.is_bound">
<!--[django.forms.Form.is_bound]--><tt class="descclassname">Form.</tt><tt class="descname">is_bound</tt><a class="headerlink" href="#django.forms.Form.is_bound" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>実行時に束縛フォームと非束縛フォームを区別したければ、フォームの
<a title="django.forms.Form.is_bound" class="reference internal" href="#django.forms.Form.is_bound"><tt class="xref docutils literal"><span class="pre">is_bound</span></tt></a> 属性を調べてください:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_bound</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">({</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;hello&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_bound</span>
<span class="go">True</span>
</pre></div>
<p>空の辞書を渡すと、空のデータの入った <em>束縛フォーム</em> を返します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">({})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_bound</span>
<span class="go">True</span>
</pre></div>
<p>束縛フォームのインスタンスに入っているデータに何らかの変更を加えたい場合や、
束縛フォームを変換して、何らかのデータの入った非束縛フォームにしたい場合に
は、新たにフォームインスタンスを生成してください。フォームインスタンス内の
データを変更する方法はありません。一度フォームインスタンスを生成したら、デー
タの有無に関わらず、インスタンス内のデータは変更不能だと考えてください。</p>
</div>
<div class="section" id="s-id2">
<span id="s-using-forms-to-validate-data"></span><h2>フォームを使ってデータを検証する<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="django.forms.Form.is_valid">
<!--[django.forms.Form.is_valid]--><tt class="descclassname">Form.</tt><tt class="descname">is_valid</tt>()<a class="headerlink" href="#django.forms.Form.is_valid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>フォームオブジェクトの主要な役割はデータの検証です。束縛フォームのインスタ
ンスに対して <a title="django.forms.Form.is_valid" class="reference internal" href="#django.forms.Form.is_valid"><tt class="xref docutils literal"><span class="pre">is_valid()</span></tt></a> メソッドを呼び出すと、データの検証を
行って、その結果をブール値で返します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;hello&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&#39;Hi there&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;sender&#39;</span><span class="p">:</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;cc_myself&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
<p>無効なデータを入れてみましょう。例えば、 <tt class="docutils literal"><span class="pre">subject</span></tt> を空にしてみます
(フィールドは全てデフォルトで必須なためエラーになります)。また、
<tt class="docutils literal"><span class="pre">sender</span></tt> に不正なメールアドレス情報を入れてみます:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&#39;Hi there&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;sender&#39;</span><span class="p">:</span> <span class="s">&#39;invalid e-mail address&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;cc_myself&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
</pre></div>
<dl class="attribute">
<dt id="django.forms.Form.errors">
<!--[django.forms.Form.errors]--><tt class="descclassname">Form.</tt><tt class="descname">errors</tt><a class="headerlink" href="#django.forms.Form.errors" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><a title="django.forms.Form.errors" class="reference internal" href="#django.forms.Form.errors"><tt class="xref docutils literal"><span class="pre">errors</span></tt></a> という属性にアクセスすると、エラーメッセージの入った辞
書を参照できます:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{&#39;sender&#39;: [u&#39;Enter a valid e-mail address.&#39;], &#39;subject&#39;: [u&#39;This field is required.&#39;]}</span>
</pre></div>
<p>この辞書では、フィールド名がキーに、エラーメッセージを表す Unicode 文字列のリ
ストが値になっています。エラーメッセージがリストになっているのは、一つのフィー
ルドに対して複数のエラーが存在し得るからです。</p>
<p><a title="django.forms.Form.is_valid" class="reference internal" href="#django.forms.Form.is_valid"><tt class="xref docutils literal"><span class="pre">is_valid()</span></tt></a> を呼ばなくても <a title="django.forms.Form.errors" class="reference internal" href="#django.forms.Form.errors"><tt class="xref docutils literal"><span class="pre">errors</span></tt></a> にはアクセスで
きます。 <a title="django.forms.Form.is_valid" class="reference internal" href="#django.forms.Form.is_valid"><tt class="xref docutils literal"><span class="pre">is_valid()</span></tt></a> を呼び出すか、 <a title="django.forms.Form.errors" class="reference internal" href="#django.forms.Form.errors"><tt class="xref docutils literal"><span class="pre">errors</span></tt></a> に最
初にアクセスした時点で、フォームのデータが自動的に検証されます。</p>
<p><a title="django.forms.Form.errors" class="reference internal" href="#django.forms.Form.errors"><tt class="xref docutils literal"><span class="pre">errors</span></tt></a> や <a title="django.forms.Form.is_valid" class="reference internal" href="#django.forms.Form.is_valid"><tt class="xref docutils literal"><span class="pre">is_valid()</span></tt></a> に何度アクセスしても、検証
のルーチンはたった一度しか呼ばれません。別の見方をすれば、検証の処理には副
作用があり、その副作用はたった一度しか呼び出されないということです。</p>
<div class="section" id="s-id3">
<span id="s-behavior-of-unbound-forms"></span><h3>非束縛フォームの動作<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>データを含まないフォームに対して &quot;cleaned&quot; を実行しても無意味でしかありませ
んが、参考までに非束縛フォームに対して行ったときの動作を示しておきます:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">errors</span>
<span class="go">{}</span>
</pre></div>
</div>
</div>
<div class="section" id="s-id4">
<span id="s-accessing-clean-data"></span><h2>「クリーニング済み」のデータにアクセスする<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>フォームクラスの各フィールドには、データの検証だけでなく、「クリーニング」
を行う役割もあります。データのクリーニングとは、データを一貫性のある書式に
正規化することです。データのクリーニングはとても素晴らしい機能で、クリーニ
ングを行うと、ユーザがフィールドに色々な形式でデータを入力しても、常に一貫
性を持った出力を得られます。</p>
<p>例えば、 <tt class="docutils literal"><span class="pre">DateField</span></tt> はデータを Python の <tt class="docutils literal"><span class="pre">datetime.date</span></tt> オブジェクト
に正規化します。フィールドの値は、 <tt class="docutils literal"><span class="pre">'1994-07-15'</span></tt> のような形式の文字列で
も、 <tt class="docutils literal"><span class="pre">datetime.date</span></tt> オブジェクトでも、その他の形式でも、 <tt class="docutils literal"><span class="pre">DateField</span></tt>
は有効なデータであるかぎり、常に出力を <tt class="docutils literal"><span class="pre">datetime.date</span></tt> オブジェクトで正規
化します。</p>
<p>データセットの入ったフォームインスタンスを生成して検証を行うと、
<tt class="docutils literal"><span class="pre">cleaned_data</span></tt> 属性を介してクリーニング済みのデータにアクセスできるようにな
ります:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;hello&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&#39;Hi there&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;sender&#39;</span><span class="p">:</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;cc_myself&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span>
<span class="go">{&#39;cc_myself&#39;: True, &#39;message&#39;: u&#39;Hi there&#39;, &#39;sender&#39;: u&#39;foo@example.com&#39;, &#39;subject&#39;: u&#39;hello&#39;}</span>
</pre></div>
<div class="versionchanged">
<span class="title">Django 1.0 で変更されました:</span> <tt class="docutils literal"><span class="pre">cleaned_data</span></tt> 属性は、以前のリリースでは <tt class="docutils literal"><span class="pre">clean_data</span></tt> と呼ばれてい
ました。</div>
<p><tt class="docutils literal"><span class="pre">CharField</span></tt> や <tt class="docutils literal"><span class="pre">EmailField</span></tt> のようなテキストベースのフィールドは、常に
入力を Unicode 文字列に変換します。エンコーディングに関する解説は、このドキュ
メントの後の方でカバーする予定です。</p>
<p>データが <em>まだ検証されていない</em> 場合、フォームインスタンスには
<tt class="docutils literal"><span class="pre">cleaned_data</span></tt> 属性がありません:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&#39;Hi there&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;sender&#39;</span><span class="p">:</span> <span class="s">&#39;invalid e-mail address&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;cc_myself&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;ContactForm&#39; object has no attribute &#39;cleaned_data&#39;</span>
</pre></div>
<p>フォームを生成するときに追加の値を渡した場合でも、 <tt class="docutils literal"><span class="pre">cleaned_data</span></tt> の中に
入るキーは、フォーム内で定義されているフィールド <em>だけ</em> です。以下の例でも、
<tt class="docutils literal"><span class="pre">ContactForm</span></tt> のコンストラクタに追加のフィールドデータを渡していますが、
<tt class="docutils literal"><span class="pre">cleaned_data</span></tt> が返すのは <tt class="docutils literal"><span class="pre">ContactForm</span></tt> で定義されているフィールドだけで
す:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;hello&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&#39;Hi there&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;sender&#39;</span><span class="p">:</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;cc_myself&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;extra_field_1&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;extra_field_2&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;extra_field_3&#39;</span><span class="p">:</span> <span class="s">&#39;baz&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span> <span class="c"># Doesn&#39;t contain extra_field_1, etc.</span>
<span class="go">{&#39;cc_myself&#39;: True, &#39;message&#39;: u&#39;Hi there&#39;, &#39;sender&#39;: u&#39;foo@example.com&#39;, &#39;subject&#39;: u&#39;hello&#39;}</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">cleaned_data</span></tt> には、 <tt class="docutils literal"><span class="pre">Form</span></tt> 内で定義されている <em>全ての</em> フィールドのキー
と値が入ります。フォームに渡したデータに、必須でないフィールドの値が入って
いない場合でもです。下の例では、データ辞書には <tt class="docutils literal"><span class="pre">nick_name</span></tt> フィールドの値
が入っていませんが、 <tt class="docutils literal"><span class="pre">cleaned_data</span></tt> には空の値が入っています:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">OptionalPersonForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">nick_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">u&#39;John&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">u&#39;Lennon&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">OptionalPersonForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span>
<span class="go">{&#39;nick_name&#39;: u&#39;&#39;, &#39;first_name&#39;: u&#39;John&#39;, &#39;last_name&#39;: u&#39;Lennon&#39;}</span>
</pre></div>
<p>この例で、 <tt class="docutils literal"><span class="pre">cleaned_data</span></tt> の中の <tt class="docutils literal"><span class="pre">nick_name</span></tt> は空文字列なのは、
<tt class="docutils literal"><span class="pre">nick_name</span></tt> が <tt class="docutils literal"><span class="pre">CharField</span></tt> であり、 <tt class="docutils literal"><span class="pre">CharField</span></tt> は空の値を空文字列と
みなすからです。各フィールドタイプは「空の」値が設定されています。例えば、
<tt class="docutils literal"><span class="pre">DateField</span></tt> の場合、空の値は空文字列ではなく <tt class="xref docutils literal"><span class="pre">None</span></tt> になります。
空の値を持ったフィールドの詳しい挙動は、「組み込みフィールドクラス」の節の
各フィールドの説明中の「空のフォームデータに対する値」の項目を参照してくだ
さい。</p>
<p>個別のフォームフィールド (フィールド名ごと) やフォーム全体 (複数フィールド
の組み合わせ) に対してバリデーションを実現するコードを書けます。詳しくは、
<a class="reference external" href="validation.html#ref-forms-validation"><em>フォームやフィールドのバリデーション</em></a> を参照してください。</p>
</div>
<div class="section" id="s-html">
<span id="s-outputting-forms-as-html"></span><h2>フォームを HTML として出力する<a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h2>
<p>フォームオブジェクトの二つ目の仕事は、フォームの HTML へのレンダリングです。
フォームを HTML として出力するには、フォームをインスタンス化して、
<tt class="docutils literal"><span class="pre">print</span></tt> で出力します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
</pre></div>
<p>束縛フォームの場合、フォームのデータは適切な形で HTML 出力されます。例えば、
フィールドが <tt class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">type=&quot;text&quot;&gt;</span></tt> で表される場合、データは <tt class="docutils literal"><span class="pre">value</span></tt> 属
性の中に出力されます。フィールドが <tt class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">type=&quot;checkbox&quot;&gt;</span></tt> であれば、
必要に応じて <tt class="docutils literal"><span class="pre">checked=&quot;checked&quot;</span></tt> が入ります:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;hello&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&#39;Hi there&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;sender&#39;</span><span class="p">:</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;cc_myself&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; value=&quot;hello&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; value=&quot;Hi there&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; value=&quot;foo@example.com&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; checked=&quot;checked&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
</pre></div>
<p>デフォルトの出力は 2 カラムの HTML テーブルになり、各フィールドが一つの
<tt class="docutils literal"><span class="pre">&lt;tr&gt;</span></tt> タグの中に収まります。以下の点に注意してください:</p>
<ul class="simple">
<li>柔軟性をもたせるために、出力中には <tt class="docutils literal"><span class="pre">&lt;table&gt;</span></tt> と <tt class="docutils literal"><span class="pre">&lt;/table&gt;</span></tt> タグが
入っていません。また、 <tt class="docutils literal"><span class="pre">&lt;form&gt;</span></tt> と <tt class="docutils literal"><span class="pre">&lt;/form&gt;</span></tt> や、
<tt class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">type=&quot;submit&quot;&gt;</span></tt> もありません。これらのタグは自分で入れる必
要があります。</li>
<li>各フィールドタイプには、それぞれデフォルトの HTML 表現があります。
<tt class="docutils literal"><span class="pre">CharField</span></tt> や <tt class="docutils literal"><span class="pre">EmailField</span></tt> は <tt class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">type=&quot;text&quot;&gt;</span></tt> で表され、
<tt class="docutils literal"><span class="pre">BooleanField</span></tt> は <tt class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">type=&quot;checkbox&quot;&gt;</span></tt> になります。とはいえ、
これらは便利なデフォルト値にすぎません。ウィジェット (widget) を使え
ば、フィールドの表現にどのような HTML を使うかを指定できます。これに
ついては後で説明する予定です。</li>
<li>各タグの <tt class="docutils literal"><span class="pre">name</span></tt> 属性は <tt class="docutils literal"><span class="pre">ContactForm</span></tt> クラスの属性名から直接取り出
して使われます。</li>
<li><tt class="docutils literal"><span class="pre">'Subject:'</span></tt>, <tt class="docutils literal"><span class="pre">'Message:'</span></tt>, <tt class="docutils literal"><span class="pre">'Cc</span> <span class="pre">myself:'</span></tt>  といった各フィール
ドのテキストラベルは、フィールド名のアンダースコアを全てスペースに変
換し、先頭の文字を大文字にして生成します。これもまたデフォルト値にす
ぎず、手動でもラベルを設定できるようになっています。</li>
<li>各テキストラベルは HTML の <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグで囲われています。このタグ
には <tt class="docutils literal"><span class="pre">for</span></tt> 属性が付いていて、対応するフォームフィールドの <tt class="docutils literal"><span class="pre">id</span></tt> 属
性に対応しています。属性の値はフィールド名の前に <tt class="docutils literal"><span class="pre">'id_'</span></tt> を付けたも
のになります。 <tt class="docutils literal"><span class="pre">id</span></tt> 属性や <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグはフォーム生成の定石に従っ
て組み込まれているものですが、この振舞は自分で変更できます。</li>
</ul>
<p>テーブル組みによる出力は <tt class="docutils literal"><span class="pre">print</span></tt> した時に出力されるデフォルトで、他にもい
くつか出力スタイルがあります。各スタイルはフォームオブジェクトのメソッドと
して利用でき、各々のレンダリングメソッドは Unicode オブジェクトを返すように
なっています。</p>
<div class="section" id="s-as-p">
<h3><tt class="docutils literal"><span class="pre">as_p()</span></tt><a class="headerlink" href="#as-p" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">Form.as_p()</span></tt> はフォームを一連の <tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt> タグの集まりで組みます。各
<tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt> タグの中に一つのフィールドが入ります:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">as_p</span><span class="p">()</span>
<span class="go">u&#39;&lt;p&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; /&gt;&lt;/p&gt;\n&lt;p&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/p&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_p</span><span class="p">()</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/p&gt;</span>
</pre></div>
</div>
<div class="section" id="s-as-ul">
<h3><tt class="docutils literal"><span class="pre">as_ul()</span></tt><a class="headerlink" href="#as-ul" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">Form.as_ul()</span></tt> はフォームを一連の <tt class="docutils literal"><span class="pre">&lt;li&gt;</span></tt> タグで組みます。各 <tt class="docutils literal"><span class="pre">&lt;li&gt;</span></tt> タ
グの中に一つのフィールドが入ります。 <tt class="docutils literal"><span class="pre">as_ul()</span></tt> は <tt class="docutils literal"><span class="pre">&lt;ul&gt;</span></tt> や <tt class="docutils literal"><span class="pre">&lt;/ul&gt;</span></tt>
を出力に <em>含めません</em> 。これは、ユーザが <tt class="docutils literal"><span class="pre">&lt;ul&gt;</span></tt> タグの HTML 属性を好きに
指定できるようにするためです:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">u&#39;&lt;li&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; /&gt;&lt;/li&gt;\n&lt;li&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/li&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/li&gt;</span>
</pre></div>
</div>
<div class="section" id="s-as-table">
<h3><tt class="docutils literal"><span class="pre">as_table()</span></tt><a class="headerlink" href="#as-table" title="Permalink to this headline">¶</a></h3>
<p>最後に、 <tt class="docutils literal"><span class="pre">Form.as_table()</span></tt> はフォームを <tt class="docutils literal"><span class="pre">&lt;table&gt;</span></tt> で組みます。これは
<tt class="docutils literal"><span class="pre">print</span></tt> で出力したときに使われる形式と同じです。実際、フォームオブジェク
トを <tt class="docutils literal"><span class="pre">print</span></tt> すると、背後では <tt class="docutils literal"><span class="pre">as_table()</span></tt> が呼び出されるようになってい
ます:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">()</span>
<span class="go">u&#39;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">()</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
</pre></div>
</div>
<div class="section" id="s-label">
<span id="s-configuring-html-label-tags"></span><span id="s-ref-forms-api-configuring-label"></span><h3><tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグの出力設定<a class="headerlink" href="#label" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグは、あるラベルテキストがどのフォーム要素に対応づけられてい
るかを知らせるタグです。 <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグがあると、フォームの利便性が増し、
入力補助デバイスで操作しやすくなります。 <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグは常に使うようにし
ておくよう勧めます。</p>
<p>デフォルトでは、フォームのレンダリングメソッドを呼び出すと、各フォーム要素
に <tt class="docutils literal"><span class="pre">id</span></tt> 属性が追加され、ラベルを <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグで囲って出力します。
<tt class="docutils literal"><span class="pre">id</span></tt> 属性の値はフォームのフィールド名の前に <tt class="docutils literal"><span class="pre">id_</span></tt> を付けたものになりま
す。とはいえ、 <tt class="docutils literal"><span class="pre">id</span></tt> 属性の命名規則を変えたり、そもそも <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> を出力
したくない人のために、この仕様は設定変更できるようになっています。</p>
<p><tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグや <tt class="docutils literal"><span class="pre">id</span></tt> の挙動を変更するには、 <tt class="docutils literal"><span class="pre">Form</span></tt> コンストラクタの
<tt class="docutils literal"><span class="pre">auto_id</span></tt> 引数を使います。この引数は <tt class="xref docutils literal"><span class="pre">True</span></tt> 、 <tt class="xref docutils literal"><span class="pre">False</span></tt> 、文字列のいず
れかで指定せねばなりません。</p>
<p><tt class="docutils literal"><span class="pre">auto_id</span></tt> を <tt class="xref docutils literal"><span class="pre">False</span></tt> にすると、フォーム出力に <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグや
<tt class="docutils literal"><span class="pre">id</span></tt> 属性が含まれなくなります:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">()</span>
<span class="go">&lt;tr&gt;&lt;th&gt;Subject:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;Message:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;Sender:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;sender&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;Cc myself:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;Subject: &lt;input type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Message: &lt;input type=&quot;text&quot; name=&quot;message&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Sender: &lt;input type=&quot;text&quot; name=&quot;sender&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Cc myself: &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; /&gt;&lt;/li&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_p</span><span class="p">()</span>
<span class="go">&lt;p&gt;Subject: &lt;input type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;Message: &lt;input type=&quot;text&quot; name=&quot;message&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;Sender: &lt;input type=&quot;text&quot; name=&quot;sender&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;Cc myself: &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; /&gt;&lt;/p&gt;</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">auto_id</span></tt> が <tt class="xref docutils literal"><span class="pre">True</span></tt> の場合、フォームの出力には <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグが入り、
各フォームフィールドの <tt class="docutils literal"><span class="pre">id</span></tt> 属性の値にはフィールド名をそのまま使います:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">()</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;subject&quot;&gt;Subject:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;message&quot;&gt;Message:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;message&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;sender&quot;&gt;Sender:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;sender&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;cc_myself&quot;&gt;Cc myself:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;cc_myself&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;message&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;sender&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;cc_myself&quot; /&gt;&lt;/li&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_p</span><span class="p">()</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;message&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;sender&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;cc_myself&quot; /&gt;&lt;/p&gt;</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">auto_id</span></tt> がフォーマット文字 <tt class="docutils literal"><span class="pre">'%s'</span></tt> を含む文字列になっている場合、フォー
ム出力は <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグを含むようになり、タグの <tt class="docutils literal"><span class="pre">id</span></tt> 属性はフォーマット
文字列に従って生成されます。例えば、フォーマット文字列が <tt class="docutils literal"><span class="pre">field_%s</span></tt> の場
合、 <tt class="docutils literal"><span class="pre">subject</span></tt> という名前のフィールドの <tt class="docutils literal"><span class="pre">id</span></tt> は <tt class="docutils literal"><span class="pre">'field_subject'</span></tt> に
なります。出力例は以下のようになります:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;id_for_</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">()</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_for_subject&quot;&gt;Subject:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;id_for_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_for_message&quot;&gt;Message:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_for_message&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_for_sender&quot;&gt;Sender:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_for_sender&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_for_cc_myself&quot;&gt;Cc myself:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_for_cc_myself&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;id_for_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_for_message&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_for_sender&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_for_cc_myself&quot; /&gt;&lt;/li&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_p</span><span class="p">()</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;id_for_subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;id_for_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;id_for_message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_for_message&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;id_for_sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_for_sender&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;&lt;label for=&quot;id_for_cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_for_cc_myself&quot; /&gt;&lt;/p&gt;</span>
</pre></div>
<p><tt class="docutils literal"><span class="pre">auto_id</span></tt> がこれ以外の偽でない値、つまり <tt class="docutils literal"><span class="pre">%s</span></tt> を含まない文字列のような
値の場合、 <tt class="docutils literal"><span class="pre">auto_id</span></tt> は <tt class="xref docutils literal"><span class="pre">True</span></tt> に設定されたものとみなされます。</p>
<p>デフォルトでは、 <tt class="docutils literal"><span class="pre">auto_id</span></tt> は <tt class="docutils literal"><span class="pre">'id_%s'</span></tt> に設定されています。</p>
<p>通常、フォームのレンダ時には、ラベル名の直後にコロン (<tt class="docutils literal"><span class="pre">:</span></tt>) が付加されます。
このコロンを他の文字に変更したり、文字を出力しないようにするには、
<tt class="docutils literal"><span class="pre">label_suffix</span></tt> パラメタを使います:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;id_for_</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">label_suffix</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_subject&quot;&gt;Subject&lt;/label&gt; &lt;input id=&quot;id_for_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_message&quot;&gt;Message&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_for_message&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_sender&quot;&gt;Sender&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_for_sender&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_cc_myself&quot;&gt;Cc myself&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_for_cc_myself&quot; /&gt;&lt;/li&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;id_for_</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">label_suffix</span><span class="o">=</span><span class="s">&#39; -&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_subject&quot;&gt;Subject -&gt;&lt;/label&gt; &lt;input id=&quot;id_for_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_message&quot;&gt;Message -&gt;&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_for_message&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_sender&quot;&gt;Sender -&gt;&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_for_sender&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_for_cc_myself&quot;&gt;Cc myself -&gt;&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_for_cc_myself&quot; /&gt;&lt;/li&gt;</span>
</pre></div>
<p>ラベルの付加は、ラベルの最後の文字が区切り文字 (<tt class="docutils literal"><span class="pre">.</span></tt>, <tt class="docutils literal"><span class="pre">!</span></tt>, <tt class="docutils literal"><span class="pre">?</span></tt>, <tt class="docutils literal"><span class="pre">:</span></tt>
のいずれか) でない場合にのみ行われます。</p>
</div>
<div class="section" id="s-id5">
<span id="s-notes-on-field-ordering"></span><h3>フィールドの並び順について<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">as_p()</span></tt> や <tt class="docutils literal"><span class="pre">as_ul()</span></tt>, <tt class="docutils literal"><span class="pre">as_table()</span></tt> ショートカットを使うと、各フィー
ルドは Form クラス内で定義された順に出力されます。例えば、上の
<tt class="docutils literal"><span class="pre">ContactForm</span></tt> の例では、フィールドの並び順は <tt class="docutils literal"><span class="pre">subject</span></tt>, <tt class="docutils literal"><span class="pre">message</span></tt>,
<tt class="docutils literal"><span class="pre">sender</span></tt>, <tt class="docutils literal"><span class="pre">cc_myself</span></tt> です。 HTML 出力の中でフィールドの並び順を変更し
たければ、クラス定義内でのフィールドの並び順を変更してください。</p>
</div>
<div class="section" id="s-id6">
<span id="s-how-errors-are-displayed"></span><h3>エラーの出力方法<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>束縛フォームオブジェクトをレンダすると、フォームの検証がまだであればレンダ
リング操作の中で自動的に検証が行われ、エラーがあれば HTML 出力中の該当フィー
ルドの付近に <tt class="docutils literal"><span class="pre">&lt;ul</span> <span class="pre">class=errorlist&gt;</span></tt> でエラー内容が表示されます。エラーメッ
セージ中の具体的なエラー表示位置は、どのメソッドでフォームをレンダしている
かによります:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&#39;Hi there&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;sender&#39;</span><span class="p">:</span> <span class="s">&#39;invalid e-mail address&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s">&#39;cc_myself&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">()</span>
<span class="go">&lt;tr&gt;&lt;th&gt;Subject:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;Message:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; value=&quot;Hi there&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;Sender:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;Enter a valid e-mail address.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;sender&quot; value=&quot;invalid e-mail address&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="go">&lt;tr&gt;&lt;th&gt;Cc myself:&lt;/th&gt;&lt;td&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;cc_myself&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Subject: &lt;input type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Message: &lt;input type=&quot;text&quot; name=&quot;message&quot; value=&quot;Hi there&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;Enter a valid e-mail address.&lt;/li&gt;&lt;/ul&gt;Sender: &lt;input type=&quot;text&quot; name=&quot;sender&quot; value=&quot;invalid e-mail address&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Cc myself: &lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;cc_myself&quot; /&gt;&lt;/li&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_p</span><span class="p">()</span>
<span class="go">&lt;p&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;Subject: &lt;input type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;Message: &lt;input type=&quot;text&quot; name=&quot;message&quot; value=&quot;Hi there&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;Enter a valid e-mail address.&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;Sender: &lt;input type=&quot;text&quot; name=&quot;sender&quot; value=&quot;invalid e-mail address&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;Cc myself: &lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;cc_myself&quot; /&gt;&lt;/p&gt;</span>
</pre></div>
</div>
<div class="section" id="s-id7">
<span id="s-customizing-the-error-list-format"></span><h3>エラーリストの出力形式をカスタマイズする<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>デフォルトでは、バリデーション時エラーの出力内容は、
<tt class="docutils literal"><span class="pre">django.forms.util.ErrorList</span></tt> を使ってフォーマットされます。エラーの表
示に他のクラスを使いたければ、以下のようにフォームの生成時に指定します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.forms.util</span> <span class="kn">import</span> <span class="n">ErrorList</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">DivErrorList</span><span class="p">(</span><span class="n">ErrorList</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_divs</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">as_divs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span> <span class="k">return</span> <span class="s">u&#39;&#39;</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s">u&#39;&lt;div class=&quot;errorlist&quot;&gt;</span><span class="si">%s</span><span class="s">&lt;/div&gt;&#39;</span> <span class="o">%</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">u&#39;&lt;div class=&quot;error&quot;&gt;</span><span class="si">%s</span><span class="s">&lt;/div&gt;&#39;</span> <span class="o">%</span> <span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">error_class</span><span class="o">=</span><span class="n">DivErrorList</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">as_p</span><span class="p">()</span>
<span class="go">&lt;div class=&quot;errorlist&quot;&gt;&lt;div class=&quot;error&quot;&gt;This field is required.&lt;/div&gt;&lt;/div&gt;</span>
<span class="go">&lt;p&gt;Subject: &lt;input type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;Message: &lt;input type=&quot;text&quot; name=&quot;message&quot; value=&quot;Hi there&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;div class=&quot;errorlist&quot;&gt;&lt;div class=&quot;error&quot;&gt;Enter a valid e-mail address.&lt;/div&gt;&lt;/div&gt;</span>
<span class="go">&lt;p&gt;Sender: &lt;input type=&quot;text&quot; name=&quot;sender&quot; value=&quot;invalid e-mail address&quot; /&gt;&lt;/p&gt;</span>
<span class="go">&lt;p&gt;Cc myself: &lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;cc_myself&quot; /&gt;&lt;/p&gt;</span>
</pre></div>
</div>
<div class="section" id="s-id8">
<span id="s-more-granular-output"></span><h3>より細かな出力調整<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">as_p()</span></tt> や <tt class="docutils literal"><span class="pre">as_ul()</span></tt>, <tt class="docutils literal"><span class="pre">as_table()</span></tt> といったメソッドは、単に面倒臭が
りの開発者むけに用意されているショートカットでしかなく、他のやり方でもフォー
ムを表示できます。</p>
<p>フォーム中のあるフィールドの HTML を表示するには、フォームを辞書のように扱
い、フィールドの名前をキーにして参照し、その値を出力します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;subject&#39;</span><span class="p">]</span>
<span class="go">&lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span>
<span class="go">&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; /&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;sender&#39;</span><span class="p">]</span>
<span class="go">&lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; /&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;cc_myself&#39;</span><span class="p">]</span>
<span class="go">&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;</span>
</pre></div>
<p>フィールドを引数にして <tt class="docutils literal"><span class="pre">str()</span></tt> や <tt class="docutils literal"><span class="pre">unicode()</span></tt> を呼び出すと、レンダ結果
の HTML をそれぞれ string 型や Unicode 型のオブジェクトで返します:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;subject&#39;</span><span class="p">])</span>
<span class="go">&#39;&lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">unicode</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;subject&#39;</span><span class="p">])</span>
<span class="go">u&#39;&lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&#39;</span>
</pre></div>
<p>フィールド固有の出力を行った場合でも、フォームオブジェクトの <tt class="docutils literal"><span class="pre">auto_id</span></tt> 設
定は有効です:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span>
<span class="go">&lt;input type=&quot;text&quot; name=&quot;message&quot; /&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;id_</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span>
<span class="go">&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; /&gt;</span>
</pre></div>
<p>あるフィールドに関するエラーのリストを取得するには、フィールドの <tt class="docutils literal"><span class="pre">errors</span></tt>
属性にアクセスします。このフィールドはリストライクなオブジェクトで、 HTML
として出力すると <tt class="docutils literal"><span class="pre">&lt;ul</span> <span class="pre">class=&quot;errorlist&quot;&gt;</span></tt> のリストになります:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;hi&#39;</span><span class="p">,</span> <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;sender&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;cc_myself&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span>
<span class="go">&lt;input type=&quot;text&quot; name=&quot;message&quot; /&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span>
<span class="go">[u&#39;This field is required.&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span>
<span class="go">&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">[</span><span class="s">&#39;subject&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;subject&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;subject&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
<span class="go">&#39;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="s-id9">
<span id="s-binding-uploaded-files-to-a-form"></span><span id="s-binding-uploaded-files"></span><h2>アップロードされたファイルをフォームに結びつける<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<span class="title">Django 1.0 で新たに登場しました.</span> </div>
<p><tt class="docutils literal"><span class="pre">FileField</span></tt> や <tt class="docutils literal"><span class="pre">ImageField</span></tt> といったフィールドの入ったフォームの扱いは、
通常のフォームより少しだけ複雑です。</p>
<p>まず、フォームからファイルをアップロードさせるには、 <tt class="docutils literal"><span class="pre">&lt;form&gt;</span></tt> エレメント
で <tt class="docutils literal"><span class="pre">enctype</span></tt> が <tt class="docutils literal"><span class="pre">&quot;multipart/form-data&quot;</span></tt> に設定されていなければなりませ
ん:</p>
<pre>&lt;form enctype="multipart/form-data" method="post" action="/foo/"&gt;</pre>
<p>次に、フォームを使う場合、ファイルデータをフォームに結びつけなければ
なりません。ファイルデータは通常のフォームデータとは分けて扱われるので、
フォームに <tt class="docutils literal"><span class="pre">FileField</span></tt> や <tt class="docutils literal"><span class="pre">ImageField</span></tt> が入っている場合、束縛フォームを
作るには、第2引数にファイルデータを渡さねばなりません。ContactForm に
<tt class="docutils literal"><span class="pre">mugshot</span></tt> という名前の <tt class="docutils literal"><span class="pre">ImageField</span></tt> を組み込んだ場合、下記のようにして、
顔写真 (mugshot) のファイルデータをフォームに結びつけます:</p>
<pre># 画像ファイルフィールドつきの束縛フォーム
&gt;&gt;&gt; from django.core.files.uploadedfile import SimpleUploadedFile
&gt;&gt;&gt; data = {'subject': 'hello',
...         'message': 'Hi there',
...         'sender': 'foo@example.com',
...         'cc_myself': True}
&gt;&gt;&gt; file_data = {'mugshot': SimpleUploadedFile('face.jpg', &lt;file data&gt;)}
&gt;&gt;&gt; f = ContactFormWithMugshot(data, file_data)</pre>
<p>実践的には、 <tt class="docutils literal"><span class="pre">request.FILES</span></tt> をファイルデータのソースとして指定することに
なるでしょう (<tt class="docutils literal"><span class="pre">request.POST</span></tt> をフォームデータのソースにするのと同様です):</p>
<pre># 画像ファイルフィールドにリクエストからデータを渡す
&gt;&gt;&gt; f = ContactFormWithMugshot(request.POST, request.FILES)</pre>
<p>非束縛フォームの構築は通常通りで、フォームデータとファイルデータの <em>両方</em>
を省略します:</p>
<pre># Unbound form with a image field
&gt;&gt;&gt; f = ContactFormWithMugshot()</pre>
<div class="section" id="s-id10">
<span id="s-testing-for-multipart-forms"></span><h3>マルチパート形式のフォームをテストする<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>再利用可能なビューやテンプレートを書いているのなら、フォームがマルチパー
ト形式であるかどうか前もって分からない場合もあるでしょう。
<tt class="docutils literal"><span class="pre">is_multipart()</span></tt> メソッドを使うと、フォームがマルチパート形式でエンコード
されたデータの提出を要求しているかどうかを調べられます:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactFormWithMugshot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">is_multipart</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
<p>テンプレートの中では、以下のようにして使います:</p>
<pre>{% if form.is_multipart %}
    &lt;form enctype="multipart/form-data" method="post" action="/foo/"&gt;
{% else %}
    &lt;form method="post" action="/foo/"&gt;
{% endif %}
{{ form }}
&lt;/form&gt;</pre>
</div>
</div>
<div class="section" id="s-id11">
<span id="s-subclassing-forms"></span><h2>フォームのサブクラス化<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>同じフィールドを持つようなフォームクラスをいくつも作りたい場合、サブクラス
化を用いると冗長性を排除できます。</p>
<p>フォームクラスをサブクラス化すると、できたフォームクラスには親クラスの全て
のフィールドが入っています。サブクラスで定義したフィールドは親クラスのフィー
ルドの後に続きます。</p>
<p>以下の例では、 <tt class="docutils literal"><span class="pre">ContactFormWithPriority</span></tt> には <tt class="docutils literal"><span class="pre">ContactForm</span></tt> の全てのフィー
ルドと、 <tt class="docutils literal"><span class="pre">priority</span></tt> という追加のフィールドが入っています。
<tt class="docutils literal"><span class="pre">ContactForm</span></tt> のフィールドは先に表示されます:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ContactFormWithPriority</span><span class="p">(</span><span class="n">ContactForm</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">priority</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactFormWithPriority</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;Subject: &lt;input type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Message: &lt;input type=&quot;text&quot; name=&quot;message&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Sender: &lt;input type=&quot;text&quot; name=&quot;sender&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Cc myself: &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Priority: &lt;input type=&quot;text&quot; name=&quot;priority&quot; /&gt;&lt;/li&gt;</span>
</pre></div>
<p>複数のフォームを親クラスにしたサブクラス化も可能です。この場合、親クラスの
フォームは「混ぜ込み (mix-in)」クラスのように扱われます。以下の例では、
<tt class="docutils literal"><span class="pre">BeatleForm</span></tt> が <tt class="docutils literal"><span class="pre">PersonForm</span></tt> と <tt class="docutils literal"><span class="pre">InstrumentForm</span></tt> を (この順番で)
サブクラス化しています。フィールドのリストには、親クラスのフィールドが順番
に表示されます:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">PersonForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">InstrumentForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">instrument</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">BeatleForm</span><span class="p">(</span><span class="n">PersonForm</span><span class="p">,</span> <span class="n">InstrumentForm</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">haircut_type</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">BeatleForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">b</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;First name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Instrument: &lt;input type=&quot;text&quot; name=&quot;instrument&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;Haircut type: &lt;input type=&quot;text&quot; name=&quot;haircut_type&quot; /&gt;&lt;/li&gt;</span>
</pre></div>
</div>
<div class="section" id="s-id12">
<span id="s-prefixes-for-forms"></span><span id="s-form-prefix"></span><h2>フォームのプレフィクス<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<dl class="attribute">
<dt id="django.forms.Form.prefix">
<!--[django.forms.Form.prefix]--><tt class="descclassname">Form.</tt><tt class="descname">prefix</tt><a class="headerlink" href="#django.forms.Form.prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Django のフォームは、一つの <tt class="docutils literal"><span class="pre">&lt;form&gt;</span></tt> タグの中に複数入れられます。各々の
フォームに独自の名前空間を持たせるには、 <tt class="docutils literal"><span class="pre">prefix</span></tt> キーワード引数を使いま
す:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mother</span> <span class="o">=</span> <span class="n">PersonForm</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;mother&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">father</span> <span class="o">=</span> <span class="n">PersonForm</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;father&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">mother</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_mother-first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;mother-first_name&quot; id=&quot;id_mother-first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_mother-last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;mother-last_name&quot; id=&quot;id_mother-last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">father</span><span class="o">.</span><span class="n">as_ul</span><span class="p">()</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_father-first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;father-first_name&quot; id=&quot;id_father-first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="go">&lt;li&gt;&lt;label for=&quot;id_father-last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;father-last_name&quot; id=&quot;id_father-last_name&quot; /&gt;&lt;/li&gt;</span>
</pre></div>
</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference external" href="">フォーム API</a><ul>
<li><a class="reference external" href="#id1">束縛フォームと非束縛フォーム</a></li>
<li><a class="reference external" href="#id2">フォームを使ってデータを検証する</a><ul>
<li><a class="reference external" href="#id3">非束縛フォームの動作</a></li>
</ul>
</li>
<li><a class="reference external" href="#id4">「クリーニング済み」のデータにアクセスする</a></li>
<li><a class="reference external" href="#html">フォームを HTML として出力する</a><ul>
<li><a class="reference external" href="#as-p"><tt class="docutils literal"><span class="pre">as_p()</span></tt></a></li>
<li><a class="reference external" href="#as-ul"><tt class="docutils literal"><span class="pre">as_ul()</span></tt></a></li>
<li><a class="reference external" href="#as-table"><tt class="docutils literal"><span class="pre">as_table()</span></tt></a></li>
<li><a class="reference external" href="#label"><tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> タグの出力設定</a></li>
<li><a class="reference external" href="#id5">フィールドの並び順について</a></li>
<li><a class="reference external" href="#id6">エラーの出力方法</a></li>
<li><a class="reference external" href="#id7">エラーリストの出力形式をカスタマイズする</a></li>
<li><a class="reference external" href="#id8">より細かな出力調整</a></li>
</ul>
</li>
<li><a class="reference external" href="#id9">アップロードされたファイルをフォームに結びつける</a><ul>
<li><a class="reference external" href="#id10">マルチパート形式のフォームをテストする</a></li>
</ul>
</li>
<li><a class="reference external" href="#id11">フォームのサブクラス化</a></li>
<li><a class="reference external" href="#id12">フォームのプレフィクス</a></li>
</ul>
</li>
</ul>

  <h3>前後のページ</h3>
  <ul>
    
      <li>前: <a href="index.html">フォーム API</a></li>
    
    
      <li>次: <a href="fields.html">フォームフィールド</a></li>
    
  </ul>
  <h3>現在のページ:</h3>
  <ul>
      <li>
        <a href="../../index.html">Django v1.0 documentation</a>
        
          <ul><li><a href="../index.html">API リファレンス</a>
        
          <ul><li><a href="index.html">フォーム API</a>
        
        <ul><li>フォーム API</li></ul>
        </li></ul></li></ul>
      </li>
  </ul>  

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ref/forms/api.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">Aug 31, 2012</p>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="index.html" title="フォーム API">前へ</a> 
     |
    <a href="../index.html" title="API リファレンス" accesskey="U">上へ</a>
   |
    <a href="fields.html" title="フォームフィールド">次へ</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>