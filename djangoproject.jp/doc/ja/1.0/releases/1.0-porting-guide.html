<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>アプリケーションを Django 0.96 から 1.0 に移行する &mdash; Django v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="contents" title="Global table of contents" href="../contents.html" />
    <link rel="index" title="Global index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Django v1.0 documentation" href="../index.html" />
    <link rel="up" title="Django 1.0 リリースノート" href="1.0.html" />
    <link rel="next" title="Django の内部" href="../internals/index.html" />
    <link rel="prev" title="Django 1.0 リリースノート" href="1.0.html" />
  </head>
  <body>
  <div id="outdated-warning" class="doc-floating-warning" style="position: relative;">
    このドキュメントの Django のバージョンにはセキュリティ上の脆弱性があるため、すでにサポートが終了されています。新しいバージョンにアップグレードしてください！<a href="https://docs.djangoproject.com/ja/">最新の Django のバージョンのドキュメントはこちら</a>
  </div>
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Django v1.0 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">ホーム</a>  |
        <a title="Table of contents" href="../contents.html">目次</a>  |
        <a title="Global index" href="../genindex.html">索引</a>  |
        <a title="Search" href="../modindex.html">モジュール一覧</a>
      </div>
      <div class="nav">
    &laquo; <a href="1.0.html" title="Django 1.0 リリースノート">前へ</a> 
     |
    <a href="index.html" title="リリースノート" accesskey="U">上へ</a>
   |
    <a href="../internals/index.html" title="Django の内部">次へ</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="releases-1.0-porting-guide">
            
  
  <div class="section" id="s-django-0-96-1-0">
<h1>アプリケーションを Django 0.96 から 1.0 に移行する<a class="headerlink" href="#django-0-96-1-0" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">revision-up-to:</th><td class="field-body">8961 (1.0)</td>
</tr>
</tbody>
</table>
<p>Django 1.0 は、いくつかの点で 0.96 との互換性を失っています。</p>
<p>このガイドは、 0.96 のプロジェクトやアプリケーションを 1.0 に移行する手助け
として書かれています。ドキュメントの最初の部分には、 1.0 で動作させるために
必要な変更のうち、よくあるものを説明しています。この部分の説明に従って移行
しても、まだ動作しないようなら、 <a class="reference external" href="less-common-changes">ややマイナーな変更</a> を参照して、細かな変更に基づく互換性の問題について
調べてください。</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">このポーティングガイドでは、コードを手早く移行することに焦点を絞ってい
ますが、 <a class="reference external" href="1.0.html#releases-1-0"><em>1.0 リリースノート</em></a> では、 1.0 で登場した
新しい機能をより詳しく解説しています。</p>
</div>
<div class="section" id="s-id2">
<h2>一般的な変更<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>この節では、 0.96 から 1.0 への移行の際に大半のユーザが行わねばならない変更
を解説しています。</p>
<div class="section" id="s-unicode">
<span id="s-use-unicode"></span><h3>Unicode を使う<a class="headerlink" href="#unicode" title="Permalink to this headline">¶</a></h3>
<p>文字列リテラル (<tt class="docutils literal"><span class="pre">'foo'</span></tt>) を Unicode リテラル (<tt class="docutils literal"><span class="pre">u'foo'</span></tt>) に変更してくだ
さい。 Django は全体で一貫して Unicode を使うようになりました。ほとんどの場
所で、通常の文字列はそのまま使えますが、 Unicode リテラルを明示的に使ってお
けば、ややこしい問題が発生するのを防げます。</p>
<p>詳しくは <a class="reference external" href="../ref/unicode.html#ref-unicode"><em>Django での Unicode の扱い</em></a> を参照してください。</p>
</div>
<div class="section" id="s-id3">
<span id="s-models-chagnes"></span><h3>モデル<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>モデルファイルにおける大きな変更は、以下の通りです:</p>
<div class="section" id="s-maxlength-max-length">
<h4><tt class="docutils literal"><span class="pre">maxlength</span></tt> を <tt class="docutils literal"><span class="pre">max_length</span></tt> に変更する<a class="headerlink" href="#maxlength-max-length" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">maxlength</span></tt> 引数を <tt class="docutils literal"><span class="pre">max_length</span></tt> に変更してください (フォームフィールド
との一貫性のための変更です)。</p>
</div>
<div class="section" id="s-str-unicode">
<h4><tt class="docutils literal"><span class="pre">__str__</span></tt> を <tt class="docutils literal"><span class="pre">__unicode__</span></tt> に置き換える<a class="headerlink" href="#str-unicode" title="Permalink to this headline">¶</a></h4>
<p>モデルの <tt class="docutils literal"><span class="pre">__str__</span></tt> を <tt class="docutils literal"><span class="pre">__unicode__</span></tt> メソッドに置き換え、メソッドから
<a class="reference external" href="use-unicode">Unicode を返す</a> (<tt class="docutils literal"><span class="pre">u'foo'</span></tt>) ようにしてください。</p>
</div>
<div class="section" id="s-prepopulated-from">
<h4><tt class="docutils literal"><span class="pre">prepopulated_from</span></tt> をなくす<a class="headerlink" href="#prepopulated-from" title="Permalink to this headline">¶</a></h4>
<p>モデルフィールドから <tt class="docutils literal"><span class="pre">prepopulated_from</span></tt> 引数をなくしてください。この引数
はもう有効でなく、 <tt class="docutils literal"><span class="pre">AdminModel</span></tt> クラスの <tt class="docutils literal"><span class="pre">admin.py</span></tt> に移されました。
admin に関する詳しい変更内容は、後述の <a class="reference external" href="the-admin">admin の変更</a> を参照し
てください。</p>
</div>
<div class="section" id="s-class-admin-admin-py">
<h4><tt class="docutils literal"><span class="pre">class</span> <span class="pre">Admin:</span></tt> を <tt class="docutils literal"><span class="pre">admin.py</span></tt> と置き換える<a class="headerlink" href="#class-admin-admin-py" title="Permalink to this headline">¶</a></h4>
<p>モデルから <tt class="docutils literal"><span class="pre">class</span> <span class="pre">Admin</span></tt> 宣言を除去してください。モデル内にそのまま残って
いても影響はありませんが、何の効果もありません。アプリケーションを admin に
登録するには、 <tt class="docutils literal"><span class="pre">admin.py</span></tt> ファイルに宣言を移す必要があります。詳しくは
<a class="reference external" href="the-admin">admin の変更</a> を参照してください。</p>
</div>
<div class="section" id="s-id6">
<h4>admin の変更例<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">models.py</span></tt> ファイルに対する変更を以下に示しましょう:</p>
<p>旧 (0.96 ) <tt class="docutils literal"><span class="pre">models.py</span></tt>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">maxlength</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">maxlength</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">maxlength</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">prepopulate_from</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">))</span>

    <span class="k">class</span> <span class="nc">Admin</span><span class="p">:</span>
        <span class="n">list_display</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>
</pre></div>
<p>新 (1.0 ) <tt class="docutils literal"><span class="pre">models.py</span></tt>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">u&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>
</pre></div>
<p>新しい (1.0 の) <tt class="docutils literal"><span class="pre">admin.py</span></tt>:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">Author</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">]</span>
    <span class="n">prepopulated_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;slug&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;first_name&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">)</span>
    <span class="p">}</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="n">AuthorAdmin</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-id7">
<span id="s-the-admin"></span><h3>admin の変更<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>1.0 で追加された大きな変更の一つに、新しい admin API があります。 Django の
管理インタフェース (<tt class="docutils literal"><span class="pre">django.contrib.admin</span></tt>) は完全にリファクタされました。
admin の定義は完全にモデル定義から脱カップリングされ、admin のフレームワー
クは Django の新たなフォーム処理ライブラリを使うよう書き直されました。また、
思い通りに拡張したりカスタマイズしたりできるようになりました。</p>
<p>この変更により、 <tt class="docutils literal"><span class="pre">class</span> <span class="pre">Admin</span></tt> 宣言を全て書き直す必要があります。
<tt class="docutils literal"><span class="pre">class</span> <span class="pre">Admin</span></tt> から <tt class="docutils literal"><span class="pre">admin.py</span></tt> ファイルの <tt class="docutils literal"><span class="pre">admin.site.register()</span></tt> 呼び
出しへの変更方法は、 <a class="reference external" href="models-changes">モデルの変更</a> ですでに触れました。
以下では、 <tt class="docutils literal"><span class="pre">Admin</span></tt> 宣言を新たな書式に書き換える上で必要な細かい点について
説明します。</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://www.djangosnippets.org/">djangosnippets</a> のコントリビュータの一人が、
<a class="reference external" href="http://www.djangosnippets.org/snippets/603/">models.py をスキャンして admin.py を生成するスクリプト</a> を書いていま
す。</p>
</div>
<div class="section" id="s-id11">
<h4>インラインの宣言方法<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">edit_inline</span></tt> オプションは <tt class="docutils literal"><span class="pre">admin.py</span></tt> に移されました。例を以下に示しま
す:</p>
<p>旧 (0.96):</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">edit_inline</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">STACKED</span><span class="p">,</span> <span class="n">num_in_admin</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
<p>新 (1.0):</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">ChildInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">StackedInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Child</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="mi">3</span>

<span class="k">class</span> <span class="nc">ParentAdmin</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Parent</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">ChildInline</span><span class="p">]</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Parent</span><span class="p">,</span> <span class="n">ParentAdmin</span><span class="p">)</span>
</pre></div>
<p>詳しくは <a class="reference external" href="../ref/contrib/admin.html#admin-inlines"><em>InlineModelAdmin オブジェクト</em></a> を参照してください。</p>
</div>
<div class="section" id="s-fields-fieldsets">
<h4><tt class="docutils literal"><span class="pre">fields</span></tt> を簡単にする、または <tt class="docutils literal"><span class="pre">fieldsets</span></tt> を使う<a class="headerlink" href="#fields-fieldsets" title="Permalink to this headline">¶</a></h4>
<p>旧来の <tt class="docutils literal"><span class="pre">fields</span></tt> はややこしい書式でしたが、簡単になりました。旧来の記法は
まだ使えますが、 <tt class="docutils literal"><span class="pre">fieldsets</span></tt> を使う方がよいでしょう。</p>
<p>旧 (0.96):</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">ModelOne</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">class</span> <span class="nc">Admin</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">)}),</span>
        <span class="p">)</span>

<span class="k">class</span> <span class="nc">ModelTwo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">class</span> <span class="nc">Admin</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="s">&#39;group1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">),</span>   <span class="s">&#39;classes&#39;</span><span class="p">:</span> <span class="s">&#39;collapse&#39;</span><span class="p">}),</span>
            <span class="p">(</span><span class="s">&#39;group2&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span><span class="s">&#39;eggs&#39;</span><span class="p">),</span> <span class="s">&#39;classes&#39;</span><span class="p">:</span> <span class="s">&#39;collapse wide&#39;</span><span class="p">}),</span>
        <span class="p">)</span>
</pre></div>
<p>新 (1.0):</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">ModelOneAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ModelTwoAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s">&#39;group1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">),</span>   <span class="s">&#39;classes&#39;</span><span class="p">:</span> <span class="s">&#39;collapse&#39;</span><span class="p">}),</span>
        <span class="p">(</span><span class="s">&#39;group2&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;spam&#39;</span><span class="p">,</span><span class="s">&#39;eggs&#39;</span><span class="p">),</span> <span class="s">&#39;classes&#39;</span><span class="p">:</span> <span class="s">&#39;collapse wide&#39;</span><span class="p">}),</span>
    <span class="p">)</span>
</pre></div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li>変更の詳しい内容やその理由は <a class="reference external" href="http://code.djangoproject.com/wiki/NewformsAdminBranch">NewformsAdminBranch の wiki ページ</a>
で説明しています。</li>
<li>新しい admin には、他にもたくさんの機能があります。詳しくは
<a class="reference external" href="../ref/contrib/admin.html#ref-contrib-admin"><em>admin のドキュメント</em></a> を参照してください。</li>
</ul>
</div>
</div>
</div>
<div class="section" id="s-urls">
<h3>URLs<a class="headerlink" href="#urls" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-urls-py">
<h4>ルート <tt class="docutils literal"><span class="pre">urls.py</span></tt> を修正する<a class="headerlink" href="#urls-py" title="Permalink to this headline">¶</a></h4>
<p>admin サイトをルートの <tt class="docutils literal"><span class="pre">urls.py</span></tt> に組み込んでいるのなら、以下のように変更
してください。</p>
<p>旧 (0.96) <tt class="docutils literal"><span class="pre">urls.py</span></tt>:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;django.contrib.admin.urls&#39;</span><span class="p">)),</span>

    <span class="c"># ... the rest of your URLs here ...</span>
<span class="p">)</span>
</pre></div>
<p>新 (1.0) <tt class="docutils literal"><span class="pre">urls.py</span></tt>:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># The next two lines enable the admin and load each admin.py file:</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s">r&#39;^admin/(.*)&#39;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">root</span><span class="p">),</span>

    <span class="c"># ... the rest of your URLs here ...</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-id13">
<h3>ビュー<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-newforms-django-forms">
<h4><tt class="docutils literal"><span class="pre">newforms</span></tt> の代わりに <tt class="docutils literal"><span class="pre">django.forms</span></tt> を使う<a class="headerlink" href="#newforms-django-forms" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">django.newforms</span></tt> を <tt class="docutils literal"><span class="pre">django.forms</span></tt> に置き換えてください。 Django 1.0
は (0.96 で登場した) <tt class="docutils literal"><span class="pre">newforms</span></tt> モジュールを単に <tt class="docutils literal"><span class="pre">forms</span></tt> と呼びます。
<tt class="docutils literal"><span class="pre">oldforms</span></tt> はなくなりました。</p>
<p>すでに新しいフォームを使っているのなら、 import 文を変更するだけです。
<tt class="docutils literal"><span class="pre">from</span> <span class="pre">django</span> <span class="pre">import</span> <span class="pre">newforms</span> <span class="pre">as</span> <span class="pre">forms</span></tt> から <tt class="docutils literal"><span class="pre">from</span> <span class="pre">django</span> <span class="pre">import</span> <span class="pre">forms</span></tt>
に書き換えてください。</p>
<p>古いフォームシステムを使っているのなら、フォームを書き直す必要があります。
まずは <a class="reference external" href="../topics/forms/index.html#topics-forms-index"><em>forms のドキュメント</em></a> を読むところから始
めてください。</p>
</div>
<div class="section" id="s-api">
<h4>アップロードファイルの処理に新しい API を使う<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h4>
<p>アップロードファイルを扱うコードを書き換えてください。すなわち、これまでの
コードでは <tt class="docutils literal"><span class="pre">request.FILES</span></tt> のエントリを単なる辞書として扱っていましたが、
<a title="django.core.files.UploadedFile" class="reference external" href="../topics/http/file-uploads.html#django.core.files.UploadedFile"><tt class="xref docutils literal"><span class="pre">UploadedFile</span></tt></a> のインスタンスとして扱ってください。
旧来の辞書としての書式はもう使えません。</p>
<p>従って、以下のような書き方のビュー:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">[</span><span class="s">&#39;file_field_name&#39;</span><span class="p">]</span>
    <span class="o">...</span>
</pre></div>
<p>には、以下の点に注意して変更を施す必要があります:</p>
<table class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">旧 (0.96)</th>
<th class="head">新 (1.0)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">f['content']</span></tt></td>
<td><tt class="docutils literal"><span class="pre">f.read()</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">f['filename']</span></tt></td>
<td><tt class="docutils literal"><span class="pre">f.name</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">f['content-type']</span></tt></td>
<td><tt class="docutils literal"><span class="pre">f.content_type</span></tt></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="s-id14">
<h3>テンプレート<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-id15">
<h4>オートエスケープを使う<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p>テンプレートシステムは、デフォルトで変数の出力に自動 HTML エスケープを施す
ようになりました。詳しくは <a class="reference external" href="../topics/templates.html#automatic-html-escaping"><em>HTML の自動エスケープ</em></a> を参照してくださ
い。</p>
<p>個々の変数に対する自動エスケープを無効化するには、 <a class="reference external" href="../ref/templates/builtins.html#tfilter-safe"><tt class="xref docutils literal"><span class="pre">safe</span></tt></a> フィルタ
を使ってください:</p>
<div class="highlight"><pre>エスケープされるよ: <span class="cp">{{</span> <span class="nv">data</span> <span class="cp">}}</span>
エスケープされないよ: <span class="cp">{{</span> <span class="nv">data</span><span class="o">|</span><span class="nf">safe</span> <span class="cp">}}</span>
</pre></div>
<p>テンプレート全体で自動エスケープを無効にするには、テンプレート (や、テンプ
レートの特定の部分) を <a class="reference external" href="../ref/templates/builtins.html#ttag-autoescape"><tt class="xref docutils literal"><span class="pre">autoescape</span></tt></a> タグで囲います:</p>
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">autoescape</span> <span class="nv">off</span> <span class="cp">%}</span>
   ... unescaped template content here ...
<span class="cp">{%</span> <span class="k">endautoescape</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s-id16">
<span id="s-less-common-changes"></span><h2>よりマイナーな変更<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<p>以下の変更は、些細で特殊なものです。これらの変更によって影響を受けるのは、
ごく一部の高度な使い方をしているユーザだけでしょう。とはいえ、この節を一読
して、自分のコードに当てはまる部分がないかチェックする価値はあるでしょう。</p>
<div class="section" id="s-id17">
<h3>シグナル<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>シグナルハンドラには全て <tt class="docutils literal"><span class="pre">**kwargs</span></tt> を追加してください。</li>
<li>シグナルハンドラの接続と解除、シグナルの送信は、
<tt class="docutils literal"><span class="pre">django.dispatch.dispatcher</span></tt> のモジュールメソッドではなく、
<a title="django.dispatch.Signal" class="reference external" href="../topics/signals.html#django.dispatch.Signal"><tt class="xref docutils literal"><span class="pre">Signal</span></tt></a> オブジェクトのメソッドを使ってください。</li>
<li><tt class="docutils literal"><span class="pre">sender</span></tt> オプションの指定から、 <tt class="docutils literal"><span class="pre">Anonymous</span></tt> および <tt class="docutils literal"><span class="pre">Any</span></tt> を外してく
ださい。これらのシンボルはもうありません。全てのセンダからシグナルを受け
取りたければ、 <tt class="docutils literal"><span class="pre">sender=None</span></tt> としてください。</li>
<li>カスタムシグナルを定義するときは、無名オブジェクトでなく、
<tt class="xref docutils literal"><span class="pre">django.dispatch.Signal`</span></tt> を使ってください。</li>
</ul>
<p>必要な変更点を手短にまとめた表を以下に示します:</p>
<table class="docutils">
<colgroup>
<col width="56%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">旧 (0.96)</th>
<th class="head">新 (1.0)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">def</span> <span class="pre">callback(sender)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">def</span> <span class="pre">callback(sender,</span> <span class="pre">**kwargs)</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">sig</span> <span class="pre">=</span> <span class="pre">object()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">sig</span> <span class="pre">=</span> <span class="pre">django.dispatch.Signal()</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">dispatcher.connect(callback,</span> <span class="pre">sig)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">sig.connect(callback)</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">dispatcher.send(sig,</span> <span class="pre">sender)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">sig.send(sender)</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">dispatcher.connect(callback,</span> <span class="pre">sig,</span> <span class="pre">sender=Any)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">sig.connect(callback,</span> <span class="pre">sender=None)</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="s-id18">
<h3>コメント<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<p>Django 0.96 の  <tt class="docutils literal"><span class="pre">django.contrib.comments</span></tt> アプリケーションを使っているの
なら、 1.0 で登場した新たなコメントアプリケーションに移行してください。詳し
くは <a class="reference external" href="../ref/contrib/comments/upgrade.html#ref-contrib-comments-upgrade"><em>Django の以前のコメントシステムからの移行</em></a> で解説しています。</p>
</div>
<div class="section" id="s-id19">
<h3>テンプレートタグ<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-spaceless">
<h4><a class="reference external" href="../ref/templates/builtins.html#ttag-spaceless"><tt class="xref docutils literal"><span class="pre">spaceless</span></tt></a> タグ<a class="headerlink" href="#spaceless" title="Permalink to this headline">¶</a></h4>
<p>HTML タグ間のスペースを除去する <a class="reference external" href="../ref/templates/builtins.html#ttag-spaceless"><tt class="xref docutils literal"><span class="pre">spaceless</span></tt></a> タグは、以前はスペースを
一つだけ残していましたが、 <em>全て</em> を除去するようになりました。</p>
</div>
</div>
<div class="section" id="s-id20">
<h3>ローカルフレーバ<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-us">
<h4>US ローカルフレーバ<a class="headerlink" href="#us" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">django.contrib.localflavor.usa</span></tt> は <tt class="xref docutils literal"><span class="pre">django.contrib.localflavor.us</span></tt>
に変更されました。他のローカルフレーバと命名方法を統一するためです。</p>
</div>
</div>
<div class="section" id="s-id21">
<h3>セッション<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-id22">
<h4>新たなセッションキーの取得<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">SeesionBase.get_new_session_key()</span></tt> は <tt class="docutils literal"><span class="pre">_get_new_session_key()</span></tt> にリネー
ムされました。 <tt class="docutils literal"><span class="pre">get_new_session_object()</span></tt> はもうありません。</p>
</div>
</div>
<div class="section" id="s-id23">
<h3>フィクスチャ<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-save">
<h4>行レコードのロード時に <tt class="docutils literal"><span class="pre">save()</span></tt> が呼ばれなくなる<a class="headerlink" href="#save" title="Permalink to this headline">¶</a></h4>
<p>以前は、レコード行を読むたびに、自動的にモデルの <tt class="docutils literal"><span class="pre">save()</span></tt> メソッドが呼び
出されていました。この仕様は変更され、呼び出されなくなりました。そのため、
(タイムスタンプなどの) <tt class="docutils literal"><span class="pre">save()</span></tt> 時に自動的に値が入るフィールドがある場合、
フィクスチャ側に値を持たせる必要があります。</p>
</div>
</div>
<div class="section" id="s-id24">
<h3>設定<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-id25">
<h4>例外の改善<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h4>
<p>以前の <tt class="xref docutils literal"><span class="pre">EnvironmentError</span></tt> は <tt class="xref docutils literal"><span class="pre">ImportError</span></tt> と <tt class="xref docutils literal"><span class="pre">RuntimeError</span></tt>
に分割されました。 <tt class="xref docutils literal"><span class="pre">ImportError</span></tt> は、 Django が設定モジュールを見付け
られなかった場合などに、 <tt class="xref docutils literal"><span class="pre">RuntimeError</span></tt> はすでに設定をロードした後に設
定を変更しようとした場合などに送出されます。</p>
</div>
<div class="section" id="s-login-url">
<h4><tt class="docutils literal"><span class="pre">LOGIN_URL</span></tt> の移動<a class="headerlink" href="#login-url" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">LOGIN_URL</span></tt> 定数が、 <tt class="docutils literal"><span class="pre">django.contrib.auth</span></tt> から <tt class="docutils literal"><span class="pre">settings</span></tt> モジュール
に移動しました。 <tt class="docutils literal"><span class="pre">from</span> <span class="pre">django.contrib.auth</span> <span class="pre">import</span> <span class="pre">LOGIN_URL</span></tt> を使うのでは
なく、 <a class="reference external" href="../ref/settings.html#setting-LOGIN_URL"><tt class="xref docutils literal"><span class="pre">settings.LOGIN_URL</span></tt></a> を参照してください。</p>
</div>
<div class="section" id="s-append-slash">
<h4><a class="reference external" href="../ref/settings.html#setting-APPEND_SLASH"><tt class="xref docutils literal"><span class="pre">APPEND_SLASH</span></tt></a> の動作が変更されました<a class="headerlink" href="#append-slash" title="Permalink to this headline">¶</a></h4>
<p>0.96 では、 URL がスラッシュで終っておらず、パスの最後の部分にピリオドもな
い場合、 <tt class="docutils literal"><span class="pre">APPEND_SLASH</span></tt> が <tt class="xref docutils literal"><span class="pre">True</span></tt> だと、末尾にスラッシュを付加した URL
にリダイレクトしていました。 1.0 では、明示的にスラッシュのないパターンを
URL パターンでキャッチできるように、末尾にスラッシュのない URL に対して、
まず URL パターン中に一致するエントリがないか調べ、あればリダイレクトしなく
なりました。</p>
<p>ほとんどのユーザはこの仕様変更の影響を受けませんが、以下のような URL パター
ンを書いている一部のユーザは影響を受けます:</p>
<div class="highlight"><pre><span class="s">r&#39;/some_prefix/(.*)$&#39;</span>
</pre></div>
<p>以前は、こうしたパターンを書いている場合、まず末尾にスラッシュのある URL に
リダイレクトしていました。 URL の末尾に必ずスラッシュが入っているようなパターンを書きたいなら、以下のようにパターンを書き換えてください:</p>
<div class="highlight"><pre><span class="s">r&#39;/some_prefix/(.*/)$&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="s-id26">
<h3>モデルに関する細かい変更<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-get">
<h4><tt class="docutils literal"><span class="pre">get()</span></tt> の例外<a class="headerlink" href="#get" title="Permalink to this headline">¶</a></h4>
<p>モデルマネジャは <tt class="xref docutils literal"><span class="pre">AssertionError</span></tt> ではなく
<tt class="xref docutils literal"><span class="pre">MultipleObjectsReturned</span></tt> 例外を返すようになりました。</p>
<p>旧 (0.96):</p>
<div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="n">handle_the_error</span><span class="p">()</span>
</pre></div>
<p>新 (1.0):</p>
<div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">except</span> <span class="n">Model</span><span class="o">.</span><span class="n">MultipleObjectsReturned</span><span class="p">:</span>
    <span class="n">handle_the_error</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="s-lazydate">
<h4><tt class="docutils literal"><span class="pre">LazyDate</span></tt> の除去<a class="headerlink" href="#lazydate" title="Permalink to this headline">¶</a></h4>
<p>ヘルパクラス <tt class="docutils literal"><span class="pre">LazyDate</span></tt> はなくなりました。</p>
<p>フィールド値やクエリ引数に呼び出し可能オブジェクトを指定できるようになった
ので、 <tt class="docutils literal"><span class="pre">LazyDate</span></tt> は <tt class="docutils literal"><span class="pre">datetime.datetime.now</span></tt> に置き換えられます:</p>
<p>旧 (0.96):</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">maxlength</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">published</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">LazyDate</span><span class="p">())</span>
</pre></div>
<p>新 (1.0):</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">datetime</span>

<span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">maxlength</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">published</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="s-decimalfield-floatfield">
<h4><tt class="docutils literal"><span class="pre">DecimalField</span></tt> が追加され <tt class="docutils literal"><span class="pre">FloatField</span></tt> が適切に浮動小数を扱うようになる<a class="headerlink" href="#decimalfield-floatfield" title="Permalink to this headline">¶</a></h4>
<p>旧 (0.96):</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">field_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FloatField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
<p>新 (1.0):</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">field_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
<p>これらの変更に対応し忘れると、新たな <tt class="docutils literal"><span class="pre">FloatField</span></tt> には精度桁数に関する引
数がないので、 <tt class="docutils literal"><span class="pre">FloatField</span></tt> の <tt class="docutils literal"><span class="pre">__init__</span></tt> には <tt class="docutils literal"><span class="pre">max_digits</span></tt> という属
性がない、という旨のエラーを受け取ります。</p>
<p>MySQL や PostgreSQL を使っている場合、これ以上の変更は必要ありません。
<tt class="docutils literal"><span class="pre">DecimalField</span></tt> のデータベースカラム型は、旧来の <tt class="docutils literal"><span class="pre">FloatField</span></tt> と同じだか
らです。</p>
<p>SQLite を使っている場合、データベースに対して、データを decimal 型でなく
float 型として扱うよう教え直す必要があります。そのために、データをリロード
してください。データのリロードは、 <tt class="docutils literal"><span class="pre">DecimalField</span></tt> への変更を終えて、
Django をアップデートした後に行ってください。</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>データベースを先にバックアップしてください!</strong></p>
<p class="last">SQLite を使っている場合、データベースのバックアップするには、単にデータベー
スの保存されているファイル (<tt class="docutils literal"><span class="pre">settings.py</span></tt> の <tt class="docutils literal"><span class="pre">DATABASE_NAME</span></tt> に指定し
ているファイル名) をコピーします。</p>
</div>
<p><tt class="docutils literal"><span class="pre">DecimalField</span></tt> を使う全てのアプリケーションについて以下の作業を行ってくだ
さい。 <tt class="docutils literal"><span class="pre">&lt;app&gt;</span></tt> はアプリケーションのなめに読み変えます:</p>
<div class="highlight"><pre><span class="nv">$ </span>./manage.py dumpdata --format<span class="o">=</span>xml &lt;app&gt; &gt; data-dump.xml
<span class="nv">$ </span>./manage.py reset &lt;app&gt;
<span class="nv">$ </span>./manage.py loaddata data-dump.xml
</pre></div>
<p>注意:</p>
<ol class="arabic simple">
<li>作業の最初のステップでは、必ずダンプ形式に XML を指定してください。と
いうのも、このステップでは、 XML データダンプによって、 float データが
SQLite で扱える decimal に変換されるという仕様を使っているからです。</li>
<li>二つめのステップでは、アプリケーションのデータが失われてもよいか尋ねら
れます。 yes と答えてください。もちろん、三つ目のステップでデータを復
元しますからね。</li>
<li><tt class="docutils literal"><span class="pre">DecimalField</span></tt> に関する仕様変更前からある Django 付属のアプリケーショ
ンは、全て影響を受けません。したがって、標準の Django モデルに対してこ
の操作を行う必要はありません。</li>
</ol>
<p>上のプロセスでうまく行かないようなら、バックアップしておいたデータベースファ
イルをデータベースファイルに上書きして、Django を再起動してください。</p>
</div>
</div>
<div class="section" id="s-id27">
<h3>国際化<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-django-views-i18n-set-language-post">
<h4><tt class="xref docutils literal"><span class="pre">django.views.i18n.set_language()</span></tt> には POST リクエストが必要<a class="headerlink" href="#django-views-i18n-set-language-post" title="Permalink to this headline">¶</a></h4>
<p>以前は、 GET リクエストが使われていました。この動作は、サーバの状態 (サイト
を表示する際のロケール) を GET リクエストで変更できることになり、 HTTP 仕様
の勧告に違反しています。 1.0 からは、このビューを呼び出すときには、GET では
なく POST リクエストを使わねばならなくなりました。そのため、このビューは
リンクを使ってアクセスできず、ボタンなどを使ってフォームを提出せねばならな
くなりました。</p>
</div>
<div class="section" id="s-id28">
<h4><tt class="docutils literal"><span class="pre">_()</span></tt> は組み込みでなくなりました<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<p>以前は、モンキーパッチによって <tt class="docutils literal"><span class="pre">_()</span></tt> を組み込み名前空間にいれていました。
そのため、 <tt class="docutils literal"><span class="pre">_()</span></tt> が常に存在することを前提としてコードを書いている場合、
<tt class="docutils literal"><span class="pre">ugettext</span></tt> や <tt class="docutils literal"><span class="pre">ugettext_lazy</span></tt> のどちらか適切な方を明示的に import して、
<tt class="docutils literal"><span class="pre">_</span></tt> という別名をつけねばなりません:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext</span> <span class="k">as</span> <span class="n">_</span>
</pre></div>
</div>
</div>
<div class="section" id="s-http">
<h3>HTTP リクエスト／レスポンスオブジェクト<a class="headerlink" href="#http" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-httpresponse">
<h4><tt class="docutils literal"><span class="pre">HTTPResponse</span></tt> ヘッダへのアクセス<a class="headerlink" href="#httpresponse" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">django.http.HttpResponse.headers</span></tt> は <tt class="docutils literal"><span class="pre">_headers</span></tt> にリネームされ、
<tt class="xref docutils literal"><span class="pre">HttpResponse`</span></tt> はヘッダの包含チェックを直接サポートするようになりま
した。従って、 <tt class="docutils literal"><span class="pre">if</span> <span class="pre">header</span> <span class="pre">in</span> <span class="pre">response.headers:</span></tt> ではなく
<tt class="docutils literal"><span class="pre">if</span> <span class="pre">header</span> <span class="pre">in</span> <span class="pre">response:</span></tt> と書いてください。</p>
</div>
</div>
<div class="section" id="s-id29">
<h3>一般化リレーション<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-id30">
<h4>一般化リレーションはコアパッケージから移動しました<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h4>
<p>一般化リレーションのクラス、 <tt class="docutils literal"><span class="pre">GenericForeignKey</span></tt> および
<tt class="docutils literal"><span class="pre">GenericRelation</span></tt> は、 <a title="インストール済のモデルを扱うための汎用インタフェースを提供します。" class="reference external" href="../ref/contrib/contenttypes.html"><tt class="xref docutils literal"><span class="pre">django.contrib.contenttypes</span></tt></a> モジュールに移
動しました。</p>
</div>
</div>
<div class="section" id="s-id31">
<h3>テスト<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-django-test-client-login">
<h4><tt class="xref docutils literal"><span class="pre">django.test.Client.login()</span></tt> の変更<a class="headerlink" href="#django-test-client-login" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">login</span></tt> の引数が以下のように変更されました。</p>
<p>旧 (0.96):</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">c</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="s">&#39;/path/to/login&#39;</span><span class="p">,</span><span class="s">&#39;myuser&#39;</span><span class="p">,</span><span class="s">&#39;mypassword&#39;</span><span class="p">)</span>
</pre></div>
<p>新 (1.0):</p>
<div class="highlight"><pre><span class="c"># ... same as above, but then:</span>
<span class="n">c</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">&#39;myuser&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">&#39;mypassword&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-id32">
<h3>管理コマンド<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-id33">
<h4>管理コマンドをコードの中から呼び出す<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
<p><tt class="xref docutils literal"><span class="pre">django.core.management`</span></tt> は大幅にリファクタされています。</p>
<p>管理コマンドのサービスをコードから呼び出すには、 <tt class="docutils literal"><span class="pre">call_command</span></tt> を使う必
要があります。例えば、 <a class="reference external" href="../ref/django-admin.html#djadmin-flush"><tt class="xref docutils literal"><span class="pre">flush</span></tt></a>  や <tt class="xref docutils literal"><span class="pre">load_data</span></tt> を呼び出す
テストコードを以下のように書いていたとしましょう:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core</span> <span class="kn">import</span> <span class="n">management</span>
<span class="n">management</span><span class="o">.</span><span class="n">flush</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">interactive</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">management</span><span class="o">.</span><span class="n">load_data</span><span class="p">([</span><span class="s">&#39;test_data&#39;</span><span class="p">],</span> <span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
<p>このコードは、例えば以下のように変更してください:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core</span> <span class="kn">import</span> <span class="n">management</span>
<span class="n">management</span><span class="o">.</span><span class="n">call_command</span><span class="p">(</span><span class="s">&#39;flush&#39;</span><span class="p">,</span> <span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">interactive</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">management</span><span class="o">.</span><span class="n">call_command</span><span class="p">(</span><span class="s">&#39;loaddata&#39;</span><span class="p">,</span> <span class="s">&#39;test_data&#39;</span><span class="p">,</span> <span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="s-id34">
<h4>サブコマンドはオプションの前に置く<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">django-admin.py</span></tt> と <tt class="docutils literal"><span class="pre">manage.py</span></tt> に引数を指定するとき、サブコマンドはオ
プションよりも前に置かねばならなくなりました。従って:</p>
<div class="highlight"><pre><span class="nv">$ </span>django-admin.py --settings<span class="o">=</span>foo.bar runserver
</pre></div>
<p>はもう使えず、以下のように変更せねばなりません:</p>
<div class="highlight"><pre><span class="nv">$ </span>django-admin.py runserver --settings<span class="o">=</span>foo.bar
</pre></div>
</div>
</div>
<div class="section" id="s-id35">
<h3>配信フィード<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-feed-init">
<h4><tt class="docutils literal"><span class="pre">Feed.__init__</span></tt> の変更<a class="headerlink" href="#feed-init" title="Permalink to this headline">¶</a></h4>
<p>配信フィードフレームワークの <tt class="docutils literal"><span class="pre">Feed</span></tt> クラスの <tt class="docutils literal"><span class="pre">__init__()</span></tt> パラメタは、
第二引数にフィードの URL ではなく <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> オブジェクトを取るように
なりました。この変更によって、配信フィードフレームワークは sites フレームワー
クがなくても動作するようになりました。 <tt class="docutils literal"><span class="pre">Feed</span></tt> をサブクラス化して、
<tt class="docutils literal"><span class="pre">__init__()</span></tt> をオーバライドするコードや、 <tt class="docutils literal"><span class="pre">Feed.__init__()</span></tt> を直接呼び
出しているコードが影響を受けます。</p>
</div>
</div>
<div class="section" id="s-id36">
<h3>データ構造<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-sorteddictfromlist">
<h4><tt class="docutils literal"><span class="pre">SortedDictFromList</span></tt> の撤廃<a class="headerlink" href="#sorteddictfromlist" title="Permalink to this headline">¶</a></h4>
<p><cite>django.newforms.forms.SortedDictFromList`</cite> はなくなりました。その代わり、
タプルのシーケンスを使って <tt class="xref docutils literal"><span class="pre">django.utils.datastructures.SortedDict`</span></tt>
をインスタンス化できるようになりました。</p>
<p>コードを変更するには、以下のように書き換えてください:</p>
<ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">django.newforms.forms.SortedDictFromList</span></tt> を使っている部分を
<tt class="xref docutils literal"><span class="pre">django.utils.datastructures.SortedDict</span></tt> に書き換えてくださ
い。</li>
<li><tt class="xref docutils literal"><span class="pre">django.utils.datastructures.SortedDict.copy()</span></tt> は
<tt class="docutils literal"><span class="pre">SortedDictFromList</span></tt> メソッドのように、深いコピーを返すので、
コードを deepcopy に対応して書き換える必要があります。深いコピーを
作成するには、 <tt class="docutils literal"><span class="pre">copy.deepcopy</span></tt> を直接呼び出します。</li>
</ol>
</div>
</div>
<div class="section" id="s-id37">
<h3>データベースバックエンドの関数<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-id38">
<h4>データベースバックエンドの関数名の変更<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h4>
<p>データベースバックエンドレベルの関数の名前は、ほとんど <em>すべて</em> 変更され、
場所が変わっているものもあります。この変更はドキュメントで一切説明されてい
ませんが、自分のコードでこれらの関数を使っていたのなら、名前を変更する必要
があるでしょう。関数は全て <tt class="xref docutils literal"><span class="pre">django.db</span></tt> パッケージ下にあります:</p>
<table class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">旧 (0.96)</th>
<th class="head">新 (1.0)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">backend.get_autoinc_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.autoinc_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_date_extract_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.date_extract_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_date_trunc_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.date_trunc_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_datetime_cast_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.datetime_cast_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_deferrable_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.deferrable_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_drop_foreignkey_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.drop_foreignkey_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_fulltext_search_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.fulltext_search_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_last_insert_id</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.last_insert_id</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_limit_offset_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.limit_offset_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_max_name_length</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.max_name_length</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_pk_default_value</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.pk_default_value</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_random_function_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.random_function_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_sql_flush</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.sql_flush</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_sql_sequence_reset</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.sequence_reset_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_start_transaction_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.start_transaction_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_tablespace_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.tablespace_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.quote_name</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.quote_name</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_query_set_class</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.query_set_class</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_field_cast_sql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.field_cast_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.get_drop_sequence</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.ops.drop_sequence_sql</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.OPERATOR_MAPPING</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.operators</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.allows_group_by_ordinal</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.features.allows_group_by_ordinal</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.allows_unique_and_pk</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.features.allows_unique_and_pk</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.autoindexes_primary_keys</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.features.autoindexes_primary_keys</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.needs_datetime_string_cast</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.features.needs_datetime_string_cast</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.needs_upper_for_iops</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.features.needs_upper_for_iops</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.supports_constraints</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.features.supports_constraints</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.supports_tablespaces</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.features.supports_tablespaces</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.uses_case_insensitive_names</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.features.uses_case_insensitive_names</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">backend.uses_custom_queryset</span></tt></td>
<td><tt class="docutils literal"><span class="pre">connection.features.uses_custom_queryset</span></tt></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference external" href="">アプリケーションを Django 0.96 から 1.0 に移行する</a><ul>
<li><a class="reference external" href="#id2">一般的な変更</a><ul>
<li><a class="reference external" href="#unicode">Unicode を使う</a></li>
<li><a class="reference external" href="#id3">モデル</a><ul>
<li><a class="reference external" href="#maxlength-max-length"><tt class="docutils literal"><span class="pre">maxlength</span></tt> を <tt class="docutils literal"><span class="pre">max_length</span></tt> に変更する</a></li>
<li><a class="reference external" href="#str-unicode"><tt class="docutils literal"><span class="pre">__str__</span></tt> を <tt class="docutils literal"><span class="pre">__unicode__</span></tt> に置き換える</a></li>
<li><a class="reference external" href="#prepopulated-from"><tt class="docutils literal"><span class="pre">prepopulated_from</span></tt> をなくす</a></li>
<li><a class="reference external" href="#class-admin-admin-py"><tt class="docutils literal"><span class="pre">class</span> <span class="pre">Admin:</span></tt> を <tt class="docutils literal"><span class="pre">admin.py</span></tt> と置き換える</a></li>
<li><a class="reference external" href="#id6">admin の変更例</a></li>
</ul>
</li>
<li><a class="reference external" href="#id7">admin の変更</a><ul>
<li><a class="reference external" href="#id11">インラインの宣言方法</a></li>
<li><a class="reference external" href="#fields-fieldsets"><tt class="docutils literal"><span class="pre">fields</span></tt> を簡単にする、または <tt class="docutils literal"><span class="pre">fieldsets</span></tt> を使う</a></li>
</ul>
</li>
<li><a class="reference external" href="#urls">URLs</a><ul>
<li><a class="reference external" href="#urls-py">ルート <tt class="docutils literal"><span class="pre">urls.py</span></tt> を修正する</a></li>
</ul>
</li>
<li><a class="reference external" href="#id13">ビュー</a><ul>
<li><a class="reference external" href="#newforms-django-forms"><tt class="docutils literal"><span class="pre">newforms</span></tt> の代わりに <tt class="docutils literal"><span class="pre">django.forms</span></tt> を使う</a></li>
<li><a class="reference external" href="#api">アップロードファイルの処理に新しい API を使う</a></li>
</ul>
</li>
<li><a class="reference external" href="#id14">テンプレート</a><ul>
<li><a class="reference external" href="#id15">オートエスケープを使う</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference external" href="#id16">よりマイナーな変更</a><ul>
<li><a class="reference external" href="#id17">シグナル</a></li>
<li><a class="reference external" href="#id18">コメント</a></li>
<li><a class="reference external" href="#id19">テンプレートタグ</a><ul>
<li><a class="reference external" href="#spaceless"><tt class="docutils literal"><span class="pre">spaceless</span></tt> タグ</a></li>
</ul>
</li>
<li><a class="reference external" href="#id20">ローカルフレーバ</a><ul>
<li><a class="reference external" href="#us">US ローカルフレーバ</a></li>
</ul>
</li>
<li><a class="reference external" href="#id21">セッション</a><ul>
<li><a class="reference external" href="#id22">新たなセッションキーの取得</a></li>
</ul>
</li>
<li><a class="reference external" href="#id23">フィクスチャ</a><ul>
<li><a class="reference external" href="#save">行レコードのロード時に <tt class="docutils literal"><span class="pre">save()</span></tt> が呼ばれなくなる</a></li>
</ul>
</li>
<li><a class="reference external" href="#id24">設定</a><ul>
<li><a class="reference external" href="#id25">例外の改善</a></li>
<li><a class="reference external" href="#login-url"><tt class="docutils literal"><span class="pre">LOGIN_URL</span></tt> の移動</a></li>
<li><a class="reference external" href="#append-slash"><tt class="docutils literal"><span class="pre">APPEND_SLASH</span></tt> の動作が変更されました</a></li>
</ul>
</li>
<li><a class="reference external" href="#id26">モデルに関する細かい変更</a><ul>
<li><a class="reference external" href="#get"><tt class="docutils literal"><span class="pre">get()</span></tt> の例外</a></li>
<li><a class="reference external" href="#lazydate"><tt class="docutils literal"><span class="pre">LazyDate</span></tt> の除去</a></li>
<li><a class="reference external" href="#decimalfield-floatfield"><tt class="docutils literal"><span class="pre">DecimalField</span></tt> が追加され <tt class="docutils literal"><span class="pre">FloatField</span></tt> が適切に浮動小数を扱うようになる</a></li>
</ul>
</li>
<li><a class="reference external" href="#id27">国際化</a><ul>
<li><a class="reference external" href="#django-views-i18n-set-language-post"><tt class="docutils literal"><span class="pre">django.views.i18n.set_language</span></tt> には POST リクエストが必要</a></li>
<li><a class="reference external" href="#id28"><tt class="docutils literal"><span class="pre">_()</span></tt> は組み込みでなくなりました</a></li>
</ul>
</li>
<li><a class="reference external" href="#http">HTTP リクエスト／レスポンスオブジェクト</a><ul>
<li><a class="reference external" href="#httpresponse"><tt class="docutils literal"><span class="pre">HTTPResponse</span></tt> ヘッダへのアクセス</a></li>
</ul>
</li>
<li><a class="reference external" href="#id29">一般化リレーション</a><ul>
<li><a class="reference external" href="#id30">一般化リレーションはコアパッケージから移動しました</a></li>
</ul>
</li>
<li><a class="reference external" href="#id31">テスト</a><ul>
<li><a class="reference external" href="#django-test-client-login"><tt class="docutils literal"><span class="pre">django.test.Client.login</span></tt> の変更</a></li>
</ul>
</li>
<li><a class="reference external" href="#id32">管理コマンド</a><ul>
<li><a class="reference external" href="#id33">管理コマンドをコードの中から呼び出す</a></li>
<li><a class="reference external" href="#id34">サブコマンドはオプションの前に置く</a></li>
</ul>
</li>
<li><a class="reference external" href="#id35">配信フィード</a><ul>
<li><a class="reference external" href="#feed-init"><tt class="docutils literal"><span class="pre">Feed.__init__</span></tt> の変更</a></li>
</ul>
</li>
<li><a class="reference external" href="#id36">データ構造</a><ul>
<li><a class="reference external" href="#sorteddictfromlist"><tt class="docutils literal"><span class="pre">SortedDictFromList</span></tt> の撤廃</a></li>
</ul>
</li>
<li><a class="reference external" href="#id37">データベースバックエンドの関数</a><ul>
<li><a class="reference external" href="#id38">データベースバックエンドの関数名の変更</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>前後のページ</h3>
  <ul>
    
      <li>前: <a href="1.0.html">Django 1.0 リリースノート</a></li>
    
    
      <li>次: <a href="../internals/index.html">Django の内部</a></li>
    
  </ul>
  <h3>現在のページ:</h3>
  <ul>
      <li>
        <a href="../index.html">Django v1.0 documentation</a>
        
          <ul><li><a href="index.html">リリースノート</a>
        
          <ul><li><a href="1.0.html">Django 1.0 リリースノート</a>
        
        <ul><li>アプリケーションを Django 0.96 から 1.0 に移行する</li></ul>
        </li></ul></li></ul>
      </li>
  </ul>  

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/releases/1.0-porting-guide.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">Aug 31, 2012</p>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="1.0.html" title="Django 1.0 リリースノート">前へ</a> 
     |
    <a href="index.html" title="リリースノート" accesskey="U">上へ</a>
   |
    <a href="../internals/index.html" title="Django の内部">次へ</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>